<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Pig House</title>
  
  <subtitle>é’æ˜¥çŒªå¤´å°‘å¹´</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://deletee.github.io/"/>
  <updated>2019-01-22T15:01:38.892Z</updated>
  <id>https://deletee.github.io/</id>
  
  <author>
    <name>deletee</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä¸€èµ·æ¥å­¦Scala(4)-å¾ªç¯</title>
    <link href="https://deletee.github.io/2019/01/22/scala-programing-loop/"/>
    <id>https://deletee.github.io/2019/01/22/scala-programing-loop/</id>
    <published>2019-01-22T14:02:17.000Z</published>
    <updated>2019-01-22T15:01:38.892Z</updated>
    
    <content type="html"><![CDATA[<p>&ensp;&ensp;&ensp;&ensp;&ensp;ä»Šå¤©å­¦ä¹ çš„å†…å®¹æ˜¯å¾ªç¯ï¼Œå¾ªç¯è¯­å¥å…è®¸æˆ‘ä»¬å¤šæ¬¡æ‰§è¡Œä¸€ä¸ªè¯­å¥æˆ–è¯­å¥ç»„ï¼Œä¸‹é¢æ˜¯å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­å¾ªç¯è¯­å¥çš„æµç¨‹å›¾ï¼š<br><img src="http://www.runoob.com/wp-content/uploads/2015/12/loop.png" alt="loop.png"></p><p>&ensp;&ensp;&ensp;&ensp;&ensp;Scalaä¸­çš„å¾ªç¯ä¸Javaä¸­å¾ªç¯è¡¨ç°ä¸ä¸€æ ·ï¼Œä¸»è¦ä½“ç°åœ¨å†™æ³•åŠå«è¯­å¥æ”¯æŒã€‚ä¸‹é¢çœ‹ä¸€æ®µä¼ªä»£ç ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(line &lt;- source.getLines)&#123;</span><br><span class="line">    <span class="keyword">for</span> (char &lt;- line)&#123;</span><br><span class="line">        <span class="keyword">if</span> char.isLetter&#123;</span><br><span class="line">            <span class="comment">// your code</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Scalaå¯ä»¥è¿™æ ·ç®€å†™â€¦</p><a id="more"></a><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>&#123;line &lt;- source.getLines)&#123;</span><br><span class="line">    char &lt;- line</span><br><span class="line">    <span class="keyword">if</span> char.isLetter</span><br><span class="line">        <span class="comment">// your code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Scalaå¯ä½¿å¾—å¾ªç¯çš„å†™æ³•éå¸¸ç®€æ´ã€‚</p><h4 id="0x1-å¾ªç¯ç±»å‹"><a href="#0x1-å¾ªç¯ç±»å‹" class="headerlink" title="0x1 å¾ªç¯ç±»å‹"></a>0x1 å¾ªç¯ç±»å‹</h4><h5 id="0x10-forå¾ªç¯"><a href="#0x10-forå¾ªç¯" class="headerlink" title="0x10 forå¾ªç¯"></a>0x10 forå¾ªç¯</h5><p><strong>è¡¨è¾¾å¼:</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(x &lt;- <span class="type">Range</span> )&#123;</span><br><span class="line">   statement(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¸¾ä¸ªä¾‹å­ã€ŒğŸŒ°ã€ä¾‹1ï¼š</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">var</span> r = <span class="type">Range</span>(<span class="number">1</span>,<span class="number">4</span>,<span class="number">1</span>)</span><br><span class="line">r: scala.collection.immutable.<span class="type">Range</span> = <span class="type">Range</span>(<span class="number">1</span>, <span class="number">2</span> ,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">for</span>( x&lt;- r)&#123;</span><br><span class="line">     | println(x)</span><br><span class="line">     | &#125;</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p><strong>éå†ä¸€ä¸ªMapï¼Œä¾‹2</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> names = <span class="type">Map</span>(<span class="string">"fname"</span> -&gt; <span class="string">"Robert"</span>,<span class="string">"lname"</span>-&gt;<span class="string">"Goren"</span>)</span><br><span class="line"><span class="keyword">for</span>((k,v)&lt;-names)&#123;</span><br><span class="line">    println(<span class="string">s"key:<span class="subst">$k</span>,value:<span class="subst">$v</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¤šç§å¾ªç¯ï¼š</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(x &lt;- <span class="type">Range</span>; y&lt;- <span class="type">Range</span> )&#123;</span><br><span class="line">   statement(x,y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="0x11-whileå¾ªç¯"><a href="#0x11-whileå¾ªç¯" class="headerlink" title="0x11 whileå¾ªç¯"></a>0x11 whileå¾ªç¯</h5><p>è¡¨è¾¾å¼å¦‚ä¸‹:</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(condition)&#123;</span><br><span class="line">   statement(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¾‹å­ï¼š</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">var</span> i = <span class="number">0</span></span><br><span class="line">i: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">while</span>(i&lt;<span class="number">10</span>)&#123;</span><br><span class="line">     |     println(i)</span><br><span class="line">     |     i += <span class="number">1</span></span><br><span class="line">     | &#125;</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p><strong>å¤šé‡å¾ªç¯æ¡ä»¶:</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(condition1)&#123;</span><br><span class="line">   <span class="keyword">while</span>(condition2)</span><br><span class="line">      statement(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="0x12-doâ€¦whileå¾ªç¯"><a href="#0x12-doâ€¦whileå¾ªç¯" class="headerlink" title="0x12 doâ€¦whileå¾ªç¯"></a>0x12 doâ€¦whileå¾ªç¯</h5><p>while ä¸ doâ€¦whileå¾ªç¯ç±»ä¼¼</p><p>è¡¨è¾¾å¼å¦‚ä¸‹ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">do&#123;</span><br><span class="line">   statement(x);</span><br><span class="line">&#125;<span class="keyword">while</span>(condition)</span><br></pre></td></tr></table></figure><h4 id="0x2-å¾ªç¯ä¸­çš„å«è¯­å¥"><a href="#0x2-å¾ªç¯ä¸­çš„å«è¯­å¥" class="headerlink" title="0x2 å¾ªç¯ä¸­çš„å«è¯­å¥"></a>0x2 å¾ªç¯ä¸­çš„å«è¯­å¥</h4><p>&ensp;&ensp;&ensp;&ensp;&ensp;å¾ªç¯ä¸­çš„å«è¯­å¥å³åœ¨forå¾ªç¯ä¸­åµŒå…¥ifè¯­å¥ï¼Œæˆ‘ä»¬åœ¨ä¸šåŠ¡å¼€å‘ä¸­ï¼Œåœ¨éå†è¿‡ç¨‹ä¸­éœ€è¦æ ¹æ®if æ¡ä»¶è¿›è¡Œä¸åŒé€»è¾‘å¤„ç†ï¼Œæ¯”å¦‚è¿‡æ»¤æ‰æŸäº›é¡¹ã€‚é€šå¸¸çš„åšæ³•æ˜¯ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i &lt;- <span class="number">1</span> to <span class="number">10</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        println(i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨Scalaä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™:</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i &lt;- <span class="number">1</span> to <span class="number">10</span> <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">    println(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥è¿™æ ·å†™</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>&#123;</span><br><span class="line">    i &lt;- <span class="number">1</span> to <span class="number">10</span></span><br><span class="line">    <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span></span><br><span class="line">&#125; println(i)</span><br></pre></td></tr></table></figure><p><strong>è¡¨è¾¾å¼è¯­æ³•ï¼š</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>&#123;</span><br><span class="line">    loop</span><br><span class="line">    condition1</span><br><span class="line">    condition2</span><br><span class="line">    ...</span><br><span class="line">&#125; statement();</span><br></pre></td></tr></table></figure><h4 id="0x3-yieldè¯­æ³•"><a href="#0x3-yieldè¯­æ³•" class="headerlink" title="0x3 yieldè¯­æ³•"></a>0x3 yieldè¯­æ³•</h4><p>&ensp;&ensp;&ensp;&ensp;&ensp;é€šè¿‡yieldè¯­æ³•ç”Ÿæˆæ–°çš„é›†åˆï¼ˆPSï¼šé€šå¸¸åŸé›†åˆæ˜¯ä»€ä¹ˆç±»å‹ï¼Œç”Ÿæˆçš„é›†åˆå°±æ˜¯ä»€ä¹ˆç±»å‹ï¼‰ï¼Œå‡è®¾æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„å€¼éƒ½æ˜¯å°å†™çš„å­—ç¬¦ä¸²ï¼Œå°†å…¶è¿›è¡Œé¦–å­—æ¯å¤§å†™å¤„ç†ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> arr = <span class="type">Array</span>(<span class="string">"delete"</span>,<span class="string">"scala"</span>,<span class="string">"zt"</span>)</span><br><span class="line"><span class="keyword">val</span> arr_yield = <span class="keyword">for</span> (i&lt;-arr) <span class="keyword">yield</span> i.capitalize</span><br><span class="line"></span><br><span class="line">scala&gt; arr_yield.foreach(println)</span><br><span class="line"><span class="type">Delete</span></span><br><span class="line"><span class="type">Scala</span></span><br><span class="line"><span class="type">Zt</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><h4 id="0x4-break-amp-continue"><a href="#0x4-break-amp-continue" class="headerlink" title="0x4 break &amp; continue"></a>0x4 break &amp; continue</h4><p>&ensp;&ensp;&ensp;&ensp;&ensp;ä¸Javaå’Œå…¶ä»–è¯­è¨€ä¸é€šï¼Œåœ¨Scalaä¸­break ä¸€ç§æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œåœ¨Scalaä¸­éœ€ç”¨ç”¨åˆ° breakableåŠbreakä¸¤ä¸ªæ–¹æ³•ï¼Œç”±breakæŠ›å‡ºå¼‚å¸¸ï¼Œbreakableè¿›è¡Œå¼‚å¸¸æ•è·ï¼Œç”±æ­¤å®ç°break &amp; continueåŠŸèƒ½ï¼Œä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><p><strong>ä¾‹1ï¼šbreakå®ç°</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">breakable&#123;</span><br><span class="line">    <span class="keyword">for</span>(i&lt;- <span class="number">1</span> to <span class="number">10</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">break</span>  # å°†è·³å‡ºå¾ªç¯ å®ç°<span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¾‹2ï¼šcontinueå®ç°</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i&lt;- <span class="number">1</span> to <span class="number">10</span>)&#123;</span><br><span class="line">    breakable&#123;</span><br><span class="line">    <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">break</span>  # è·³å‡ºå½“å‰ï¼Œç»§ç»­ä¸‹ä¸€éå†</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨scala.util.control.breaksç±»ä¸­ï¼Œæœ‰éå¸¸æ¸…æ™°çš„å®šä¹‰ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * A block from which one can exit with a `break`. The `break` may be</span></span><br><span class="line"><span class="comment">   * executed further down in the call stack provided that it is called on the</span></span><br><span class="line"><span class="comment">   * exact same instance of `Breaks`.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">breakable</span></span>(op: =&gt; <span class="type">Unit</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      op</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> ex: <span class="type">BreakControl</span> =&gt;</span><br><span class="line">        <span class="keyword">if</span> (ex ne breakException) <span class="keyword">throw</span> ex</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Break from dynamically closest enclosing breakable block using this exact</span></span><br><span class="line"><span class="comment">   * `Breaks` instance.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @note This might be different than the statically closest enclosing block!</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">break</span></span>(): <span class="type">Nothing</span> = &#123; <span class="keyword">throw</span> breakException &#125;</span><br></pre></td></tr></table></figure><p>ç”±breakå‡½æ•°æŠ›å‡ºå¼‚å¸¸ï¼Œç”±breakableæ•è·å¼‚å¸¸</p><h4 id="0xF-æ€»ç»“"><a href="#0xF-æ€»ç»“" class="headerlink" title="0xF æ€»ç»“"></a>0xF æ€»ç»“</h4><p>&ensp;&ensp;&ensp;&ensp;&ensp;å¾ªç¯ç»“æ„ä¸å…¶ä»–è¯­è¨€å¤§åŒå°å¼‚ï¼ŒScalaä¸­æ›´åŠ ç®€æ´çš„è¡¨è¾¾æ–¹å¼æ˜¯å…¶ä¸€å¤§äº®ç‚¹ï¼Œå­¦ä¹ Scalaå¯èƒ½éœ€è¦å¤šé€‚åº”Scalaè¯­è¨€çš„è¡¨è¾¾æ–¹å¼æ‰èƒ½ç†è§£ï¼Œå½“ç„¶æ˜¯ç”¨å¸¸è§„çš„æ–¹å¼è¿›è¡Œè¡¨è¾¾ä¹Ÿä¸ä¼šæœ‰é—®é¢˜ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;ä»Šå¤©å­¦ä¹ çš„å†…å®¹æ˜¯å¾ªç¯ï¼Œå¾ªç¯è¯­å¥å…è®¸æˆ‘ä»¬å¤šæ¬¡æ‰§è¡Œä¸€ä¸ªè¯­å¥æˆ–è¯­å¥ç»„ï¼Œä¸‹é¢æ˜¯å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­å¾ªç¯è¯­å¥çš„æµç¨‹å›¾ï¼š&lt;br&gt;&lt;img src=&quot;http://www.runoob.com/wp-content/uploads/2015/12/loop.png&quot; alt=&quot;loop.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;Scalaä¸­çš„å¾ªç¯ä¸Javaä¸­å¾ªç¯è¡¨ç°ä¸ä¸€æ ·ï¼Œä¸»è¦ä½“ç°åœ¨å†™æ³•åŠå«è¯­å¥æ”¯æŒã€‚ä¸‹é¢çœ‹ä¸€æ®µä¼ªä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(line &amp;lt;- source.getLines)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (char &amp;lt;- line)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; char.isLetter&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// your code&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Scalaå¯ä»¥è¿™æ ·ç®€å†™â€¦&lt;/p&gt;
    
    </summary>
    
      <category term="0x0 å¼€å‘è¯­è¨€" scheme="https://deletee.github.io/categories/0x0-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/"/>
    
      <category term="0x01 ä¸€èµ·æ¥å­¦Scala" scheme="https://deletee.github.io/categories/0x0-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/0x01-%E4%B8%80%E8%B5%B7%E6%9D%A5%E5%AD%A6Scala/"/>
    
    
      <category term="Scala" scheme="https://deletee.github.io/tags/Scala/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ä½¿ç”¨Hiveçª—å£å‡½æ•°</title>
    <link href="https://deletee.github.io/2019/01/20/how-to-use-window-func/"/>
    <id>https://deletee.github.io/2019/01/20/how-to-use-window-func/</id>
    <published>2019-01-20T13:48:30.000Z</published>
    <updated>2019-01-20T14:40:12.032Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;çª—å£å‡½æ•°å¸¸å¸¸ç”¨äºæˆ‘ä»¬ä¸šåŠ¡ä¸­çš„å¤æ‚è®¡ç®—ï¼Œæœ¬æ–‡ä»‹ç»Hiveä¸­å‡ ä¸ªå¸¸ç”¨çš„çª—å£å‡½æ•°ï¼Œå¹¶ç”¨æ¡ˆä¾‹è®²è¿°å¦‚ä½•ä½¿ç”¨ã€‚é‚£ä¹ˆæˆ‘ä»¬å¸¸ç”¨çš„çª—å£å‡½æ•°æœ‰å“ªäº›ï¼Ÿ</p><div class="table-container"><table><thead><tr><th>å‡½æ•°å</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>row_number</td><td>åˆ†ç»„å†…æ ¹æ®æ’åˆ—æ¡ä»¶ä»1å¼€å§‹çš„æ’åºï¼Œæ²¡æœ‰ç›¸åŒçš„åºå·</td></tr><tr><td>rank</td><td>åˆ†ç»„å†…æ ¹æ®æ’åˆ—æ¡ä»¶ä»1å¼€å§‹çš„æ’åºï¼Œæ’åç›¸ç­‰ä¼šåœ¨åæ¬¡ä¸­ç•™ä¸‹ç©ºä½ï¼Œä¾‹å¦‚ï¼š1ï¼Œ2ï¼Œ2ï¼Œ4</td></tr><tr><td>dense_rank</td><td>åˆ†ç»„å†…æ ¹æ®æ’åˆ—æ¡ä»¶ä»1å¼€å§‹çš„æ’åºï¼Œæ’åç›¸ç­‰ä¼šåœ¨åæ¬¡ä¸­ä¸ä¼šç•™ä¸‹ç©ºä½ï¼Œä¾‹å¦‚ï¼š1ï¼Œ2ï¼Œ2ï¼Œ3</td></tr><tr><td>lag</td><td>åˆ†ç»„å†…æ ¹æ®æ’åˆ—æ¡ä»¶å–å‰ç¬¬nä¸ªå€¼</td></tr><tr><td>lead</td><td>åˆ†ç»„å†…æ ¹æ®æ’åˆ—æ¡ä»¶å–åç¬¬nä¸ªå€¼ï¼Œä¸ lagç›¸å</td></tr><tr><td>first_value</td><td>åˆ†ç»„å†…æ ¹æ®æ’åˆ—æ¡ä»¶å»åˆ†ç»„ç¬¬ä¸€ä¸ªå€¼</td></tr><tr><td>last_value</td><td>åˆ†ç»„å†…æ ¹æ®æ’åˆ—æ¡ä»¶å»åˆ†ç»„æœ€åä¸€ä¸ªå€¼</td></tr><tr><td>min</td><td>åˆ†ç»„å†…å–æœ€å°å€¼</td></tr><tr><td>max</td><td>åˆ†ç»„å†…å–æœ€å¤§å€¼</td></tr><tr><td>sum</td><td>åˆ†ç»„å†…å–åˆ†ç»„å€¼çš„å’Œ</td></tr><tr><td>â€¦</td><td>â€¦</td></tr></tbody></table></div><a id="more"></a><p>PS: æ‰€æœ‰çš„çª—å£å‡½æ•°éƒ½å°†æ˜¯ç”Ÿæˆçš„ä¸€ä¸ªæ–°åˆ—ï¼Œå¹¶ä¸ä¼šå¯¹åŸæœ‰æ•°æ®åˆ—é€ æˆå½±å“</p><p>ä¸‹é¢å°†ä¸€ä¸€è¿™äº›å‡½æ•°çš„ä½¿ç”¨ã€‚</p><h4 id="0x0-row-number"><a href="#0x0-row-number" class="headerlink" title="0x0 row_number"></a>0x0 row_number</h4><p>row_number å¯ä»¥è¯´æ˜¯æœ€å¸¸ç”¨çš„ä¸€ä¸ªçª—å£å‡½æ•°ã€‚</p><p>ä¸¾ä¸ªæ —å­ã€ŒğŸŒ°ã€ï¼šæˆ‘ä»¬æœ‰ä¸€ç»„æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªç­çº§ä¸€å­¦æœŸ4æ¬¡æ•°å­¦æœˆè€ƒçš„æˆç»©è¡¨ <code>score</code></p><div class="table-container"><table><thead><tr><th>å­¦ç”ŸID(sid)</th><th>ç¬¬å‡ æ¬¡æœˆè€ƒï¼ˆexam_timeï¼‰</th><th>æˆç»©(score)</th></tr></thead><tbody><tr><td>s001</td><td>1</td><td>83</td></tr><tr><td>s001</td><td>2</td><td>87</td></tr><tr><td>s001</td><td>3</td><td>84</td></tr><tr><td>s001</td><td>4</td><td>89</td></tr><tr><td>s002</td><td>1</td><td>90</td></tr><tr><td>s002</td><td>2</td><td>75</td></tr><tr><td>s002</td><td>3</td><td>89</td></tr><tr><td>s002</td><td>4</td><td>82</td></tr></tbody></table></div><p><strong>é‚£ä¹ˆQuestionï¼šè¯·é—®æ¯ä¸ªå­¦ç”Ÿ4æ¬¡æœˆè€ƒæˆç»©ä¸­æœ€å¥½çš„ä¸€æ¬¡æ˜¯å“ªä¸€æ¬¡æœˆè€ƒï¼Ÿ</strong></p><p>æ­¤æ—¶ï¼Œmaxçš„æ‰‹æ³•æ˜¯ä¸èƒ½å¤Ÿä½¿ç”¨äº†ï¼Œå¦‚æœè§£å†³ä¸Šè¿°é—®é¢˜ï¼Ÿå®é™…ä¸Šæ˜¯å°†æ ¹æ®æ¯ä¸ªå­¦ç”Ÿè¿›è¡Œåˆ†ç»„ï¼Œå³æ¯ä¸ªå­¦ç”Ÿçš„4æ¬¡æœˆè€ƒä¸ºä¸€ç»„ï¼Œé‚£ä¹ˆè®¡ç®—è¿™ä¸ªåˆ†ç»„æˆç»©ä¸­çš„æœ€å¤§å€¼å³å¯</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">      <span class="keyword">sid</span></span><br><span class="line">     ,exam_time</span><br><span class="line">     ,score</span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">sid</span></span><br><span class="line">          ,exam_time</span><br><span class="line">          ,score</span><br><span class="line">          ,row_number() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> <span class="keyword">sid</span> <span class="keyword">order</span> <span class="keyword">by</span> score <span class="keyword">desc</span>) <span class="keyword">as</span> r_idx</span><br><span class="line">    <span class="keyword">from</span> score</span><br><span class="line">)t </span><br><span class="line"><span class="keyword">where</span> t.r_idx = <span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong></p><p>æˆ‘ä»¬ç§° row_number ä¸ºçª—å£å‡½æ•°ï¼Œoverä¸ºä»å¥ï¼Œçª—å£å‡½æ•°ä¸overé…åˆä½¿ç”¨</p><p>1ã€ä½¿ç”¨PARTITION BYè¯­å¥ï¼Œä½¿ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªåŸå§‹æ•°æ®ç±»å‹çš„åˆ—è¿›è¡Œåˆ†ç»„<br>2ã€ä½¿ç”¨ORDER BYè¯­å¥ï¼Œä½¿ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ•°æ®ç±»å‹çš„æ’åºåˆ— </p><p>åè¿‡æ¥over ä¸­è‹¥ä¸æŒ‡å®š partition by çš„æ•°æ®åˆ—ï¼Œé‚£ä¹ˆæ•´ä¸ªè¡¨ä½œä¸ºä¸€ä¸ªé»˜è®¤åˆ†ç»„ï¼ŒåŒç†ä¸æŒ‡å®š order by é‚£ä¹ˆé»˜è®¤å½“å‰é¡ºåºï¼Œ<strong>å¤§å®¶å…ˆåªéœ€äº†è§£è¿™ä¸¤ç‚¹ï¼Œç†Ÿç»ƒä¹‹åå¯ä»¥å­¦ä¹ ç¬¬ä¸‰ç‚¹</strong>ã€‚</p><p>3ã€ä½¿ç”¨çª—å£è§„èŒƒï¼Œçª—å£è§„èŒƒæ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š</p><p>(ROWS | RANGE) BETWEEN (UNBOUNDED | [num]) PRECEDING AND ([num] PRECEDING | CURRENT ROW | (UNBOUNDED | [num]) FOLLOWING)<br>(ROWS | RANGE) BETWEEN CURRENT ROW AND (CURRENT ROW | (UNBOUNDED | [num]) FOLLOWING)<br>(ROWS | RANGE) BETWEEN [num] FOLLOWING AND (UNBOUNDED | [num]) FOLLOWING</p><p>è¯¦ç»†å‚è€ƒæ–‡æ¡£ï¼š<a href="https://cwiki.apache.org/confluence/display/ASTERIXDB/Window+Functions" target="_blank" rel="noopener">Hiveå®˜æ–¹å‚è€ƒæ–‡æ¡£</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;çª—å£å‡½æ•°å¸¸å¸¸ç”¨äºæˆ‘ä»¬ä¸šåŠ¡ä¸­çš„å¤æ‚è®¡ç®—ï¼Œæœ¬æ–‡ä»‹ç»Hiveä¸­å‡ ä¸ªå¸¸ç”¨çš„çª—å£å‡½æ•°ï¼Œå¹¶ç”¨æ¡ˆä¾‹è®²è¿°å¦‚ä½•ä½¿ç”¨ã€‚é‚£ä¹ˆæˆ‘ä»¬å¸¸ç”¨çš„çª—å£å‡½æ•°æœ‰å“ªäº›ï¼Ÿ&lt;/p&gt;
&lt;div class=&quot;table-container&quot;&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‡½æ•°å&lt;/th&gt;
&lt;th&gt;å¤‡æ³¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;row_number&lt;/td&gt;
&lt;td&gt;åˆ†ç»„å†…æ ¹æ®æ’åˆ—æ¡ä»¶ä»1å¼€å§‹çš„æ’åºï¼Œæ²¡æœ‰ç›¸åŒçš„åºå·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;rank&lt;/td&gt;
&lt;td&gt;åˆ†ç»„å†…æ ¹æ®æ’åˆ—æ¡ä»¶ä»1å¼€å§‹çš„æ’åºï¼Œæ’åç›¸ç­‰ä¼šåœ¨åæ¬¡ä¸­ç•™ä¸‹ç©ºä½ï¼Œä¾‹å¦‚ï¼š1ï¼Œ2ï¼Œ2ï¼Œ4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;dense_rank&lt;/td&gt;
&lt;td&gt;åˆ†ç»„å†…æ ¹æ®æ’åˆ—æ¡ä»¶ä»1å¼€å§‹çš„æ’åºï¼Œæ’åç›¸ç­‰ä¼šåœ¨åæ¬¡ä¸­ä¸ä¼šç•™ä¸‹ç©ºä½ï¼Œä¾‹å¦‚ï¼š1ï¼Œ2ï¼Œ2ï¼Œ3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lag&lt;/td&gt;
&lt;td&gt;åˆ†ç»„å†…æ ¹æ®æ’åˆ—æ¡ä»¶å–å‰ç¬¬nä¸ªå€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lead&lt;/td&gt;
&lt;td&gt;åˆ†ç»„å†…æ ¹æ®æ’åˆ—æ¡ä»¶å–åç¬¬nä¸ªå€¼ï¼Œä¸ lagç›¸å&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;first_value&lt;/td&gt;
&lt;td&gt;åˆ†ç»„å†…æ ¹æ®æ’åˆ—æ¡ä»¶å»åˆ†ç»„ç¬¬ä¸€ä¸ªå€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;last_value&lt;/td&gt;
&lt;td&gt;åˆ†ç»„å†…æ ¹æ®æ’åˆ—æ¡ä»¶å»åˆ†ç»„æœ€åä¸€ä¸ªå€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;min&lt;/td&gt;
&lt;td&gt;åˆ†ç»„å†…å–æœ€å°å€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;max&lt;/td&gt;
&lt;td&gt;åˆ†ç»„å†…å–æœ€å¤§å€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sum&lt;/td&gt;
&lt;td&gt;åˆ†ç»„å†…å–åˆ†ç»„å€¼çš„å’Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;â€¦&lt;/td&gt;
&lt;td&gt;â€¦&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="0x2 æŠ€æœ¯å¹³å°" scheme="https://deletee.github.io/categories/0x2-%E6%8A%80%E6%9C%AF%E5%B9%B3%E5%8F%B0/"/>
    
      <category term="0x21 Hive" scheme="https://deletee.github.io/categories/0x2-%E6%8A%80%E6%9C%AF%E5%B9%B3%E5%8F%B0/0x21-Hive/"/>
    
    
      <category term="Hive" scheme="https://deletee.github.io/tags/Hive/"/>
    
      <category term="SQL" scheme="https://deletee.github.io/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>ftpä¸Šä¼ ç›®å½•çš„æ–¹æ³•</title>
    <link href="https://deletee.github.io/2019/01/16/ftp-upload-folder/"/>
    <id>https://deletee.github.io/2019/01/16/ftp-upload-folder/</id>
    <published>2019-01-16T12:41:30.000Z</published>
    <updated>2019-01-22T13:50:26.094Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¼—æ‰€å‘¨çŸ¥ï¼Œä½¿ç”¨ftpå‘½ä»¤æ˜¯ä¸èƒ½å¤Ÿç›´æ¥ä¸Šä¼ æ–‡ä»¶å¤¹çš„ï¼Œç„¶åå·¥ä½œä¸­æœ‰å¾ˆå¤šéœ€è¦ä¸Šä¼ ç›®å½•çš„åœºæ™¯ï¼Œé€šå¸¸å¤§å®¶æƒ³åˆ°çš„å°±æ˜¯å…ˆåˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç„¶åå†é€šè¿‡éå†çš„æ–¹å¼ä¸Šä¼ æ–‡ä»¶ï¼Œå…¶ä¸­æ¯”è¾ƒç¹ççš„æ˜¯ï¼Œftpé‡Œä¸æ”¯æŒï¼Œå¤šå±‚çº§ç›®å½•ç›´æ¥åˆ›å»ºï¼Œ<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deletee:$ mkdir -p $&#123;dir&#125;/$&#123;subdir&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·çš„æ–¹å¼ï¼Œåªèƒ½é€çº§åˆ›å»ºï¼Œå°†é€ æˆå¾ˆå¤šå·¥ä½œé‡ã€‚ä¸‹é¢å°†åˆ†äº«ä¸‹å¦‚ä½•å¿«é€Ÿæœ‰æ•ˆçš„å®ç°ä¸Šä¼ ftpæ–‡ä»¶å¤¹</p><a id="more"></a><h4 id="0x0-ç”Ÿæˆåˆ›å»ºå¤šçº§æ–‡ä»¶å¤¹å‘½ä»¤"><a href="#0x0-ç”Ÿæˆåˆ›å»ºå¤šçº§æ–‡ä»¶å¤¹å‘½ä»¤" class="headerlink" title="0x0 ç”Ÿæˆåˆ›å»ºå¤šçº§æ–‡ä»¶å¤¹å‘½ä»¤"></a>0x0 ç”Ÿæˆåˆ›å»ºå¤šçº§æ–‡ä»¶å¤¹å‘½ä»¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">export mkdir_cmds=`find $&#123;upload_folder&#125; -type d -printf '%P\n' \</span><br><span class="line">          |awk '&#123; \</span><br><span class="line">               split($0,a,"/");            \</span><br><span class="line">               for (i in a) &#123;              \</span><br><span class="line">                  cmds ="mkdir ";          \</span><br><span class="line">                  for (j=1;j&lt;=i;j++) &#123;     \</span><br><span class="line">                      cmds = cmds"/"a[j]   \</span><br><span class="line">                  &#125; print cmds             \</span><br><span class="line">              &#125;                            \</span><br><span class="line">          &#125;'                               \</span><br><span class="line">          |sort|uniq`</span><br></pre></td></tr></table></figure><p><strong>æ•ˆæœå¦‚ä¸‹ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">deletee@pig_house:~/logon_log/bin$ ls -lh</span><br><span class="line">total 48K</span><br><span class="line">-rwxr-xr-x 1 delete pig_house  324 Jan  9 14:59 clearftpfile.sh</span><br><span class="line">-rwxr-xr-x 1 delete pig_house 2.2K Jan 11 12:19 contact_send.sh</span><br><span class="line">-rwxr-xr-x 1 delete pig_house 5.7K Jan  9 14:59 handle_file_repair.sh</span><br><span class="line">-rwxr-xr-x 1 delete pig_house 7.9K Jan 10 10:29 handle_file.sh</span><br><span class="line">drwxr-xr-x 3 delete pig_house 4.0K Jan 14 15:59 logon</span><br><span class="line">-rwxr-xr-x 1 delete pig_house 2.2K Jan 11 12:18 mail_send.sh</span><br><span class="line">-rwxr-xr-x 1 delete pig_house 2.2K Jan 11 12:18 news_send.sh</span><br><span class="line">drwxr-xr-x 3 delete pig_house 4.0K Jan 11 12:19 reg</span><br><span class="line">-rwxr-xr-x 1 delete pig_house 1.4K Jan  9 14:59 repair_login.sh</span><br><span class="line">-rwxr-xr-x 1 delete pig_house 2.8K Jan 16 14:50 send_news.sh</span><br><span class="line"></span><br><span class="line">deletee@pig_house:~/logon_log/bin$ upload_folder="bin"</span><br><span class="line">deletee@pig_house:~/logon_log/bin$ find $&#123;upload_folder&#125; -type d -printf '%P\n' \</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">           |awk <span class="string">'&#123; \</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">                split(<span class="variable">$0</span>,a,<span class="string">"/"</span>);            \</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">                <span class="keyword">for</span> (i <span class="keyword">in</span> a) &#123;              \</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">                   cmds =<span class="string">"mkdir /<span class="variable">$&#123;upload_folder&#125;</span>"</span>;          \</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">                   <span class="keyword">for</span> (j=1;j&lt;=i;j++) &#123;     \</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">                       cmds = cmds<span class="string">"/"</span>a[j]   \</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">                   &#125; <span class="built_in">print</span> cmds             \</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">               &#125;                            \</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">           &#125;<span class="string">'                               \</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">           |sort|uniq</span></span><br><span class="line">mkdir /bin/logon</span><br><span class="line">mkdir /bin/logon/bak</span><br><span class="line">mkdir /bin/reg</span><br><span class="line">mkdir /bin/reg/bak</span><br></pre></td></tr></table></figure><h4 id="0x1-ç”Ÿæˆputæ–‡ä»¶å‘½ä»¤"><a href="#0x1-ç”Ÿæˆputæ–‡ä»¶å‘½ä»¤" class="headerlink" title="0x1 ç”Ÿæˆputæ–‡ä»¶å‘½ä»¤"></a>0x1 ç”Ÿæˆputæ–‡ä»¶å‘½ä»¤</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åŸç†ä¸åˆ›å»ºæ–‡ä»¶å¤¹å‘½ä»¤ç±»ä¼¼<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export put_cmds=`find $&#123;upload_folder&#125; -type f -printf 'put %p $&#123;ftp_target_folder&#125;/%P\n'`</span><br></pre></td></tr></table></figure></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">deletee@pig_house:upload_path='~/logon_log/bin'</span><br><span class="line">deletee@pig_house:upload_folder='bin'</span><br><span class="line">deletee@pig_house:ftp_target_path='/ftp'</span><br><span class="line"></span><br><span class="line">deletee@pig_house:find $&#123;upload_path&#125; -type f -printf 'put %p $&#123;ftp_target_path&#125;/%P\n'</span><br><span class="line">put ./bin/logon/bak/police-logon.jar.bak /ftp/bin/logon/bak/police-logon.jar.bak</span><br><span class="line">put ./bin/logon/bak/run.sh /ftp/bin/logon/bak/run.sh</span><br><span class="line">put ./bin/logon/bak/stop.sh /ftp/bin/logon/bak/stop.sh</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="0x2-ä¸€ä¸ªæ —å­"><a href="#0x2-ä¸€ä¸ªæ —å­" class="headerlink" title="0x2 ä¸€ä¸ªæ —å­"></a>0x2 ä¸€ä¸ªæ —å­</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">upload_path=$1        # å¾…ä¸Šä¼ ç›®å½•</span><br><span class="line">ftp_target_path=$2    # ftpç›®æ ‡ç›®å½•</span><br><span class="line"></span><br><span class="line">upload_folder=`basename $&#123;upload_path&#125;`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export mkdir_cmds=`find $&#123;upload_path&#125; -type d -printf '%P\n' \</span><br><span class="line">          |awk '&#123; \</span><br><span class="line">               split($0,a,"/");            \</span><br><span class="line">               for (i in a) &#123;              \</span><br><span class="line">                  cmds ="mkdir $&#123;upload_folder&#125;";          \</span><br><span class="line">                  for (j=1;j&lt;=i;j++) &#123;     \</span><br><span class="line">                      cmds = cmds"/"a[j]   \</span><br><span class="line">                  &#125; print cmds             \</span><br><span class="line">              &#125;                            \</span><br><span class="line">          &#125;'                               \</span><br><span class="line">          |sort|uniq`</span><br><span class="line"></span><br><span class="line">export put_cmds=`find $&#123;upload_path&#125; -type f -printf 'put %p $&#123;ftp_target_folder&#125;/%P\n'`</span><br><span class="line"></span><br><span class="line">ftp_host=</span><br><span class="line">ftp_port=</span><br><span class="line">ftp_username=</span><br><span class="line">ftp_password=</span><br><span class="line">ftp -i -n &lt;&lt; EOF</span><br><span class="line">open $ftp_host $ftp_port</span><br><span class="line">user $ftp_username $ftp_password</span><br><span class="line">bi</span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;mkdir_cmds&#125;</span></span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;put_cmds&#125;</span></span><br><span class="line">bye</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h4 id="0XF-æ€»ç»“"><a href="#0XF-æ€»ç»“" class="headerlink" title="0XF æ€»ç»“"></a>0XF æ€»ç»“</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åˆ©ç”¨ç”Ÿæˆftpå‘½ä»¤çš„æ–¹å¼ï¼Œé¿å…å¤šå±‚çº§åŠä¸å®šå±‚çº§ç›®å½•çš„åˆ›å»ºftpç›®å½•çš„ç¹çã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¤§å®¶è§‰å¾—æ€ä¹ˆæ ·ï¼Ÿæˆ–æ˜¯æœ‰æ›´å¥½çš„æ–¹æ³•ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ä¼—æ‰€å‘¨çŸ¥ï¼Œä½¿ç”¨ftpå‘½ä»¤æ˜¯ä¸èƒ½å¤Ÿç›´æ¥ä¸Šä¼ æ–‡ä»¶å¤¹çš„ï¼Œç„¶åå·¥ä½œä¸­æœ‰å¾ˆå¤šéœ€è¦ä¸Šä¼ ç›®å½•çš„åœºæ™¯ï¼Œé€šå¸¸å¤§å®¶æƒ³åˆ°çš„å°±æ˜¯å…ˆåˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç„¶åå†é€šè¿‡éå†çš„æ–¹å¼ä¸Šä¼ æ–‡ä»¶ï¼Œå…¶ä¸­æ¯”è¾ƒç¹ççš„æ˜¯ï¼Œftpé‡Œä¸æ”¯æŒï¼Œå¤šå±‚çº§ç›®å½•ç›´æ¥åˆ›å»ºï¼Œ&lt;br&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;deletee:$ mkdir -p $&amp;#123;dir&amp;#125;/$&amp;#123;subdir&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ ·çš„æ–¹å¼ï¼Œåªèƒ½é€çº§åˆ›å»ºï¼Œå°†é€ æˆå¾ˆå¤šå·¥ä½œé‡ã€‚ä¸‹é¢å°†åˆ†äº«ä¸‹å¦‚ä½•å¿«é€Ÿæœ‰æ•ˆçš„å®ç°ä¸Šä¼ ftpæ–‡ä»¶å¤¹&lt;/p&gt;
    
    </summary>
    
      <category term="0x0 å¼€å‘è¯­è¨€" scheme="https://deletee.github.io/categories/0x0-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/"/>
    
      <category term="0x00 ä¸€èµ·æ¥å­¦Shell" scheme="https://deletee.github.io/categories/0x0-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/0x00-%E4%B8%80%E8%B5%B7%E6%9D%A5%E5%AD%A6Shell/"/>
    
    
      <category term="shell" scheme="https://deletee.github.io/tags/shell/"/>
    
      <category term="awk" scheme="https://deletee.github.io/tags/awk/"/>
    
      <category term="ftp" scheme="https://deletee.github.io/tags/ftp/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€èµ·æ¥å­¦Scala(3)-å­—ç¬¦ä¸²</title>
    <link href="https://deletee.github.io/2019/01/10/scala-programing-string/"/>
    <id>https://deletee.github.io/2019/01/10/scala-programing-string/</id>
    <published>2019-01-10T15:30:50.000Z</published>
    <updated>2019-01-16T13:20:01.582Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸Šæ–‡ä¸­å·²ç»ä»‹ç»äº†Scalaè¯­è¨€ä¸­çš„åŸºæœ¬ç±»å‹ï¼Œæœ¬æ–‡ç€é‡ä»‹ç»ä¸‹å­—ç¬¦ä¸²çš„ç”¨æ³•ï¼Œå­—ç¬¦ä¸²åœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸ç”¨åˆ°ï¼Œå­—ç¬¦ä¸²åœ¨Scalaä¸­çš„ç±»å‹<code>String</code>ï¼Œé‚£ä¹ˆScalaä¸­çš„Stringå’ŒJavaä¸­çš„Stringæœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="string">"Scala"</span>.getClass.getName</span><br><span class="line">res0: <span class="type">String</span> = java.lang.<span class="type">String</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æœ¬ä»¥ä¸ºScalaæ˜¯æ€æ ·å®ç°äº†Stringï¼Œä¸Šè¿°ä»£ç ä¸­å‘Šè¯‰æˆ‘ä»¬Scalaä¸­çš„<code>String</code>ç«Ÿå°±æ˜¯Javaä¸­çš„<code>String</code>ã€‚æˆ‘ä»¬æ¥ä¸‹æ›´æ·±å±‚æ¬¡çš„å­¦ä¹ <code>String</code>ã€‚<br><img src="/images/a311e33c02d299ee621f10649459ac73.png" alt="a311e33c02d299ee621f10649459ac73"><br><a id="more"></a></p><h4 id="0x0-åŸºæœ¬ç”¨æ³•"><a href="#0x0-åŸºæœ¬ç”¨æ³•" class="headerlink" title="0x0 åŸºæœ¬ç”¨æ³•"></a>0x0 åŸºæœ¬ç”¨æ³•</h4><h5 id="0x00-é•¿åº¦-length"><a href="#0x00-é•¿åº¦-length" class="headerlink" title="0x00 é•¿åº¦ .length"></a>0x00 é•¿åº¦ .length</h5><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> str = <span class="string">"Scala"</span></span><br><span class="line">str: <span class="type">String</span> = <span class="type">Scala</span></span><br><span class="line"></span><br><span class="line">scala&gt; str.length</span><br><span class="line">res3: <span class="type">Int</span> = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;é€šè¿‡ .lengthçš„æ–¹å¼å¯è·å–å˜é‡strçš„é•¿åº¦</p><h5 id="0x01-éå†"><a href="#0x01-éå†" class="headerlink" title="0x01 éå†"></a>0x01 éå†</h5><p><strong>ç¬¬ä¸€ç§æ–¹å¼:</strong> é€šè¿‡éå†å­—ç¬¦ä¸²çš„æ¯ä¸€ä¸ªå­—ç¬¦</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">for</span>(c &lt;- str) &#123; println(c) &#125;</span><br><span class="line"><span class="type">S</span></span><br><span class="line">c</span><br><span class="line">a</span><br><span class="line">l</span><br><span class="line">a</span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p><strong>ç¬¬äºŒç§æ–¹å¼:</strong> é€šè¿‡è°ƒç”¨.foreachæ–¹æ³•ï¼Œå…¥å‚ printlnå‡½æ•°å®ç°</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; str.foreach(println)</span><br><span class="line"><span class="type">S</span></span><br><span class="line">c</span><br><span class="line">a</span><br><span class="line">l</span><br><span class="line">a</span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p><strong>ç¬¬ä¸‰ç§æ–¹å¼:</strong> é€šè¿‡è°ƒç”¨.mapæ–¹æ³•ï¼Œå…¥å‚ printlnå‡½æ•°å®ç°</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; str.map(println)</span><br><span class="line"><span class="type">S</span></span><br><span class="line">c</span><br><span class="line">a</span><br><span class="line">l</span><br><span class="line">a</span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><h5 id="0x02-è¿‡æ»¤-filter"><a href="#0x02-è¿‡æ»¤-filter" class="headerlink" title="0x02 è¿‡æ»¤ .filter"></a>0x02 è¿‡æ»¤ .filter</h5><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; str.filter(_ != 'a')</span><br><span class="line">res10: <span class="type">String</span> = <span class="type">Scl</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><h5 id="0x03-Bytesæ•°ç»„-getBytes"><a href="#0x03-Bytesæ•°ç»„-getBytes" class="headerlink" title="0x03 Bytesæ•°ç»„ .getBytes"></a>0x03 Bytesæ•°ç»„ .getBytes</h5><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; str.getBytes</span><br><span class="line">res11: <span class="type">Array</span>[<span class="type">Byte</span>] = <span class="type">Array</span>(<span class="number">83</span>, <span class="number">99</span>, <span class="number">97</span>, <span class="number">108</span>, <span class="number">97</span>)</span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p>0x0F å°ç»“</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>String</code>æœ‰å¾ˆå¤šçš„æ–¹æ³•ï¼Œä¾‹å¦‚ <code>.drop(n)</code> åˆ é™¤å‰é¢nä¸ªå­—ç¬¦,<code>.take(n)</code>å–å‰nä¸ªå­—ç¬¦ï¼Œ<code>.captitalize</code> å°†å­—ç¬¦ä¸²è½¬ä¸ºå¤§å†™(ä¸ .toUpperCase åŠŸèƒ½ç­‰åŒ)ç­‰ç­‰ã€‚</p><h4 id="0x1-å­—ç¬¦ä¸²ç›¸ç­‰æ€§"><a href="#0x1-å­—ç¬¦ä¸²ç›¸ç­‰æ€§" class="headerlink" title="0x1 å­—ç¬¦ä¸²ç›¸ç­‰æ€§"></a>0x1 å­—ç¬¦ä¸²ç›¸ç­‰æ€§</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦‚ä½•æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> str1 = <span class="string">"Scala"</span></span><br><span class="line">str1: <span class="type">String</span> = <span class="type">Scala</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> str2 = <span class="string">"S"</span> + <span class="string">"cala"</span></span><br><span class="line">str2: <span class="type">String</span> = <span class="type">Scala</span></span><br><span class="line"></span><br><span class="line">scala&gt; str1 == str2</span><br><span class="line">res12: <span class="type">Boolean</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦‚ä¸Šï¼Œä¸¤ä¸ªå­—ç¬¦ä¸²å†…å®¹æ˜¯ç›¸ç­‰çš„,é€šè¿‡<code>==</code> å¯åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Œè¿™ä¸Javaä¸­ä½¿ç”¨equalçš„æ–¹æ³•æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡ä¸åŒã€‚åœ¨Javaä¸­éœ€è¦å…ˆåˆ¤æ–­è°ƒç”¨çš„å¯¹è±¡æ˜¯å¦ä¸ºnullï¼Œå³åœ¨AnyRefç±»ä½¿ç”¨æ—¶ï¼ŒScalaä¹Ÿä¼šåˆ¤æ–­è°ƒç”¨æ˜¯å¦æ˜¯nullï¼Œå…¶ä»–æƒ…å†µä¸‹æ˜¯ä¸éœ€è¦åˆ¤æ–­å˜é‡æ˜¯å¦ä¸ºnullã€‚å®é™…ä¸Šåœ¨Scalaå¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸æ¨èå®šä¹‰nullï¼Œ</p><h4 id="0x2-åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²"><a href="#0x2-åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²" class="headerlink" title="0x2 åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²"></a>0x2 åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¿™ä¸€ç‚¹ä¸Pythonç±»ä¼¼ï¼Œå¯ä»¥é€šè¿‡ä¸‰ä¸ªåŒå¼•å·æ¥å®šä¹‰ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> multi_line_str = <span class="string">""</span><span class="string">"Hello,</span></span><br><span class="line"><span class="string">     |                         I love Scala"</span><span class="string">""</span></span><br><span class="line">multi_line_str: <span class="type">String</span> =</span><br><span class="line"><span class="type">Hello</span>,</span><br><span class="line">                        <span class="type">I</span> love <span class="type">Scala</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºç¬¬äºŒè¡Œæ˜¯ä¸€è¿ä¸²çš„ç©ºæ ¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç®¡é“çš„æ–¹å¼ï¼Œä¸Pythonç±»ä¼¼</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> multi_line_str = <span class="string">""</span><span class="string">"Hello,</span></span><br><span class="line"><span class="string">     | I love Scala</span></span><br><span class="line"><span class="string">     | "</span><span class="string">""</span></span><br><span class="line">multi_line_str: <span class="type">String</span> =</span><br><span class="line"><span class="string">"Hello,</span></span><br><span class="line"><span class="string">I love Scala</span></span><br><span class="line"><span class="string">"</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> multi_line_str = <span class="string">""</span><span class="string">"Hello,</span></span><br><span class="line"><span class="string">     | I love Scala</span></span><br><span class="line"><span class="string">     | "</span><span class="string">""</span>.stripMargin</span><br><span class="line">multi_line_str: <span class="type">String</span> =</span><br><span class="line"><span class="string">"Hello,</span></span><br><span class="line"><span class="string">I love Scala</span></span><br><span class="line"><span class="string">"</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸å–œæ¬¢ä½¿ç”¨ç®¡é“ <code>|</code>å¯ä»¥ä½¿ç”¨å…¶ä»–ç¬¦å·è¡¨ç¤ºï¼Œä¾‹å¦‚:</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> multi_line_str = <span class="string">""</span><span class="string">"Hello,</span></span><br><span class="line"><span class="string">     @ I love Scala</span></span><br><span class="line"><span class="string">     @ "</span><span class="string">""</span>.stripMargin('@')</span><br><span class="line">multi_line_str: <span class="type">String</span> =</span><br><span class="line"><span class="string">"Hello,</span></span><br><span class="line"><span class="string">I love Scala</span></span><br><span class="line"><span class="string">"</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><h4 id="0x3-å˜é‡ä»£æ¢"><a href="#0x3-å˜é‡ä»£æ¢" class="headerlink" title="0x3 å˜é‡ä»£æ¢"></a>0x3 å˜é‡ä»£æ¢</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ç±»ä¼¼äºPythonä¸€æ ·ï¼Œä½¿ç”¨å˜é‡çš„å€¼ä»£æ¢è¿›å¦ä¸€ä¸ªå­—ç¬¦ä¸²</p><h5 id="0x30-sæ˜¯ä¸€ä¸ªæ–¹æ³•"><a href="#0x30-sæ˜¯ä¸€ä¸ªæ–¹æ³•" class="headerlink" title="0x30 sæ˜¯ä¸€ä¸ªæ–¹æ³•"></a>0x30 sæ˜¯ä¸€ä¸ªæ–¹æ³•</h5><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> name = <span class="string">"deleee"</span></span><br><span class="line">name: <span class="type">String</span> = deleee</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> setence = <span class="string">s"My name is <span class="subst">$name</span>"</span></span><br><span class="line">setence: <span class="type">String</span> = <span class="type">My</span> name is deleee</span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ•´å½¢å˜é‡å¯ä»¥åšè®¡ç®—ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">var</span> age = <span class="number">2</span></span><br><span class="line">age: <span class="type">Int</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> setence1 = <span class="string">s"My age is <span class="subst">$&#123;age + 1&#125;</span>"</span></span><br><span class="line">setence1: <span class="type">String</span> = <span class="type">My</span> age is <span class="number">3</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><h5 id="0x31-å­—ç¬¦ä¸²å·®å€¼-printf"><a href="#0x31-å­—ç¬¦ä¸²å·®å€¼-printf" class="headerlink" title="0x31 å­—ç¬¦ä¸²å·®å€¼(printf)"></a>0x31 å­—ç¬¦ä¸²å·®å€¼(printf)</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å³æˆ‘ä»¬å¸¸åœ¨Cè¯­è¨€æˆ–è€…Pythonä¸­çš„æ•°å€¼æ ¼å¼åŒ–ï¼Œéœ€è¦åœ¨å­—ç¬¦ä¸²å‰ä½¿ç”¨<code>f</code>æ ‡è¯†</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> setence2 = <span class="string">f"My age is <span class="subst">$&#123;age + 1&#125;</span>%.2f"</span></span><br><span class="line">setence2: <span class="type">String</span> = <span class="type">My</span> age is <span class="number">3.00</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p><code>%.2f</code>è¡¨ç¤ºå°†æ•°å€¼è¿›è¡Œå°æ•°ç‚¹å2ä½ç²¾åº¦</p><div class="table-container"><table><thead><tr><th>æ ¼å¼åŒ–ç¬¦å·</th><th>æè¿°</th></tr></thead><tbody><tr><td>%c</td><td>å­—ç¬¦</td></tr><tr><td>%d</td><td>æ•´æ•° ä¸ %i ç›¸åŒ</td></tr><tr><td>%e</td><td>æŒ‡æ•°æµ®ç‚¹å‹</td></tr><tr><td>%f</td><td>æµ®ç‚¹å‹</td></tr><tr><td>%i</td><td>æ•´æ•°</td></tr><tr><td>%o</td><td>å…«è¿›åˆ¶</td></tr><tr><td>%s</td><td>å­—ç¬¦ä¸²</td></tr><tr><td>%u</td><td>æ— ç¬¦å·æ•´å½¢</td></tr><tr><td>%x</td><td>åå…­è¿›åˆ¶</td></tr><tr><td>%% æˆ–è€… \%</td><td>è¾“å‡ºä¸€ä¸ªç™¾åˆ†å·</td></tr></tbody></table></div><h4 id="0x4-æ­£åˆ™è¡¨è¾¾å¼"><a href="#0x4-æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="0x4 æ­£åˆ™è¡¨è¾¾å¼"></a>0x4 æ­£åˆ™è¡¨è¾¾å¼</h4><h5 id="0x40-åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼"><a href="#0x40-åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="0x40 åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼"></a>0x40 åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨å­—ç¬¦ä¸²æœ«å°¾ä½¿ç”¨<code>.r</code>å³è¡¨ç¤ºåˆ›å»ºçš„ä¸ºä¸€ä¸ªRegexå¯¹è±¡ï¼Œéšåå¯ä»¥ç”¨<code>.findFirstIn</code>åŒ¹é…ç¬¬ä¸€ä¸ªï¼Œ<code>.findAllIn</code>æ¥åŒ¹é…æ‰€æœ‰çš„ã€‚</p><p><strong>ä¾‹å¦‚:</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">var</span> numPatten = <span class="string">"[0-9]+"</span>.r</span><br><span class="line">numPatten: scala.util.matching.<span class="type">Regex</span> = [<span class="number">0</span><span class="number">-9</span>]+</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> str = <span class="string">"123 is not 321"</span></span><br><span class="line">str: <span class="type">String</span> = <span class="number">123</span> is not <span class="number">321</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> match1 = numPatten.findFirstIn(str)</span><br><span class="line">match1: <span class="type">Option</span>[<span class="type">String</span>] = <span class="type">Some</span>(<span class="number">123</span>)</span><br><span class="line"></span><br><span class="line">scala&gt; numPatten.findAllIn(str).foreach(println)</span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="number">321</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p><strong>æˆ–è€…ï¼š</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> scala.util.matching.<span class="type">Regex</span></span><br><span class="line"><span class="keyword">import</span> scala.util.matching.<span class="type">Regex</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> pattern = <span class="keyword">new</span> <span class="type">Regex</span>(<span class="string">"(S|s)cala"</span>)</span><br><span class="line">pattern: scala.util.matching.<span class="type">Regex</span> = (<span class="type">S</span>|s)cala</span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p><strong>PS:å…³æ³¨ä¸‹è¿”å›ç±»å‹</strong></p><p>ï¼ˆ1ï¼‰<code>.findFirstIn</code> è¿”å›çš„ä¸€ä¸ªæ˜¯Someç±»å‹çš„å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„è®¤ä¸ºSomeæ˜¯ä¸€ä¸ªå®¹å™¨ï¼ŒåŒ¹é…æˆåŠŸåˆ™è¿”å›æ•°å­—ï¼ŒåŒ¹é…ä¸æˆåŠŸå°±è¿”å›None</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">var</span> numPatten = <span class="string">"[0-9]+"</span>.r</span><br><span class="line">numPatten: scala.util.matching.<span class="type">Regex</span> = [<span class="number">0</span><span class="number">-9</span>]+</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> str = <span class="string">"not number"</span></span><br><span class="line">str: <span class="type">String</span> = not number</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> match1 = numPatten.findFirstIn(str)</span><br><span class="line">match1: <span class="type">Option</span>[<span class="type">String</span>] = <span class="type">None</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰<code>.findAllIn</code>è¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¯ä½¿ç”¨foreachæ–¹æ³•è¿›è¡Œéå†ï¼Œä¹Ÿå¯ä»¥å°†è¿­ä»£å™¨è½¬ä¸ºæ•°ç»„,ä¾‹å¦‚:</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">var</span> matchArr = numPatten.findAllIn(str).toArray</span><br><span class="line">matchArr: <span class="type">Array</span>[<span class="type">String</span>] = <span class="type">Array</span>(<span class="number">123</span>, <span class="number">321</span>)</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">for</span> ( a &lt;- matchArr) println(a)</span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="number">321</span></span><br><span class="line"></span><br><span class="line">scala&gt; matchArr.foreach(println)</span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="number">321</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><h5 id="0x41-å­—ç¬¦ä¸²æ›¿æ¢"><a href="#0x41-å­—ç¬¦ä¸²æ›¿æ¢" class="headerlink" title="0x41 å­—ç¬¦ä¸²æ›¿æ¢"></a>0x41 å­—ç¬¦ä¸²æ›¿æ¢</h5><p>å¸¸è§„çš„æ›¿æ¢æ‰‹æ³•å­—ç¬¦ä¸²è°ƒç”¨æ–¹æ³•<code>.replaceAll</code></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> str = <span class="string">"123 is not 321"</span></span><br><span class="line">str: <span class="type">String</span> = <span class="number">123</span> is not <span class="number">321</span></span><br><span class="line"></span><br><span class="line">scala&gt; str.replaceAll(<span class="string">"[1-9]+"</span>,<span class="string">"sss"</span>)</span><br><span class="line">res12: <span class="type">String</span> = sss is not sss</span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºå¯¹è±¡è°ƒç”¨æ–¹æ³• <code>.replaceAllIn</code>åŠ<code>.replaceFirstIn</code></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">var</span> numPatten = <span class="string">"[0-9]+"</span>.r</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> str = <span class="string">"123 is not 321"</span></span><br><span class="line">str: <span class="type">String</span> = <span class="number">123</span> is not <span class="number">321</span></span><br><span class="line"></span><br><span class="line">scala&gt; numPatten.replaceAllIn(str,<span class="string">"sss"</span>)</span><br><span class="line">res13: <span class="type">String</span> = sss is not sss</span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><h5 id="0x42-å­—ç¬¦ä¸²æŠ½å–"><a href="#0x42-å­—ç¬¦ä¸²æŠ½å–" class="headerlink" title="0x42 å­—ç¬¦ä¸²æŠ½å–"></a>0x42 å­—ç¬¦ä¸²æŠ½å–</h5><p>æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨() è¡¨ç¤º åŒ¹é…çš„ç»„ï¼Œä¸å…¶ä»–ï¼ˆPerlã€Pythonè¡¨è¾¾å¼ç›¸åŒï¼‰</p><p><strong>ä¾‹å¦‚ï¼š</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> scala.util.matching.<span class="type">Regex</span></span><br><span class="line"><span class="keyword">import</span> scala.util.matching.<span class="type">Regex</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> numberPattern: <span class="type">Regex</span> = <span class="string">"[0-9]"</span>.r</span><br><span class="line">numberPattern: scala.util.matching.<span class="type">Regex</span> = [<span class="number">0</span><span class="number">-9</span>]</span><br><span class="line"></span><br><span class="line">scala&gt; numberPattern.findFirstMatchIn(<span class="string">"awesomepassword"</span>) <span class="keyword">match</span> &#123;</span><br><span class="line">     |   <span class="keyword">case</span> <span class="type">Some</span>(_) =&gt; println(<span class="string">"Password OK"</span>)</span><br><span class="line">     |   <span class="keyword">case</span> <span class="type">None</span> =&gt; println(<span class="string">"Password must contain a number"</span>)</span><br><span class="line">     | &#125;</span><br><span class="line"><span class="type">Password</span> must contain a number</span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">scala&gt;<span class="keyword">import</span> scala.util.matching.<span class="type">Regex</span></span><br><span class="line">scala&gt;<span class="keyword">val</span> keyValPattern: <span class="type">Regex</span> = <span class="string">"([0-9a-zA-Z-#() ]+): ([0-9a-zA-Z-#() ]+)"</span>.r</span><br><span class="line">scala&gt;<span class="keyword">val</span> input: <span class="type">String</span> =</span><br><span class="line">    <span class="string">""</span><span class="string">"background-color: #A03300;</span></span><br><span class="line"><span class="string">     |background-image: url(img/header100.png);</span></span><br><span class="line"><span class="string">     |background-position: top center;</span></span><br><span class="line"><span class="string">     |background-repeat: repeat-x;</span></span><br><span class="line"><span class="string">     |background-size: 2160px 108px;</span></span><br><span class="line"><span class="string">     |margin: 0;</span></span><br><span class="line"><span class="string">     |height: 108px;</span></span><br><span class="line"><span class="string">     |width: 100%;"</span><span class="string">""</span>.stripMargin</span><br><span class="line">scala&gt;<span class="keyword">for</span> (patternMatch &lt;- keyValPattern.findAllMatchIn(input))</span><br><span class="line">     | println(<span class="string">s"key: <span class="subst">$&#123;patternMatch.group(1)&#125;</span> value: <span class="subst">$&#123;patternMatch.group(2)&#125;</span>"</span>)</span><br><span class="line"></span><br><span class="line">key: background-color value: #<span class="type">A03300</span></span><br><span class="line">key: background-image value: url(img</span><br><span class="line">key: background-position value: top center</span><br><span class="line">key: background-repeat value: repeat-x</span><br><span class="line">key: background-size value: <span class="number">2160</span>px <span class="number">108</span>px</span><br><span class="line">key: margin value: <span class="number">0</span></span><br><span class="line">key: height value: <span class="number">108</span>px</span><br><span class="line">key: width value: <span class="number">100</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p>æ›´å¤šæ›´è¯¦ç»†çš„å†…å®¹è¯·å‚è€ƒ<a href="https://blog.csdn.net/smile_from_2015/article/details/80337535" target="_blank" rel="noopener">Scalaä¹‹æ—…-æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼å’Œæå–å™¨å¯¹è±¡ï¼ˆEXTRACTOR OBJECTSï¼‰</a></p><h5 id="0x4E-æ­£åˆ™è¡¨è¾¾å¼"><a href="#0x4E-æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="0x4E æ­£åˆ™è¡¨è¾¾å¼"></a>0x4E æ­£åˆ™è¡¨è¾¾å¼</h5><p>Scala çš„æ­£åˆ™è¡¨è¾¾å¼ç»§æ‰¿äº† Java çš„è¯­æ³•è§„åˆ™ï¼ŒJava åˆ™å¤§éƒ¨åˆ†ä½¿ç”¨äº† Perl è¯­è¨€çš„è§„åˆ™ã€‚</p><p>ä¸‹è¡¨æˆ‘ä»¬ç»™å‡ºäº†å¸¸ç”¨çš„ä¸€äº›æ­£åˆ™è¡¨è¾¾å¼è§„åˆ™ï¼š</p><div class="table-container"><table><thead><tr><th>è¡¨è¾¾å¼</th><th>åŒ¹é…è§„åˆ™</th></tr></thead><tbody><tr><td>^</td><td>åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²å¼€å§‹çš„ä½ç½®ã€‚</td></tr><tr><td>$</td><td>åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²ç»“å°¾çš„ä½ç½®ã€‚</td></tr><tr><td>.</td><td>åŒ¹é…é™¤â€\r\nâ€ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚</td></tr><tr><td>[â€¦]</td><td>å­—ç¬¦é›†ã€‚åŒ¹é…åŒ…å«çš„ä»»ä¸€å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€[abc]â€åŒ¹é…â€plainâ€ä¸­çš„â€aâ€ã€‚</td></tr><tr><td><sup><a href="#fn_..." id="reffn_...">...</a></sup></td><td>åå‘å­—ç¬¦é›†ã€‚åŒ¹é…æœªåŒ…å«çš„ä»»ä½•å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€<sup><a href="#fn_abc" id="reffn_abc">abc</a></sup>â€œåŒ¹é…â€plainâ€ä¸­â€pâ€ï¼Œâ€lâ€ï¼Œâ€iâ€ï¼Œâ€nâ€ã€‚</td></tr><tr><td>\\A</td><td>åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²å¼€å§‹çš„ä½ç½®ï¼ˆæ— å¤šè¡Œæ”¯æŒï¼‰</td></tr><tr><td>\\z</td><td>å­—ç¬¦ä¸²ç»“å°¾(ç±»ä¼¼$ï¼Œä½†ä¸å—å¤„ç†å¤šè¡Œé€‰é¡¹çš„å½±å“)</td></tr><tr><td>\\Z</td><td>å­—ç¬¦ä¸²ç»“å°¾æˆ–è¡Œå°¾(ä¸å—å¤„ç†å¤šè¡Œé€‰é¡¹çš„å½±å“)</td></tr><tr><td>re*</td><td>é‡å¤é›¶æ¬¡æˆ–æ›´å¤šæ¬¡</td></tr><tr><td>re+</td><td>é‡å¤ä¸€æ¬¡æˆ–æ›´å¤šæ¬¡</td></tr><tr><td>re?</td><td>é‡å¤é›¶æ¬¡æˆ–ä¸€æ¬¡</td></tr><tr><td>re{ n}</td><td>é‡å¤næ¬¡</td></tr><tr><td>re{ n,}</td><td></td></tr><tr><td>re{ n, m}</td><td>é‡å¤nåˆ°mæ¬¡</td></tr><tr><td>a\</td><td>b</td><td>åŒ¹é… a æˆ–è€… b</td></tr><tr><td>(re)</td><td>åŒ¹é… re,å¹¶æ•è·æ–‡æœ¬åˆ°è‡ªåŠ¨å‘½åçš„ç»„é‡Œ</td></tr><tr><td>(?: re)</td><td>åŒ¹é… re,ä¸æ•è·åŒ¹é…çš„æ–‡æœ¬ï¼Œä¹Ÿä¸ç»™æ­¤åˆ†ç»„åˆ†é…ç»„å·</td></tr><tr><td>(?&gt; re)</td><td>è´ªå©ªå­è¡¨è¾¾å¼</td></tr><tr><td>\\w</td><td>åŒ¹é…å­—æ¯æˆ–æ•°å­—æˆ–ä¸‹åˆ’çº¿æˆ–æ±‰å­—</td></tr><tr><td>\\W</td><td>åŒ¹é…ä»»æ„ä¸æ˜¯å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ï¼Œæ±‰å­—çš„å­—ç¬¦</td></tr><tr><td>\\s</td><td>åŒ¹é…ä»»æ„çš„ç©ºç™½ç¬¦,ç›¸ç­‰äº [\t\n\r\f]</td></tr><tr><td>\\S</td><td>åŒ¹é…ä»»æ„ä¸æ˜¯ç©ºç™½ç¬¦çš„å­—ç¬¦</td></tr><tr><td>\\d</td><td>åŒ¹é…æ•°å­—ï¼Œç±»ä¼¼ [0-9]</td></tr><tr><td>\\D</td><td>åŒ¹é…ä»»æ„éæ•°å­—çš„å­—ç¬¦</td></tr><tr><td>\\G</td><td>å½“å‰æœç´¢çš„å¼€å¤´</td></tr><tr><td>\\n</td><td>æ¢è¡Œç¬¦</td></tr><tr><td>\\b</td><td>é€šå¸¸æ˜¯å•è¯åˆ†ç•Œä½ç½®ï¼Œä½†å¦‚æœåœ¨å­—ç¬¦ç±»é‡Œä½¿ç”¨ä»£è¡¨é€€æ ¼</td></tr><tr><td>\\B</td><td>åŒ¹é…ä¸æ˜¯å•è¯å¼€å¤´æˆ–ç»“æŸçš„ä½ç½®</td></tr><tr><td>\\t</td><td>åˆ¶è¡¨ç¬¦</td></tr><tr><td>\\Q</td><td>å¼€å§‹å¼•å·ï¼š<strong>\Q(a+b)*3\E</strong> å¯åŒ¹é…æ–‡æœ¬ â€œ(a+b)*3â€ã€‚</td></tr><tr><td>\\E</td><td>ç»“æŸå¼•å·ï¼š<strong>\Q(a+b)*3\E</strong> å¯åŒ¹é…æ–‡æœ¬ â€œ(a+b)*3â€ã€‚</td></tr></tbody></table></div><h5 id="0x4F-æ­£åˆ™è¡¨è¾¾å¼å®ä¾‹"><a href="#0x4F-æ­£åˆ™è¡¨è¾¾å¼å®ä¾‹" class="headerlink" title="0x4F æ­£åˆ™è¡¨è¾¾å¼å®ä¾‹"></a>0x4F æ­£åˆ™è¡¨è¾¾å¼å®ä¾‹</h5><div class="table-container"><table><thead><tr><th>å®ä¾‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>.</td><td>åŒ¹é…é™¤â€\r\nâ€ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚</td></tr><tr><td>[Rr]uby</td><td>åŒ¹é… â€œRubyâ€ æˆ– â€œrubyâ€</td></tr><tr><td>rub[ye]</td><td>åŒ¹é… â€œrubyâ€ æˆ– â€œrubeâ€</td></tr><tr><td>[aeiou]</td><td>åŒ¹é…å°å†™å­—æ¯ ï¼šaeiou</td></tr><tr><td>[0-9]</td><td>åŒ¹é…ä»»ä½•æ•°å­—ï¼Œç±»ä¼¼ [0123456789]</td></tr><tr><td>[a-z]</td><td>åŒ¹é…ä»»ä½• ASCII å°å†™å­—æ¯</td></tr><tr><td>[A-Z]</td><td>åŒ¹é…ä»»ä½• ASCII å¤§å†™å­—æ¯</td></tr><tr><td>[a-zA-Z0-9]</td><td>åŒ¹é…æ•°å­—ï¼Œå¤§å°å†™å­—æ¯</td></tr><tr><td><sup><a href="#fn_aeiou" id="reffn_aeiou">aeiou</a></sup></td><td>åŒ¹é…é™¤äº† aeiou å…¶ä»–å­—ç¬¦</td></tr><tr><td><sup><a href="#fn_0-9" id="reffn_0-9">0-9</a></sup></td><td>åŒ¹é…é™¤äº†æ•°å­—çš„å…¶ä»–å­—ç¬¦</td></tr><tr><td>\\d</td><td>åŒ¹é…æ•°å­—ï¼Œç±»ä¼¼: [0-9]</td></tr><tr><td>\\D</td><td>åŒ¹é…éæ•°å­—ï¼Œç±»ä¼¼: <sup><a href="#fn_0-9" id="reffn_0-9">0-9</a></sup></td></tr><tr><td>\\s</td><td>åŒ¹é…ç©ºæ ¼ï¼Œç±»ä¼¼: [ \t\r\n\f]</td></tr><tr><td>\\S</td><td>åŒ¹é…éç©ºæ ¼ï¼Œç±»ä¼¼: <sup><a href="#fn_ \t\r\n\f" id="reffn_ \t\r\n\f"> \t\r\n\f</a></sup></td></tr><tr><td>\\w</td><td>åŒ¹é…å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ï¼Œç±»ä¼¼: [A-Za-z0-9_]</td></tr><tr><td>\\W</td><td>åŒ¹é…éå­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ï¼Œç±»ä¼¼: <sup><a href="#fn_A-Za-z0-9_" id="reffn_A-Za-z0-9_">A-Za-z0-9_</a></sup></td></tr><tr><td>ruby?</td><td>åŒ¹é… â€œrubâ€ æˆ– â€œrubyâ€: y æ˜¯å¯é€‰çš„</td></tr><tr><td>ruby*</td><td>åŒ¹é… â€œrubâ€ åŠ ä¸Š 0 ä¸ªæˆ–å¤šä¸ªçš„ yã€‚</td></tr><tr><td>ruby+</td><td>åŒ¹é… â€œrubâ€ åŠ ä¸Š 1 ä¸ªæˆ–å¤šä¸ªçš„ yã€‚</td></tr><tr><td>\\d{3}</td><td>åˆšå¥½åŒ¹é… 3 ä¸ªæ•°å­—ã€‚</td></tr><tr><td>\\d{3,}</td><td>åŒ¹é… 3 ä¸ªæˆ–å¤šä¸ªæ•°å­—ã€‚</td></tr><tr><td>\\d{3,5}</td><td>åŒ¹é… 3 ä¸ªã€4 ä¸ªæˆ– 5 ä¸ªæ•°å­—ã€‚</td></tr><tr><td>\\D\\d+</td><td>æ— åˆ†ç»„ï¼š + é‡å¤ \d</td></tr><tr><td>(\\D\\d)+/</td><td>åˆ†ç»„ï¼š + é‡å¤ \D\d å¯¹</td></tr><tr><td>([Rr]uby(, )?)+</td><td>åŒ¹é… â€œRubyâ€ã€â€Ruby, ruby, rubyâ€ï¼Œç­‰ç­‰</td></tr></tbody></table></div><h4 id="0x5-è‡ªå®šä¹‰æ–¹æ³•"><a href="#0x5-è‡ªå®šä¹‰æ–¹æ³•" class="headerlink" title="0x5 è‡ªå®šä¹‰æ–¹æ³•"></a>0x5 è‡ªå®šä¹‰æ–¹æ³•</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨Javaä¸­é€šå¸¸æˆ‘ä»¬æ˜¯å»ºç«‹ç±»ä¼¼StringUtilsè¿™ç§çš„é€šç”¨ç±»åº“ï¼Œæƒ³è¦åœ¨Stringç±»ä¸­å¢åŠ ä¸€äº›è‡ªå®šä¹‰çš„æ–¹æ³•è¦æ€ä¹ˆåšï¼ŸJavaä¸­æ˜¯æ— æ³•åŠåˆ°çš„ï¼Œåœ¨Scala 2.1.0ä¸­å¯ä»¥å®šä¹‰éšå¼è½¬æ¢çš„ç±»ï¼Œåœ¨è¿™ä¸ªç±»ä¸­å®šä¹‰è‡ªå·±çš„æ–¹æ³•æ¥å®ç°æœŸæœ›çš„åŠŸèƒ½ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">implicit</span> <span class="class"><span class="keyword">class</span> <span class="title">StringImprovement</span>(<span class="params">s:<span class="type">String</span></span>) </span>&#123;</span><br><span class="line">     | <span class="function"><span class="keyword">def</span> <span class="title">increment</span> </span>= s.map(c =&gt; (c.toByte + <span class="number">1</span>).toChar)</span><br><span class="line">     | &#125;</span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">StringImprovement</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">scala&gt;</span> "<span class="title">abc</span>".<span class="title">increment</span></span></span><br><span class="line"><span class="class"><span class="title">res16</span></span>: <span class="type">String</span> = bcd</span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ‰€ä»¥ä»»åŠ¡Stringè°ƒç”¨çš„æ–¹æ³•éƒ½ä¸å¥‡æ€ªï¼Œå¯èƒ½æŸå¤„å¼•ç”¨çš„åŒ…ä¸­å®šä¹‰äº†æŸä¸ªéšå¼è½¬æ¢çš„ç±»åŠè‡ªå®šä¹‰æ–¹æ³•ã€‚åœ¨Scala2.1.0ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œè‹¥æƒ³è¦å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ªéšå¼è½¬æ¢çš„æ–¹æ³•ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">scala&gt;  <span class="class"><span class="keyword">class</span> <span class="title">StringImprovement</span>(<span class="params">s:<span class="type">String</span></span>) </span>&#123;</span><br><span class="line">     | <span class="function"><span class="keyword">def</span> <span class="title">increment</span> </span>= s.map(c =&gt; (c.toByte + <span class="number">1</span>).toChar)</span><br><span class="line">     | &#125;</span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">StringImprovement</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">scala&gt;</span> <span class="title">implicit</span> <span class="title">def</span> <span class="title">stringToString</span>(<span class="params">s:<span class="type">String</span></span>) </span>= <span class="keyword">new</span> <span class="type">StringImprovement</span>(s)</span><br><span class="line">warning: there was one feature warning; re-run <span class="keyword">with</span> -feature <span class="keyword">for</span> details</span><br><span class="line">stringToString: (s: <span class="type">String</span>)<span class="type">StringImprovement</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="string">"abc"</span>.increment</span><br><span class="line">res0: <span class="type">String</span> = bcd</span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦‚ä½ æ‰€è§ï¼Œåœ¨Scalaä¸­å¯ä»¥åˆ›å»ºä¸€ä¸ªéšå¼è½¬æ¢çš„ç±»ï¼Œå°†ä»–ä»¬å¼•å…¥éœ€è¦çš„èŒƒå›´ä¸­å»ï¼Œè€Œä¸éœ€è¦è¿›è¡Œç»§æ‰¿ï¼Œå®šä¹‰ä¸€ä¸ªMyXxxxçš„æ–°ç±»ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸‹é¢ç®€è¦æè¿°ä¸‹å…¶å·¥ä½œåŸç†ï¼š</p><ol><li>ç¼–è¯‘å™¨æ‰¾åˆ°â€abcâ€çš„å­—ç¬¦ä¸²å¸¸é‡</li><li>ç¼–è¯‘å™¨å‘ç°è¦åœ¨Stringè°ƒç”¨incrementæ–¹æ³•</li><li>å› ä¸ºStringç±»ä¸­æ²¡æœ‰incrementæ–¹æ³•ï¼Œå®ƒå¼€å§‹åœ¨å½“å‰èŒƒå›´å†…æœç´¢ä¸€ä¸ªæ¥å—Stringä½œä¸ºå‚æ•°çš„éšå¼è½¬æ¢ã€‚</li><li>å¦‚æ­¤ç¼–è¯‘å™¨ä¼šæ‰¾åˆ°StringImprovementç±»ï¼Œåœ¨è¿™ä¸ªç±»ä¸­æ‰¾åˆ°äº†incrementæ–¹æ³•</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ä¸Šæ–‡ä¸­å·²ç»ä»‹ç»äº†Scalaè¯­è¨€ä¸­çš„åŸºæœ¬ç±»å‹ï¼Œæœ¬æ–‡ç€é‡ä»‹ç»ä¸‹å­—ç¬¦ä¸²çš„ç”¨æ³•ï¼Œå­—ç¬¦ä¸²åœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸ç”¨åˆ°ï¼Œå­—ç¬¦ä¸²åœ¨Scalaä¸­çš„ç±»å‹&lt;code&gt;String&lt;/code&gt;ï¼Œé‚£ä¹ˆScalaä¸­çš„Stringå’ŒJavaä¸­çš„Stringæœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;Scala&quot;&lt;/span&gt;.getClass.getName&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;res0: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = java.lang.&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scala&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;æœ¬ä»¥ä¸ºScalaæ˜¯æ€æ ·å®ç°äº†Stringï¼Œä¸Šè¿°ä»£ç ä¸­å‘Šè¯‰æˆ‘ä»¬Scalaä¸­çš„&lt;code&gt;String&lt;/code&gt;ç«Ÿå°±æ˜¯Javaä¸­çš„&lt;code&gt;String&lt;/code&gt;ã€‚æˆ‘ä»¬æ¥ä¸‹æ›´æ·±å±‚æ¬¡çš„å­¦ä¹ &lt;code&gt;String&lt;/code&gt;ã€‚&lt;br&gt;&lt;img src=&quot;/images/a311e33c02d299ee621f10649459ac73.png&quot; alt=&quot;a311e33c02d299ee621f10649459ac73&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="0x0 å¼€å‘è¯­è¨€" scheme="https://deletee.github.io/categories/0x0-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/"/>
    
      <category term="0x01 ä¸€èµ·æ¥å­¦Scala" scheme="https://deletee.github.io/categories/0x0-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/0x01-%E4%B8%80%E8%B5%B7%E6%9D%A5%E5%AD%A6Scala/"/>
    
    
      <category term="Scala" scheme="https://deletee.github.io/tags/Scala/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€èµ·æ¥å­¦Scala(2)-åŸºæœ¬ç±»å‹</title>
    <link href="https://deletee.github.io/2019/01/09/scala-programing-basictype/"/>
    <id>https://deletee.github.io/2019/01/09/scala-programing-basictype/</id>
    <published>2019-01-09T13:28:50.000Z</published>
    <updated>2019-01-16T13:20:01.575Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸Šæ–‡ä¸­å·²ç»ä»‹ç»äº†Scalaè¯­è¨€çš„å…¥é—¨æ¦‚è¦ï¼Œæœ¬æ–‡å°†ä»‹ç»Scalaçš„åŸºæœ¬è¯­æ³•ï¼ŒScalaä¸­æœ‰å˜é‡ã€å¯¹è±¡ã€ç±»ã€æ–¹æ³•ï¼Œåœ¨é¢å‘å¯¹è±¡æ–¹é¢Scalaä¸Javaå¾ˆåƒï¼Œåœ¨ä»£ç ç¼–å†™é£æ ¼ä¸Pythonåˆå¾ˆåƒï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå¤§å®¶ä¹Ÿä¼šç¢°åˆ°ä¸€äº›æœªæ›¾æ¥è§¦çš„è¯­æ³•ï¼Œä¾‹å¦‚ _  . ç­‰ï¼Œæœ¬æ–‡å°†é€æ­¥ä»‹ç»è¿™äº›æ¦‚å¿µã€‚</p><a id="more"></a><h4 id="0x0-åŸºæœ¬ç±»å‹"><a href="#0x0-åŸºæœ¬ç±»å‹" class="headerlink" title="0x0 åŸºæœ¬ç±»å‹"></a>0x0 åŸºæœ¬ç±»å‹</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æˆ‘ä»¬äº†è§£Scalaä¸­æœ‰å“ªäº›åŸºæœ¬ç±»å‹ï¼š</p><div class="table-container"><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>Byte</td><td>8ä½æœ‰ç¬¦å·è¡¥ç æ•´æ•°ã€‚æ•°å€¼åŒºé—´ä¸º -128 åˆ° 127</td></tr><tr><td>Short</td><td>16ä½æœ‰ç¬¦å·è¡¥ç æ•´æ•°ã€‚æ•°å€¼åŒºé—´ä¸º -32768 åˆ° 32767</td></tr><tr><td>Int</td><td>32ä½æœ‰ç¬¦å·è¡¥ç æ•´æ•°ã€‚æ•°å€¼åŒºé—´ä¸º -2147483648 åˆ° 2147483647</td></tr><tr><td>Long</td><td>64ä½æœ‰ç¬¦å·è¡¥ç æ•´æ•°ã€‚æ•°å€¼åŒºé—´ä¸º -9223372036854775808 åˆ° 9223372036854775807</td></tr><tr><td>Float</td><td>32 ä½, IEEE 754 æ ‡å‡†çš„å•ç²¾åº¦æµ®ç‚¹æ•°</td></tr><tr><td>Double</td><td>64 ä½ IEEE 754 æ ‡å‡†çš„åŒç²¾åº¦æµ®ç‚¹æ•°</td></tr><tr><td>Char</td><td>16ä½æ— ç¬¦å·Unicodeå­—ç¬¦, åŒºé—´å€¼ä¸º U+0000 åˆ° U+FFFF</td></tr><tr><td>String</td><td>å­—ç¬¦åºåˆ—</td></tr><tr><td>Boolean</td><td>trueæˆ–false</td></tr><tr><td>Unit</td><td>è¡¨ç¤ºæ— å€¼ï¼Œå’Œå…¶ä»–è¯­è¨€ä¸­voidç­‰åŒã€‚ç”¨ä½œä¸è¿”å›ä»»ä½•ç»“æœçš„æ–¹æ³•çš„ç»“æœç±»å‹ã€‚Unitåªæœ‰ä¸€ä¸ªå®ä¾‹å€¼ï¼Œå†™æˆ()ã€‚</td></tr><tr><td>Null</td><td>null æˆ–ç©ºå¼•ç”¨</td></tr><tr><td>Nothing</td><td>Nothingç±»å‹åœ¨Scalaçš„ç±»å±‚çº§çš„æœ€ä½ç«¯ï¼›å®ƒæ˜¯ä»»ä½•å…¶ä»–ç±»å‹çš„å­ç±»å‹ã€‚</td></tr><tr><td>Any</td><td>Anyæ˜¯æ‰€æœ‰å…¶ä»–ç±»çš„è¶…ç±»</td></tr><tr><td>AnyRef</td><td>AnyRefç±»æ˜¯Scalaé‡Œæ‰€æœ‰å¼•ç”¨ç±»(reference class)çš„åŸºç±»</td></tr></tbody></table></div><p>(æ‘˜è‡ª<a href="http://www.runoob.com/scala/scala-data-types.html" target="_blank" rel="noopener">ScalaåŸºæœ¬ç±»å‹</a>)</p><p>ä¸‹å›¾å±•ç¤ºäº†åŸºæœ¬ç±»å‹ä¹‹é—´çš„æ‹“æ‰‘å…³ç³»å›¾ï¼ŒScalaä¸­ä¸€åˆ‡çš†å¯¹è±¡ï¼š</p><p><img src="/images/091419398321557.png" alt="091419398321557"></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> str:<span class="type">String</span> = <span class="string">"Hello Scala"</span></span><br><span class="line"><span class="keyword">var</span> i:<span class="type">Int</span> = <span class="number">10</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°å®ä¾‹ä¸­å£°æ˜äº†å˜é‡strç±»å‹æ˜¯Stringå‹ï¼Œå˜é‡å€¼ä¸ºâ€Hello Scalaâ€<br>å½“ä¸ºå˜é‡åˆ†é…åˆå§‹å€¼æ—¶ï¼ŒScalaç¼–è¯‘å™¨å¯ä»¥æ ¹æ®åˆ†é…ç»™å®ƒçš„å€¼æ¥æ¨æ–­å˜é‡çš„ç±»å‹ã€‚è¿™è¢«ç§°ä¸ºå˜é‡ç±»å‹æ¨æ–­ã€‚ å› æ­¤ï¼Œå¯ä»¥ç¼–å†™è¿™æ ·çš„å˜é‡å£°æ˜ </p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> str = <span class="string">"Hello Scala"</span></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">10</span></span><br></pre></td></tr></table></figure><!--æœªå®Œå¾…ç»­--><h4 id="0x1-å£°æ˜å˜é‡"><a href="#0x1-å£°æ˜å˜é‡" class="headerlink" title="0x1 å£°æ˜å˜é‡"></a>0x1 å£°æ˜å˜é‡</h4><h5 id="0x10-å£°æ˜å…³é”®å­—-val-var"><a href="#0x10-å£°æ˜å…³é”®å­—-val-var" class="headerlink" title="0x10 å£°æ˜å…³é”®å­—: val,var"></a><strong>0x10 å£°æ˜å…³é”®å­—</strong>: val,var</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>val</code> ç”¨äºå®šä¹‰å¸¸é‡ï¼Œç›¸å½“äºJavaä¸­ä½¿ç”¨finalå®šä¹‰ä¸€æ ·ï¼Œ<code>val</code>  æ˜¯valueçš„ç¼©å†™<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>var</code> ç”¨äºå®šä¹‰å˜é‡ï¼Œ<code>val</code> æ˜¯variableçš„ç¼©å†™<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨Scalaè¯­è¨€ä¸­ï¼Œä½¿ç”¨valå®šä¹‰çš„å˜é‡ï¼Œæ˜¯ä¸èƒ½å¤Ÿé‡æ–°èµ‹å€¼çš„ï¼Œè€Œvarå®šä¹‰çš„å˜é‡æ˜¯å¯ä»¥é‡æ–°è¿›è¡Œèµ‹å€¼</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> str = <span class="string">"Hello World"</span></span><br><span class="line">str: <span class="type">String</span> = <span class="type">Hello</span> <span class="type">World</span></span><br><span class="line"></span><br><span class="line">scala&gt; str = <span class="string">"Hello Scala"</span></span><br><span class="line">&lt;console&gt;:<span class="number">12</span>: error: reassignment to <span class="keyword">val</span></span><br><span class="line">       str = <span class="string">"Hello Scala"</span></span><br><span class="line">           ^</span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">var</span> str = <span class="string">"Hello World"</span></span><br><span class="line">str: <span class="type">String</span> = <span class="type">Hello</span> <span class="type">World</span></span><br><span class="line"></span><br><span class="line">scala&gt; str = <span class="string">"Hello Scala"</span></span><br><span class="line">str: <span class="type">String</span> = <span class="type">Hello</span> <span class="type">Scala</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure><h5 id="0x11-å¤šä¸ªèµ‹å€¼"><a href="#0x11-å¤šä¸ªèµ‹å€¼" class="headerlink" title="0x11 å¤šä¸ªèµ‹å€¼"></a>0x11 å¤šä¸ªèµ‹å€¼</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Scalaæ”¯æŒå¤šä¸ªèµ‹å€¼ã€‚å¦‚æœä»£ç å—æˆ–æ–¹æ³•è¿”å›ä¸€ä¸ªå…ƒç»„(Tuple - ä¿æŒä¸åŒç±»å‹çš„å¯¹è±¡çš„é›†åˆ)ï¼Œåˆ™å¯ä»¥å°†å…ƒç»„åˆ†é…ç»™ä¸€ä¸ª<code>val</code>å˜é‡ã€‚</p><blockquote><p>æ³¨ï¼šæˆ‘ä»¬å°†åœ¨éšåçš„ç« èŠ‚å­¦ä¹ å…ƒç»„ã€‚</p></blockquote><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> (myVar1: <span class="type">Int</span>, myVar2: <span class="type">String</span>) = <span class="type">Pair</span>(<span class="number">40</span>, <span class="string">"Foo"</span>)</span><br><span class="line"><span class="type">Scala</span></span><br></pre></td></tr></table></figure><p>ç±»å‹æ¨æ–­å¾—åˆ°æ­£ç¡®çš„ç±»å‹ -</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> (myVar1, myVar2) = <span class="type">Pair</span>(<span class="number">40</span>, <span class="string">"Foo"</span>)</span><br></pre></td></tr></table></figure><h4 id="0x2-å˜é‡çš„ä½œç”¨åŸŸ"><a href="#0x2-å˜é‡çš„ä½œç”¨åŸŸ" class="headerlink" title="0x2 å˜é‡çš„ä½œç”¨åŸŸ"></a>0x2 å˜é‡çš„ä½œç”¨åŸŸ</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Scalaä¸­å˜é‡åŒå…¶ä»–è¯­è¨€ç±»ä¼¼ï¼Œæœ‰ä¸åŒçš„ä½œç”¨åŸŸï¼Œå…·ä½“å–å†³äºå®ƒä»¬è¢«ä½¿ç”¨çš„ä½ç½®ã€‚å®ƒä»¬å¯ä»¥ä½œä¸ºå­—æ®µå­˜åœ¨ï¼Œä½œä¸ºæ–¹æ³•å‚æ•°å’Œå±€éƒ¨å˜é‡å­˜åœ¨ã€‚ä»¥ä¸‹æ˜¯æ¯ç§ç±»å‹èŒƒå›´çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><h5 id="0x20-å­—æ®µ"><a href="#0x20-å­—æ®µ" class="headerlink" title="0x20 å­—æ®µ"></a><strong>0x20 å­—æ®µ</strong></h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å£°æ˜ä¸ºå¯¹è±¡ä¸­çš„å­—æ®µä¿¡æ¯ï¼Œé‚£ä¹ˆæ ¹æ®éœ€è¦å¯ä½¿ç”¨<code>val</code>æˆ–è€…<code>var</code>ï¼Œå¯¹è±¡ä¸­çš„å­—æ®µå¯ä»¥è¢«å¯¹è±¡ä¸­å…¶ä»–æ–¹æ³•è®¿é—®ï¼Œé…åˆè®¿é—®ä¿®é¥°ç¬¦ï¼Œå¯ä»¥è®¾ç½®å¤–éƒ¨å˜é‡æˆ–è€…å¯¹è±¡è®¿é—®</p><h5 id="0x21-æ–¹æ³•å‚æ•°"><a href="#0x21-æ–¹æ³•å‚æ•°" class="headerlink" title="0x21 æ–¹æ³•å‚æ•°"></a><strong>0x21 æ–¹æ³•å‚æ•°</strong></h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ–¹æ³•æˆ–å‡½æ•°å…¥å‚éƒ½æ˜¯å¸¸é‡ï¼Œæ‰€ä»¥å®šä¹‰å‡½æ•°æ—¶éƒ½æ˜¯ä½¿ç”¨<code>val</code>å…³é”®å­—å®šä¹‰ï¼Œæ–¹æ³•çš„å‚æ•°æ˜¯ä¸å¯å˜çš„ã€‚</p><h5 id="0x22-å±€éƒ¨å˜é‡"><a href="#0x22-å±€éƒ¨å˜é‡" class="headerlink" title="0x22 å±€éƒ¨å˜é‡"></a><strong>0x22 å±€éƒ¨å˜é‡</strong></h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å±€éƒ¨å˜é‡æ˜¯åœ¨æ–¹æ³•ä¸­å£°æ˜çš„å˜é‡ã€‚å±€éƒ¨å˜é‡åªèƒ½ä»æ–¹æ³•å†…éƒ¨è®¿é—®ï¼Œä½†å¦‚æœä»æ–¹æ³•è¿”å›ï¼Œåˆ™æ‚¨åˆ›å»ºçš„å¯¹è±¡å¯èƒ½ä¼šè½¬ä¹‰è¯¥æ–¹æ³•ã€‚å±€éƒ¨å˜é‡å¯ä»¥æ˜¯å¯å˜çš„å’Œä¸å¯å˜çš„ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨<code>var</code>æˆ–<code>val</code>å®šä¹‰ã€‚</p><h4 id="0xF-æ€»ç»“"><a href="#0xF-æ€»ç»“" class="headerlink" title="0xF æ€»ç»“"></a>0xF æ€»ç»“</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æœ¬æ–‡ä¸»è¦ä»‹ç»äº†Scalaä¸­åŸºæœ¬æ•°æ®ç±»å‹åŠå˜é‡çš„å£°æ˜æ–¹æ³•ï¼Œæ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„å…³é”®å­—è¿›è¡Œå˜é‡å®šä¹‰ã€‚<code>var</code> ä¿®é¥°çš„å¯¹è±¡å¼•ç”¨å¯ä»¥æ”¹å˜ï¼Œ<code>val</code>ä¿®é¥°çš„åˆ™ä¸å¯æ”¹å˜ï¼Œä½†å¯¹è±¡çš„çŠ¶æ€å´æ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œå³è¡¨ç¤ºå¯¹äºä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡ val åˆå§‹åŒ–å¯¹è±¡åï¼Œè¯¥å¯¹è±¡æ˜¯ä¸èƒ½å¤Ÿæ”¹å˜çš„ï¼Œä½†æ˜¯å¦‚æœå¯¹è±¡ä¸­æœ‰<code>var</code>å£°æ˜çš„å­—æ®µï¼Œé‚£ä¹ˆæ˜¯å¯ä»¥ä¿®æ”¹å¯¹è±¡å­—æ®µå€¼ï¼Œå®ç°å¯¹è±¡çŠ¶æ€çš„æ”¹å˜ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>(<span class="params">n: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = n</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>(<span class="params">n: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> value = <span class="keyword">new</span> <span class="type">A</span>(n)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</span><br><span class="line">    <span class="keyword">val</span> x = <span class="keyword">new</span> <span class="type">B</span>(<span class="number">5</span>)</span><br><span class="line">    x = <span class="keyword">new</span> <span class="type">B</span>(<span class="number">6</span>) <span class="comment">// é”™è¯¯ï¼Œå› ä¸º x ä¸º val ä¿®é¥°çš„ï¼Œå¼•ç”¨ä¸å¯æ”¹å˜</span></span><br><span class="line">    x.value = <span class="keyword">new</span> <span class="type">A</span>(<span class="number">6</span>) <span class="comment">// é”™è¯¯ï¼Œå› ä¸º x.value ä¸º val ä¿®é¥°çš„ï¼Œå¼•ç”¨ä¸å¯æ”¹å˜</span></span><br><span class="line">    x.value.value = <span class="number">6</span> <span class="comment">// æ­£ç¡®ï¼Œx.value.value ä¸ºvar ä¿®é¥°çš„ï¼Œå¯ä»¥é‡æ–°èµ‹å€¼</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// --------------------- </span></span><br><span class="line"><span class="comment">// ä½œè€…ï¼šGuaKin_Huang </span></span><br><span class="line"><span class="comment">// æ¥æºï¼šCSDN </span></span><br><span class="line"><span class="comment">// åŸæ–‡ï¼šhttps://blog.csdn.net/a1234h/article/details/77962536 </span></span><br><span class="line"><span class="comment">// ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œè½¬è½½è¯·é™„ä¸Šåšæ–‡é“¾æ¥ï¼</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ä¸Šæ–‡ä¸­å·²ç»ä»‹ç»äº†Scalaè¯­è¨€çš„å…¥é—¨æ¦‚è¦ï¼Œæœ¬æ–‡å°†ä»‹ç»Scalaçš„åŸºæœ¬è¯­æ³•ï¼ŒScalaä¸­æœ‰å˜é‡ã€å¯¹è±¡ã€ç±»ã€æ–¹æ³•ï¼Œåœ¨é¢å‘å¯¹è±¡æ–¹é¢Scalaä¸Javaå¾ˆåƒï¼Œåœ¨ä»£ç ç¼–å†™é£æ ¼ä¸Pythonåˆå¾ˆåƒï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå¤§å®¶ä¹Ÿä¼šç¢°åˆ°ä¸€äº›æœªæ›¾æ¥è§¦çš„è¯­æ³•ï¼Œä¾‹å¦‚ _  . ç­‰ï¼Œæœ¬æ–‡å°†é€æ­¥ä»‹ç»è¿™äº›æ¦‚å¿µã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="0x0 å¼€å‘è¯­è¨€" scheme="https://deletee.github.io/categories/0x0-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/"/>
    
      <category term="0x01 ä¸€èµ·æ¥å­¦Scala" scheme="https://deletee.github.io/categories/0x0-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/0x01-%E4%B8%80%E8%B5%B7%E6%9D%A5%E5%AD%A6Scala/"/>
    
    
      <category term="Scala" scheme="https://deletee.github.io/tags/Scala/"/>
    
  </entry>
  
  <entry>
    <title>å¸¸ç”¨çš„ä¸€äº›SQLè¯­å¥</title>
    <link href="https://deletee.github.io/2019/01/09/useful-sql/"/>
    <id>https://deletee.github.io/2019/01/09/useful-sql/</id>
    <published>2019-01-09T13:05:30.000Z</published>
    <updated>2019-01-16T13:20:01.579Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å®é™…å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œç»å¸¸ç”¨çš„å‡ ä¸ªSQLï¼Œå¸¸å¸¸å› ä¸ºæŸäº›å…³é”®å­—å¿˜è®°ï¼Œä»è€Œç»å¸¸éœ€è¦æ‰¾å·¥å…·ä¹¦æˆ–è€…ä¹‹å‰åšçš„å·¥ç¨‹ï¼Œæœ¬æ–‡å°†è‡ªå·±å·¥ä½œä¸­å¸¸å¸¸å®¹æ˜“å¿˜è®°çš„SQLæ•´ç†å‡ºæ¥ï¼Œæ–¹ä¾¿ç›´æ¥å®šä½ã€‚</p><h4 id="0x0-å»ºè¡¨DDL-æŒ‡å®šåˆ†éš”ç¬¦ã€åˆ†åŒº"><a href="#0x0-å»ºè¡¨DDL-æŒ‡å®šåˆ†éš”ç¬¦ã€åˆ†åŒº" class="headerlink" title="0x0 å»ºè¡¨DDL(æŒ‡å®šåˆ†éš”ç¬¦ã€åˆ†åŒº)"></a>0x0 å»ºè¡¨DDL(æŒ‡å®šåˆ†éš”ç¬¦ã€åˆ†åŒº)</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dim.dim_sms_rate_standard</span><br><span class="line">(</span><br><span class="line">     contry_code <span class="keyword">string</span> <span class="keyword">comment</span> <span class="string">'å›½å®¶ç '</span></span><br><span class="line">    ,contry_en_name <span class="keyword">string</span> <span class="keyword">comment</span> <span class="string">'å›½å®¶è‹±æ–‡å'</span></span><br><span class="line">    ,contry_brief_name <span class="keyword">string</span> <span class="keyword">comment</span> <span class="string">'å›½å®¶ç®€ç '</span></span><br><span class="line">    ,sms_price <span class="built_in">float</span> <span class="keyword">comment</span> <span class="string">'çŸ­ä¿¡å•ä»·'</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span> </span><br><span class="line"><span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\t'</span></span><br><span class="line"><span class="keyword">partition</span>(dt <span class="keyword">string</span> <span class="keyword">comment</span> <span class="string">'æ—¥æœŸ'</span>);</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="0x1-è®¾ç½®å‹ç¼©æ ¼å¼"><a href="#0x1-è®¾ç½®å‹ç¼©æ ¼å¼" class="headerlink" title="0x1 è®¾ç½®å‹ç¼©æ ¼å¼"></a>0x1 è®¾ç½®å‹ç¼©æ ¼å¼</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.exec.compress.output=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">set</span> mapred.output.compression.codec=com.hadoop.compression.lzo.LzopCodec;</span><br></pre></td></tr></table></figure><h4 id="0x2-æŸ¥çœ‹å¤–è¡¨åˆ†åŒºè·¯å¾„"><a href="#0x2-æŸ¥çœ‹å¤–è¡¨åˆ†åŒºè·¯å¾„" class="headerlink" title="0x2 æŸ¥çœ‹å¤–è¡¨åˆ†åŒºè·¯å¾„"></a>0x2 æŸ¥çœ‹å¤–è¡¨åˆ†åŒºè·¯å¾„</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc formatted dim.dim_sms_rate_standard partition(dt='2019-01-08');</span><br></pre></td></tr></table></figure><h4 id="0x3-åŠ¨æ€åˆ†åŒº"><a href="#0x3-åŠ¨æ€åˆ†åŒº" class="headerlink" title="0x3 åŠ¨æ€åˆ†åŒº"></a>0x3 åŠ¨æ€åˆ†åŒº</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.exec.dynamic.partition=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">set</span> hive.exec.dynamic.partition.mode=nonstrict; </span><br><span class="line"><span class="keyword">SET</span> hive.exec.max.dynamic.partitions=<span class="number">100000</span>;</span><br><span class="line"><span class="keyword">SET</span> hive.exec.max.dynamic.partitions.pernode=<span class="number">100000</span>;</span><br></pre></td></tr></table></figure><h4 id="0xF-æœªå®Œå¾…ç»­"><a href="#0xF-æœªå®Œå¾…ç»­" class="headerlink" title="0xF æœªå®Œå¾…ç»­"></a>0xF æœªå®Œå¾…ç»­</h4>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;å®é™…å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œç»å¸¸ç”¨çš„å‡ ä¸ªSQLï¼Œå¸¸å¸¸å› ä¸ºæŸäº›å…³é”®å­—å¿˜è®°ï¼Œä»è€Œç»å¸¸éœ€è¦æ‰¾å·¥å…·ä¹¦æˆ–è€…ä¹‹å‰åšçš„å·¥ç¨‹ï¼Œæœ¬æ–‡å°†è‡ªå·±å·¥ä½œä¸­å¸¸å¸¸å®¹æ˜“å¿˜è®°çš„SQLæ•´ç†å‡ºæ¥ï¼Œæ–¹ä¾¿ç›´æ¥å®šä½ã€‚&lt;/p&gt;
&lt;h4 id=&quot;0x0-å»ºè¡¨DDL-æŒ‡å®šåˆ†éš”ç¬¦ã€åˆ†åŒº&quot;&gt;&lt;a href=&quot;#0x0-å»ºè¡¨DDL-æŒ‡å®šåˆ†éš”ç¬¦ã€åˆ†åŒº&quot; class=&quot;headerlink&quot; title=&quot;0x0 å»ºè¡¨DDL(æŒ‡å®šåˆ†éš”ç¬¦ã€åˆ†åŒº)&quot;&gt;&lt;/a&gt;0x0 å»ºè¡¨DDL(æŒ‡å®šåˆ†éš”ç¬¦ã€åˆ†åŒº)&lt;/h4&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; dim.dim_sms_rate_standard&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     contry_code &lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;å›½å®¶ç &#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ,contry_en_name &lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;å›½å®¶è‹±æ–‡å&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ,contry_brief_name &lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;å›½å®¶ç®€ç &#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ,sms_price &lt;span class=&quot;built_in&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;çŸ­ä¿¡å•ä»·&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;row&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;format&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;delimited&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fields&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;terminated&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;\t&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;partition&lt;/span&gt;(dt &lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;æ—¥æœŸ&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="0x2 æŠ€æœ¯å¹³å°" scheme="https://deletee.github.io/categories/0x2-%E6%8A%80%E6%9C%AF%E5%B9%B3%E5%8F%B0/"/>
    
      <category term="0x21 Hive" scheme="https://deletee.github.io/categories/0x2-%E6%8A%80%E6%9C%AF%E5%B9%B3%E5%8F%B0/0x21-Hive/"/>
    
    
      <category term="Hive" scheme="https://deletee.github.io/tags/Hive/"/>
    
      <category term="SQL" scheme="https://deletee.github.io/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€èµ·æ¥å­¦Scala(1)-å…¥é—¨æ¦‚è¦</title>
    <link href="https://deletee.github.io/2019/01/07/scala-programing-brief/"/>
    <id>https://deletee.github.io/2019/01/07/scala-programing-brief/</id>
    <published>2019-01-07T14:35:50.000Z</published>
    <updated>2019-01-16T13:20:01.576Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸ºä»€ä¹ˆè¦å­¦Scalaï¼ŸScalaæ˜¯å¤§æ•°æ®åˆ†æå¹³å°Sparkã€Flink å®˜æ–¹æ”¯æŒçš„è¯­è¨€ï¼Œåœ¨å­¦ä¹ Sparkå’ŒFlinkä¹‹å‰ï¼Œéœ€è¦å­¦å¥½ScalaåŸºç¡€ã€‚ScalaåŒæ ·æ˜¯ä¸€é—¨å½“å‰çƒ­é—¨çš„è¯­è¨€ï¼ŒKafkaã€Sparkå‡ç”±Scalaå¼€å‘ï¼Œç”±æ­¤å­¦ä¹ Scalaæ˜¯å­¦ä¹ è¿™äº›å¹³å°æ¯”ä¸å¯å°‘çš„æ­¥éª¤ã€‚</p><p><img src="/images/a311e33c02d299ee621f10649459ac73.png" alt="a311e33c02d299ee621f10649459ac73"></p><a id="more"></a><h3 id="0x0-ScalaåŸºæœ¬å®šä¹‰"><a href="#0x0-ScalaåŸºæœ¬å®šä¹‰" class="headerlink" title="0x0 ScalaåŸºæœ¬å®šä¹‰"></a>0x0 ScalaåŸºæœ¬å®šä¹‰</h3><p>Scala æ˜¯ä¸€é—¨å¤šèŒƒå¼ï¼ˆmulti-paradigmï¼‰çš„ç¼–ç¨‹è¯­è¨€ï¼Œè®¾è®¡åˆè¡·æ˜¯è¦é›†æˆé¢å‘å¯¹è±¡ç¼–ç¨‹å’Œå‡½æ•°å¼ç¼–ç¨‹çš„å„ç§ç‰¹æ€§ã€‚<br>Scala è¿è¡Œåœ¨Javaè™šæ‹Ÿæœºä¸Šï¼Œå¹¶å…¼å®¹ç°æœ‰çš„Javaç¨‹åºã€‚<br>Scala æºä»£ç è¢«ç¼–è¯‘æˆJavaå­—èŠ‚ç ï¼Œæ‰€ä»¥å®ƒå¯ä»¥è¿è¡ŒäºJVMä¹‹ä¸Šï¼Œå¹¶å¯ä»¥è°ƒç”¨ç°æœ‰çš„Javaç±»åº“ï¼Œç”±è€ŒJavaåŒæ ·å¯ä»¥è°ƒç”¨Scalaçš„ç±»åº“ã€‚Scalaè¯­è¨€ ä½¿ç”¨ JDK &amp; Scala SDK </p><h3 id="0x1-Scalaçš„è¿è¡Œæ–¹å¼"><a href="#0x1-Scalaçš„è¿è¡Œæ–¹å¼" class="headerlink" title="0x1 Scalaçš„è¿è¡Œæ–¹å¼"></a>0x1 Scalaçš„è¿è¡Œæ–¹å¼</h3><p>å¼€å‘Scalaç¨‹åºä¹‹å‰éœ€è¦å®‰è£…<a href="https://www.scala-lang.org/" target="_blank" rel="noopener">Scala</a> </p><h4 id="0x10-è„šæœ¬è¿è¡Œ"><a href="#0x10-è„šæœ¬è¿è¡Œ" class="headerlink" title="0x10 è„šæœ¬è¿è¡Œ"></a>0x10 è„šæœ¬è¿è¡Œ</h4><p>Scalaä¹Ÿæ˜¯ä¸€ç§è„šæœ¬å¼è¯­è¨€ï¼Œå¯ä»¥å°†Scalaç¨‹åºå†™å…¥ä¸€ä¸ªè„šæœ¬ï¼Œç›´æ¥æ‰§è¡Œ</p><p>å¦‚ä¸‹æ˜¯ç¬¬ä¸€ä¸ª Scalaç¨‹åº:HelloWorld.scala</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">HelloWorld</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args:<span class="type">Array</span>[<span class="type">String</span>])&#123;</span><br><span class="line">        println(<span class="string">"Hello World"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å‘½ä»¤:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~$:scala HelloWorld.scala</span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure><h4 id="0x11-ç¼–è¯‘æ‰§è¡Œ"><a href="#0x11-ç¼–è¯‘æ‰§è¡Œ" class="headerlink" title="0x11 ç¼–è¯‘æ‰§è¡Œ"></a>0x11 ç¼–è¯‘æ‰§è¡Œ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~$:scalac HelloWorld.scala</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†ä¼šå¾—åˆ°å¦‚ä¸‹ä¸¤ä¸ª classæ–‡ä»¶ï¼Œå³ä¸º Javaå­—èŠ‚ç </span></span><br><span class="line">HewlloWorld$.class</span><br><span class="line">HewlloWorld.class</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œæ–¹å¼ä¸æ‰§è¡Œjavaclassç±»åŒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~$:scala HelloWorld</span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure><h3 id="0xF-æ€»ç»“"><a href="#0xF-æ€»ç»“" class="headerlink" title="0xF æ€»ç»“"></a>0xF æ€»ç»“</h3><p>Scala çš„è¯­æ³•ç›¸å¯¹Pythonè€Œè¨€æ˜¯æ¯”è¾ƒæ™¦æ¶©ï¼Œåç»­å°½é‡ä»¥ç®€å•æ¸…æ™°çš„å®ä¾‹ï¼Œä»è€Œè¾¾åˆ°æ›´å¥½çš„æ•ˆæœã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ä¸ºä»€ä¹ˆè¦å­¦Scalaï¼ŸScalaæ˜¯å¤§æ•°æ®åˆ†æå¹³å°Sparkã€Flink å®˜æ–¹æ”¯æŒçš„è¯­è¨€ï¼Œåœ¨å­¦ä¹ Sparkå’ŒFlinkä¹‹å‰ï¼Œéœ€è¦å­¦å¥½ScalaåŸºç¡€ã€‚ScalaåŒæ ·æ˜¯ä¸€é—¨å½“å‰çƒ­é—¨çš„è¯­è¨€ï¼ŒKafkaã€Sparkå‡ç”±Scalaå¼€å‘ï¼Œç”±æ­¤å­¦ä¹ Scalaæ˜¯å­¦ä¹ è¿™äº›å¹³å°æ¯”ä¸å¯å°‘çš„æ­¥éª¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/a311e33c02d299ee621f10649459ac73.png&quot; alt=&quot;a311e33c02d299ee621f10649459ac73&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="0x0 å¼€å‘è¯­è¨€" scheme="https://deletee.github.io/categories/0x0-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/"/>
    
      <category term="0x01 ä¸€èµ·æ¥å­¦Scala" scheme="https://deletee.github.io/categories/0x0-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/0x01-%E4%B8%80%E8%B5%B7%E6%9D%A5%E5%AD%A6Scala/"/>
    
    
      <category term="Scala" scheme="https://deletee.github.io/tags/Scala/"/>
    
  </entry>
  
  <entry>
    <title>awkçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•</title>
    <link href="https://deletee.github.io/2019/01/06/awk-basic/"/>
    <id>https://deletee.github.io/2019/01/06/awk-basic/</id>
    <published>2019-01-06T07:46:30.000Z</published>
    <updated>2019-01-22T13:50:04.330Z</updated>
    
    <content type="html"><![CDATA[<h3 id="0x0-ç®€ä»‹"><a href="#0x0-ç®€ä»‹" class="headerlink" title="0x0 ç®€ä»‹"></a><strong>0x0 ç®€ä»‹</strong></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awkæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·ï¼Œç›¸å¯¹äºgrepçš„æŸ¥æ‰¾ï¼Œsedçš„ç¼–è¾‘ï¼Œawkåœ¨å…¶å¯¹æ•°æ®åˆ†æå¹¶ç”ŸæˆæŠ¥å‘Šæ—¶ï¼Œæ˜¾å¾—å°¤ä¸ºå¼ºå¤§ã€‚ç®€å•æ¥è¯´awkå°±æ˜¯æŠŠæ–‡ä»¶é€è¡Œçš„è¯»å…¥ï¼Œä»¥ç©ºæ ¼ä¸ºé»˜è®¤åˆ†éš”ç¬¦å°†æ¯è¡Œåˆ‡ç‰‡ï¼Œåˆ‡å¼€çš„éƒ¨åˆ†å†è¿›è¡Œå„ç§åˆ†æå¤„ç†ã€‚</p><p>awkæœ‰3ä¸ªä¸åŒç‰ˆæœ¬: awkã€nawkå’Œgawkï¼Œæœªä½œç‰¹åˆ«è¯´æ˜ï¼Œä¸€èˆ¬æŒ‡gawkï¼Œgawk æ˜¯ AWK çš„ GNU ç‰ˆæœ¬ã€‚</p><a id="more"></a><p>awkå…¶åç§°å¾—è‡ªäºå®ƒçš„åˆ›å§‹äºº Alfred Aho ã€Peter Weinberger å’Œ Brian Kernighan å§“æ°çš„é¦–ä¸ªå­—æ¯ã€‚å®é™…ä¸Š AWK çš„ç¡®æ‹¥æœ‰è‡ªå·±çš„è¯­è¨€ï¼š AWK ç¨‹åºè®¾è®¡è¯­è¨€ ï¼Œ ä¸‰ä½åˆ›å»ºè€…å·²å°†å®ƒæ­£å¼å®šä¹‰ä¸ºâ€œæ ·å¼æ‰«æå’Œå¤„ç†è¯­è¨€â€ã€‚å®ƒå…è®¸æ‚¨åˆ›å»ºç®€çŸ­çš„ç¨‹åºï¼Œè¿™äº›ç¨‹åºè¯»å–è¾“å…¥æ–‡ä»¶ã€ä¸ºæ•°æ®æ’åºã€å¤„ç†æ•°æ®ã€å¯¹è¾“å…¥æ‰§è¡Œè®¡ç®—ä»¥åŠç”ŸæˆæŠ¥è¡¨ï¼Œè¿˜æœ‰æ— æ•°å…¶ä»–çš„åŠŸèƒ½ã€‚</p><h3 id="0x1-ä½¿ç”¨æ–¹æ³•"><a href="#0x1-ä½¿ç”¨æ–¹æ³•" class="headerlink" title="0x1 ä½¿ç”¨æ–¹æ³•"></a>0x1 ä½¿ç”¨æ–¹æ³•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk '&#123;pattern + action&#125;' &#123;filenames&#125;</span><br></pre></td></tr></table></figure><p>é€šå¸¸ï¼Œawkæ˜¯ä»¥æ–‡ä»¶çš„ä¸€è¡Œä¸ºå¤„ç†å•ä½çš„ã€‚awkæ¯æ¥æ”¶æ–‡ä»¶çš„ä¸€è¡Œï¼Œç„¶åæ‰§è¡Œç›¸åº”çš„å‘½ä»¤ï¼Œæ¥å¤„ç†æ–‡æœ¬ã€‚</p><p>awk æœ‰å¦‚ä¸‹ä¸‰ç§ä½¿ç”¨æ–¹å¼</p><h4 id="0x10-å‘½ä»¤è¡Œæ–¹å¼"><a href="#0x10-å‘½ä»¤è¡Œæ–¹å¼" class="headerlink" title="0x10 å‘½ä»¤è¡Œæ–¹å¼"></a>0x10 å‘½ä»¤è¡Œæ–¹å¼</h4><figure class="highlight shell"><figcaption><span>awk [-F field-separatir] 'commands' input-file </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk [-F field-separatir] 'commands' input-file</span><br></pre></td></tr></table></figure><p>æ­¤ç§æ–¹å¼ä¸ºæœ€å¸¸ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œ-F æ˜¯å°†æ–‡ä»¶æŒ‰æŒ‡å®šåˆ†éš”ç¬¦è¿›è¡Œåˆ‡å‰²ã€‚</p><h4 id="0x11-shellè„šæœ¬æ–¹å¼"><a href="#0x11-shellè„šæœ¬æ–¹å¼" class="headerlink" title="0x11 shellè„šæœ¬æ–¹å¼"></a>0x11 shellè„šæœ¬æ–¹å¼</h4><p>å°†æ‰€æœ‰çš„awkå‘½ä»¤æ’å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä½¿awkç¨‹åºå¯æ‰§è¡Œï¼Œç„¶åawkå‘½ä»¤è§£é‡Šå™¨ä½œä¸ºè„šæœ¬çš„é¦–è¡Œï¼Œä¸€éé€šè¿‡é”®å…¥è„šæœ¬åç§°æ¥è°ƒç”¨ã€‚<br>ç›¸å½“äºshellè„šæœ¬é¦–è¡Œçš„ï¼š#!/bin/sh<br>å¯ä»¥æ¢æˆï¼š#!/bin/awk</p><h4 id="0x12-å°†æ‰€æœ‰çš„awkå‘½ä»¤æ’å…¥ä¸€ä¸ªå•ç‹¬æ–‡ä»¶ï¼Œç„¶åè°ƒç”¨ï¼š"><a href="#0x12-å°†æ‰€æœ‰çš„awkå‘½ä»¤æ’å…¥ä¸€ä¸ªå•ç‹¬æ–‡ä»¶ï¼Œç„¶åè°ƒç”¨ï¼š" class="headerlink" title="0x12 å°†æ‰€æœ‰çš„awkå‘½ä»¤æ’å…¥ä¸€ä¸ªå•ç‹¬æ–‡ä»¶ï¼Œç„¶åè°ƒç”¨ï¼š"></a>0x12 å°†æ‰€æœ‰çš„awkå‘½ä»¤æ’å…¥ä¸€ä¸ªå•ç‹¬æ–‡ä»¶ï¼Œç„¶åè°ƒç”¨ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -f awk-script-file input-file(s)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ-fé€‰é¡¹åŠ è½½awk-script-fileä¸­çš„awkè„šæœ¬ï¼Œinput-file(s)è·Ÿä¸Šé¢çš„æ˜¯ä¸€æ ·çš„ã€‚</p><h3 id="0x2-å…¥é—¨å®ä¾‹"><a href="#0x2-å…¥é—¨å®ä¾‹" class="headerlink" title="0x2 å…¥é—¨å®ä¾‹"></a>0x2 å…¥é—¨å®ä¾‹</h3><h4 id="0x20-åˆ†éš”ç¬¦"><a href="#0x20-åˆ†éš”ç¬¦" class="headerlink" title="0x20 åˆ†éš”ç¬¦"></a>0x20 åˆ†éš”ç¬¦</h4><p>ä¾‹å¦‚ï¼ša.txt</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 2 3</span><br><span class="line">1 2 3</span><br></pre></td></tr></table></figure><p>awk é»˜è®¤æ”¯æŒåˆ†éš”ç¬¦ï¼Œä¾‹å¦‚ ç©ºæ ¼ï¼Œåˆ¶è¡¨ç¬¦ï¼Œå¦‚ä¸‹ä¸¤ç§æ–¹å¼ç­‰ä»·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk -F&apos; &apos; &apos;&#123;print $1&#125;&apos; a.txt</span><br><span class="line">awk &apos;&#123;print $1&#125;&apos; a.txt</span><br></pre></td></tr></table></figure><p>$0å˜é‡æ˜¯æŒ‡æ•´æ¡è®°å½•ã€‚$1è¡¨ç¤ºå½“å‰è¡Œçš„ç¬¬ä¸€ä¸ªåŸŸ,$2è¡¨ç¤ºå½“å‰è¡Œçš„ç¬¬äºŒä¸ªåŸŸ,â€¦â€¦ä»¥æ­¤ç±»æ¨ã€‚</p><p>ä¾‹å¦‚ï¼š b.txt</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1,2,3</span><br><span class="line">3,4,5</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk -F&apos;,&apos; &apos;&#123;print $1&#125;&apos;</span><br><span class="line">1</span><br><span class="line">3</span><br></pre></td></tr></table></figure><h4 id="0x21-BEGIN-amp-END"><a href="#0x21-BEGIN-amp-END" class="headerlink" title="0x21  BEGIN &amp; END"></a>0x21  BEGIN &amp; END</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd \</span><br><span class="line">|awk  -F ':'  'BEGIN &#123;print "name,shell"&#125;  &#123;print $1","$7&#125; END &#123;print "blue,/bin/nosh"&#125;'</span><br><span class="line">name,shell</span><br><span class="line">root,/bin/bash</span><br><span class="line">daemon,/bin/sh</span><br><span class="line">bin,/bin/sh</span><br><span class="line">sys,/bin/sh</span><br><span class="line">....</span><br><span class="line">blue,/bin/nosh</span><br></pre></td></tr></table></figure><p>BEGIN æ˜¯åœ¨å¤„ç†æ•°æ®è¡Œä¹‹å‰è¿›è¡Œçš„æ“ä½œ</p><p>END åˆ™æ˜¯åœ¨æ•°æ®è¡Œå¤„ç†ä¹‹åè¿›è¡Œçš„æ“ä½œ</p><p>ä¾‹å¦‚ï¼šc.txt æ±‚ç¬¬ä¸€åˆ—çš„æ€»å’Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1,2,3</span><br><span class="line">3,4,5</span><br><span class="line">4,5,6</span><br><span class="line">7,8,9</span><br></pre></td></tr></table></figure><p><strong>å‘½ä»¤å¦‚ä¸‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F<span class="string">','</span> <span class="string">'BEGIN &#123;sum=0&#125; sum+=$1 END &#123;print "sum = "sum&#125;'</span></span><br></pre></td></tr></table></figure><p>BEGIN å£°æ˜ä¸€ä¸ªsum åˆå§‹åŒ–å€¼ä¸º0 çš„å˜é‡ï¼ŒEND å°†å˜é‡è¾“å‡º</p><h3 id="0x3-awkå†…ç½®å˜é‡"><a href="#0x3-awkå†…ç½®å˜é‡" class="headerlink" title="0x3 awkå†…ç½®å˜é‡"></a>0x3 awkå†…ç½®å˜é‡</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ARGC               å‘½ä»¤è¡Œå‚æ•°ä¸ªæ•°</span><br><span class="line">ARGV               å‘½ä»¤è¡Œå‚æ•°æ’åˆ—</span><br><span class="line">ENVIRON            æ”¯æŒé˜Ÿåˆ—ä¸­ç³»ç»Ÿç¯å¢ƒå˜é‡çš„ä½¿ç”¨</span><br><span class="line">FILENAME           awkæµè§ˆçš„æ–‡ä»¶å</span><br><span class="line">FNR                æµè§ˆæ–‡ä»¶çš„è®°å½•æ•°</span><br><span class="line">FS                 è®¾ç½®è¾“å…¥åŸŸåˆ†éš”ç¬¦ï¼Œç­‰ä»·äºå‘½ä»¤è¡Œ -Fé€‰é¡¹</span><br><span class="line">NF                 æµè§ˆè®°å½•çš„åŸŸçš„ä¸ªæ•°</span><br><span class="line">NR                 å·²è¯»çš„è®°å½•æ•°</span><br><span class="line">OFS                è¾“å‡ºåŸŸåˆ†éš”ç¬¦</span><br><span class="line">ORS                è¾“å‡ºè®°å½•åˆ†éš”ç¬¦</span><br><span class="line">RS                 æ§åˆ¶è®°å½•åˆ†éš”ç¬¦</span><br></pre></td></tr></table></figure><h3 id="0x4-awk-ç¼–ç¨‹"><a href="#0x4-awk-ç¼–ç¨‹" class="headerlink" title="0x4 awk ç¼–ç¨‹"></a>0x4 awk ç¼–ç¨‹</h3><p>awk å¯åœ¨å†…éƒ¨å®ç°ä¸°å¯Œçš„ç¼–ç¨‹</p><p><strong>æ¡ä»¶è¯­å¥</strong></p><p> awkä¸­çš„æ¡ä»¶è¯­å¥æ˜¯ä»Cè¯­è¨€ä¸­å€Ÿé‰´æ¥çš„ï¼Œè§å¦‚ä¸‹å£°æ˜æ–¹å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">if (expression) &#123;</span><br><span class="line">    statement;</span><br><span class="line">    statement;</span><br><span class="line">    ... ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (expression) &#123;</span><br><span class="line">    statement;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    statement2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (expression) &#123;</span><br><span class="line">    statement1;</span><br><span class="line">&#125; else if (expression1) &#123;</span><br><span class="line">    statement2;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    statement3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼šç»Ÿè®¡æŸä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å ç”¨çš„å­—èŠ‚æ•°,è¿‡æ»¤4096å¤§å°çš„æ–‡ä»¶(ä¸€èˆ¬éƒ½æ˜¯æ–‡ä»¶å¤¹):</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -l |awk 'BEGIN &#123;size=0;print "[start]size is ", size&#125; &#123;if($5!=4096)&#123;size=size+$5;&#125;&#125; END&#123;print "[end]size is ", size/1024/1024,"M"&#125;' </span><br><span class="line">[end]size is  8.22339 M</span><br></pre></td></tr></table></figure><p><strong>å¾ªç¯è¯­å¥</strong></p><p>awkä¸­çš„å¾ªç¯è¯­å¥åŒæ ·å€Ÿé‰´äºCè¯­è¨€ï¼Œæ”¯æŒwhileã€do/whileã€forã€breakã€continueï¼Œè¿™äº›å…³é”®å­—çš„è¯­ä¹‰å’ŒCè¯­è¨€ä¸­çš„è¯­ä¹‰å®Œå…¨ç›¸åŒã€‚</p><p><strong>æ•°ç»„</strong></p><p>  å› ä¸ºawkä¸­æ•°ç»„çš„ä¸‹æ ‡å¯ä»¥æ˜¯æ•°å­—å’Œå­—æ¯ï¼Œæ•°ç»„çš„ä¸‹æ ‡é€šå¸¸è¢«ç§°ä¸ºå…³é”®å­—(key)ã€‚å€¼å’Œå…³é”®å­—éƒ½å­˜å‚¨åœ¨å†…éƒ¨çš„ä¸€å¼ é’ˆå¯¹key/valueåº”ç”¨hashçš„è¡¨æ ¼é‡Œã€‚ç”±äºhashä¸æ˜¯é¡ºåºå­˜å‚¨ï¼Œå› æ­¤åœ¨æ˜¾ç¤ºæ•°ç»„å†…å®¹æ—¶ä¼šå‘ç°ï¼Œå®ƒä»¬å¹¶ä¸æ˜¯æŒ‰ç…§ä½ é¢„æ–™çš„é¡ºåºæ˜¾ç¤ºå‡ºæ¥çš„ã€‚æ•°ç»„å’Œå˜é‡ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨ä½¿ç”¨æ—¶è‡ªåŠ¨åˆ›å»ºçš„ï¼Œawkä¹ŸåŒæ ·ä¼šè‡ªåŠ¨åˆ¤æ–­å…¶å­˜å‚¨çš„æ˜¯æ•°å­—è¿˜æ˜¯å­—ç¬¦ä¸²ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œawkä¸­çš„æ•°ç»„ç”¨æ¥ä»è®°å½•ä¸­æ”¶é›†ä¿¡æ¯ï¼Œå¯ä»¥ç”¨äºè®¡ç®—æ€»å’Œã€ç»Ÿè®¡å•è¯ä»¥åŠè·Ÿè¸ªæ¨¡æ¿è¢«åŒ¹é…çš„æ¬¡æ•°ç­‰ç­‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">awk -F &apos;:&apos; &apos;BEGIN &#123;count=0;&#125; &#123;name[count] = $1;count++;&#125;; END&#123;for (i = 0; i &lt; NR; i++) print i, name[i]&#125;&apos; /etc/passwd</span><br><span class="line">0 root</span><br><span class="line">1 daemon</span><br><span class="line">2 bin</span><br><span class="line">3 sys</span><br><span class="line">4 sync</span><br><span class="line">5 games</span><br><span class="line">......</span><br></pre></td></tr></table></figure><p>awkç¼–ç¨‹çš„å†…å®¹æå¤šï¼Œè¿™é‡Œåªç½—åˆ—ç®€å•å¸¸ç”¨çš„ç”¨æ³•ï¼Œæ›´å¤šè¯·å‚è€ƒ <a href="http://www.gnu.org/software/gawk/manual/gawk.html" target="_blank" rel="noopener">http://www.gnu.org/software/gawk/manual/gawk.html</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;0x0-ç®€ä»‹&quot;&gt;&lt;a href=&quot;#0x0-ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;0x0 ç®€ä»‹&quot;&gt;&lt;/a&gt;&lt;strong&gt;0x0 ç®€ä»‹&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;awkæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·ï¼Œç›¸å¯¹äºgrepçš„æŸ¥æ‰¾ï¼Œsedçš„ç¼–è¾‘ï¼Œawkåœ¨å…¶å¯¹æ•°æ®åˆ†æå¹¶ç”ŸæˆæŠ¥å‘Šæ—¶ï¼Œæ˜¾å¾—å°¤ä¸ºå¼ºå¤§ã€‚ç®€å•æ¥è¯´awkå°±æ˜¯æŠŠæ–‡ä»¶é€è¡Œçš„è¯»å…¥ï¼Œä»¥ç©ºæ ¼ä¸ºé»˜è®¤åˆ†éš”ç¬¦å°†æ¯è¡Œåˆ‡ç‰‡ï¼Œåˆ‡å¼€çš„éƒ¨åˆ†å†è¿›è¡Œå„ç§åˆ†æå¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;awkæœ‰3ä¸ªä¸åŒç‰ˆæœ¬: awkã€nawkå’Œgawkï¼Œæœªä½œç‰¹åˆ«è¯´æ˜ï¼Œä¸€èˆ¬æŒ‡gawkï¼Œgawk æ˜¯ AWK çš„ GNU ç‰ˆæœ¬ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="0x0 å¼€å‘è¯­è¨€" scheme="https://deletee.github.io/categories/0x0-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/"/>
    
      <category term="0x00 ä¸€èµ·æ¥å­¦Shell" scheme="https://deletee.github.io/categories/0x0-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/0x00-%E4%B8%80%E8%B5%B7%E6%9D%A5%E5%AD%A6Shell/"/>
    
    
      <category term="shell" scheme="https://deletee.github.io/tags/shell/"/>
    
      <category term="awk" scheme="https://deletee.github.io/tags/awk/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ä»“åº“å·¥ç¨‹å¸ˆå­¦ä¹ è·¯çº¿</title>
    <link href="https://deletee.github.io/2019/01/05/edw-need-learning/"/>
    <id>https://deletee.github.io/2019/01/05/edw-need-learning/</id>
    <published>2019-01-05T07:46:30.000Z</published>
    <updated>2019-01-16T13:20:01.571Z</updated>
    
    <content type="html"><![CDATA[<p>åˆšçœ‹äº†æœ¨ä¸œå±…å£«å…³äºã€Š<a href="http://www.mdjs.info/2018/10/26/learn-for-resume/#more" target="_blank" rel="noopener">èŠä¸€èŠå¦‚ä½•é¢å‘ç®€å†å­¦ä¹ </a>ã€‹ï¼Œæœ‰ä¸€äº›æ„Ÿè§¦ï¼Œæ¯æ¯æ€è€ƒåˆ°èŒä¸šå‘å±•æ€»æ˜¯æœ‰ä¸€ç§ææ…Œï¼Œå› ä¸ºæˆ‘ä»¬å¾ˆå¤šæ—¶å€™éƒ½å¿˜äº†æ¢¦æƒ³ï¼Œç”šè‡³æ ¹æœ¬æ²¡æœ‰æ¢¦æƒ³ï¼Œä¹Ÿå°±è°ˆä¸ä¸Šè§„åˆ’ï¼Œä»Šå¤©æ˜¯æ€è€ƒå’Œæ•´ç†ä¸‹è‡ªå·±çš„å­¦ä¹ è·¯çº¿ã€‚å†™ä¸‹è‡ªå·±çš„æƒ³æ³•åŠè§„åˆ’ã€‚</p><blockquote><p>ä½ æ˜¯å¦æ‹…å¿ƒäº’è”ç½‘å¯’å†¬ä¸­é¦–å…ˆæ·˜æ±°çš„é‚£æ³¢äººå°±æœ‰è‡ªå·±ï¼Ÿä½ æ˜¯å¦æ„Ÿè§‰åˆ°è‡ªå·±ç¼ºä¹æ ¸å¿ƒç«äº‰åŠ›ï¼Ÿæ˜¯å¦æ„Ÿè§‰å·²ç»å¾ˆä¹…æ²¡æœ‰å­¦ä¹ æˆé•¿ï¼Ÿ</p></blockquote><a id="more"></a><p>&nbsp; &nbsp; &nbsp; &nbsp;ä¸€ä¸ªæ•°æ®ä»“åº“å·¥ç¨‹å¸ˆæˆ–è€…æ•°æ®å¼€å‘äººå‘˜ï¼Œéœ€è¦æŒæ¡ä»€ä¹ˆæŠ€èƒ½ï¼Ÿæ•°æ®ä»“åº“åº”è¯¥åˆ†ä¸ºå››ç±»ï¼šå»ºæ¨¡æ–¹æ³•è®ºï¼Œå®æ–½æ–¹æ³•è®ºã€æ•°æ®ç®¡ç†æ–¹æ³•è®ºã€æ•°æ®åº”ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†æœ¨ä¸œå±…å£«çš„å†…å®¹æ•´ç†äº†ä¸€ä¸‹ï¼Œå¦‚ä¸‹ï¼š</p><div class="table-container"><table><thead><tr><th>ä¸»é¢˜</th><th>å†…å®¹</th><th>æ—¶é—´</th></tr></thead><tbody><tr><td>æ•°æ®å»ºæ¨¡</td><td>å¸¸ç”¨æ•°æ®ä»“åº“æ¨¡å‹åŸç†æ€»ç»“</td><td>1 å‘¨</td></tr><tr><td>æ•°æ®å»ºæ¨¡</td><td>ç»´åº¦å»ºæ¨¡åŸç†</td><td>1 å‘¨</td></tr><tr><td>æ•°æ®å»ºæ¨¡</td><td>ä»¥æ·˜å®çš„åœºæ™¯ä¸ºä¾‹è®¾è®¡ä¸€å¥—æ•°æ®æ¨¡å‹</td><td>1 å‘¨</td></tr><tr><td>æ•°æ®å»ºæ¨¡</td><td>æ—¶é—´ç»´è¡¨è®¾è®¡</td><td>1 å‘¨</td></tr><tr><td>æ•°æ®ç®¡ç†</td><td>å…ƒæ•°æ®ç®¡ç†</td><td>1 å‘¨</td></tr><tr><td>æ•°æ®ç®¡ç†</td><td>æ•°æ®è´¨é‡ç›‘æ§è®¾è®¡</td><td>1 å‘¨</td></tr><tr><td>æ•°æ®ç®¡ç†</td><td>æ•°æ®è¡€ç¼˜åˆ†æ</td><td>1 å‘¨</td></tr><tr><td>æ•°æ®ç®¡ç†</td><td>ä½œä¸šç›‘æ§è®¾è®¡</td><td>1 å‘¨</td></tr><tr><td>æ•°æ®åº”ç”¨</td><td>OLapåˆ†æåŸç†+Kylinå®è·µ</td><td>3 å‘¨</td></tr><tr><td>æ•°æ®åº”ç”¨</td><td>æ•°æ®åˆ†å±‚è®¾è®¡</td><td>1 å‘¨</td></tr><tr><td>å¤§æ•°æ®å¹³å°</td><td>Hiveï¼ˆåŸºæœ¬ç”¨æ³•ã€é«˜é˜¶å‡½æ•°ç”¨æ³•ã€Hiveä¼˜åŒ–ï¼‰</td><td>2 å‘¨</td></tr><tr><td>å¤§æ•°æ®å¹³å°</td><td>Hive æ‰§è¡Œè¿‡ç¨‹åŸç†</td><td>1 å‘¨</td></tr><tr><td>å¤§æ•°æ®å¹³å°</td><td>Hadoop å¸¸ç”¨å‘½ä»¤</td><td>1 å‘¨</td></tr><tr><td>å¤§æ•°æ®å¹³å°</td><td>HBase åŸºæœ¬ç”¨æ³•ï¼ŒåŸç†</td><td>2 å‘¨</td></tr><tr><td>å¤§æ•°æ®å¹³å°</td><td>Spark å¸¸ç”¨å‘½ä»¤</td><td>1 å‘¨</td></tr><tr><td>å¤§æ•°æ®å¹³å°</td><td>Flink åŸºæœ¬ç”¨æ³•ï¼ŒåŸç†</td><td>2 å‘¨</td></tr><tr><td>å¤§æ•°æ®å¹³å°</td><td>Kafka åŸºæœ¬ç”¨æ³•ï¼ŒåŸç†</td><td>2 å‘¨</td></tr><tr><td>è„šæœ¬è¯­è¨€</td><td>Python</td><td>2 å‘¨</td></tr><tr><td>è„šæœ¬è¯­è¨€</td><td>Scala</td><td>2 å‘¨</td></tr><tr><td>è®ºæ–‡é˜…è¯»</td><td>Google çš„ Goods è®ºæ–‡é˜…è¯»ï¼ˆæ•°æ®ç®¡ç†ï¼‰</td><td>1 å‘¨</td></tr></tbody></table></div><p>åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰æŠ€æœ¯éƒ½æœ‰åœ¨ä½¿ç”¨ï¼Œå¾€å¾€æ²¡æœ‰ä½¿ç”¨çš„æŠ€æœ¯æˆ–æ–¹æ³•è®ºï¼Œåˆ™å®¹æ˜“è¢«æˆ‘ä»¬å¿˜è®°ï¼Œæ‰€ä»¥æœ€å¥½çš„æ–¹å¼ï¼Œå°±æ˜¯å†™åšå®¢æˆ–è€…å†™PPTï¼Œä»¥è‡ªå·±ç†è§£çš„è¯æœ¯è¡¨è¾¾å‡ºæ¥ï¼Œç›¸ä¿¡è¿™æ ·çš„æ¨¡å¼ä¼šæ¯”å•çº¯çš„è®°å¿†ä¸€äº›æ¦‚å¿µè¦å¥½å¾ˆå¤šã€‚</p><p>æ„Ÿè°¢@æœ¨ä¸œå±…å£«çš„åˆ†äº«</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åˆšçœ‹äº†æœ¨ä¸œå±…å£«å…³äºã€Š&lt;a href=&quot;http://www.mdjs.info/2018/10/26/learn-for-resume/#more&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;èŠä¸€èŠå¦‚ä½•é¢å‘ç®€å†å­¦ä¹ &lt;/a&gt;ã€‹ï¼Œæœ‰ä¸€äº›æ„Ÿè§¦ï¼Œæ¯æ¯æ€è€ƒåˆ°èŒä¸šå‘å±•æ€»æ˜¯æœ‰ä¸€ç§ææ…Œï¼Œå› ä¸ºæˆ‘ä»¬å¾ˆå¤šæ—¶å€™éƒ½å¿˜äº†æ¢¦æƒ³ï¼Œç”šè‡³æ ¹æœ¬æ²¡æœ‰æ¢¦æƒ³ï¼Œä¹Ÿå°±è°ˆä¸ä¸Šè§„åˆ’ï¼Œä»Šå¤©æ˜¯æ€è€ƒå’Œæ•´ç†ä¸‹è‡ªå·±çš„å­¦ä¹ è·¯çº¿ã€‚å†™ä¸‹è‡ªå·±çš„æƒ³æ³•åŠè§„åˆ’ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½ æ˜¯å¦æ‹…å¿ƒäº’è”ç½‘å¯’å†¬ä¸­é¦–å…ˆæ·˜æ±°çš„é‚£æ³¢äººå°±æœ‰è‡ªå·±ï¼Ÿä½ æ˜¯å¦æ„Ÿè§‰åˆ°è‡ªå·±ç¼ºä¹æ ¸å¿ƒç«äº‰åŠ›ï¼Ÿæ˜¯å¦æ„Ÿè§‰å·²ç»å¾ˆä¹…æ²¡æœ‰å­¦ä¹ æˆé•¿ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="0x1 æ•°æ®ä»“åº“" scheme="https://deletee.github.io/categories/0x1-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/"/>
    
      <category term="0x1F å…¶ä»–" scheme="https://deletee.github.io/categories/0x1-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/0x1F-%E5%85%B6%E4%BB%96/"/>
    
    
      <category term="æ•°æ®ä»“åº“" scheme="https://deletee.github.io/tags/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/"/>
    
      <category term="å­¦ä¹ " scheme="https://deletee.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>awkçš„é«˜çº§åº”ç”¨-å¤šç›®å½•è¾“å‡º</title>
    <link href="https://deletee.github.io/2018/12/31/awk-application/"/>
    <id>https://deletee.github.io/2018/12/31/awk-application/</id>
    <published>2018-12-31T07:46:30.000Z</published>
    <updated>2019-01-22T13:50:00.265Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awkæ˜¯Shellä¸­ä¸‰å‰‘å®¢ä¹‹ä¸€ï¼ŒåŠŸèƒ½ååˆ†å¼ºå¤§ï¼Œæœ¬æ–‡åˆ†äº«çš„é€šè¿‡ä¸€ä»½ç®¡é“è¾“å…¥ï¼Œå®ç°å¤šç›®å½•è¾“å‡ºã€‚åŸç†ï¼šawkå†…éƒ¨å¯å®ç°ç¼–ç¨‹ï¼Œåœ¨awkå†…éƒ¨å°†è¾“å…¥æµè¿›è¡Œé¢„å¤„ç†åï¼Œåˆ©ç”¨ print ${content} &gt;&gt; ${path}çš„æ–¹å¼å°†æ•°æ®è¿›è¡Œåˆ†æµã€‚</p><p><strong>ä¸‹é¢ä¸€ä¸ªå®ä¾‹ï¼š</strong></p><blockquote><p>é€šè¿‡HDFS æ ‡å‡†è¾“å…¥æµï¼Œåœ¨awkä¸­æ ¹æ®æ•°æ®æ—¥æœŸæ—¶é—´åˆ†æµè‡³ä¸åŒçš„æ—¥æœŸæ–‡ä»¶å¤¹ä¸­ã€‚</p></blockquote><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line"><span class="comment">#***********************************************************************</span></span><br><span class="line"><span class="comment">#è„šæœ¬åŠŸèƒ½: è¿½è¡¥å†å²æ¨é€æ•°æ®</span></span><br><span class="line"><span class="comment">#åˆ›å»ºæ—¥æœŸ: 2016-05-16</span></span><br><span class="line"><span class="comment">#ä¿®æ”¹çºªå½•ï¼š      ä¿®æ”¹äºº            ä¿®æ”¹æ—¥æœŸ          ä¿®æ”¹æè¿°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#----+-----------------+--------------------+--------------------------+</span></span><br><span class="line"><span class="comment">#  1          deletee       2017-10-12            åˆ›å»º</span></span><br><span class="line"><span class="comment">#***********************************************************************</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¯å¢ƒå˜é‡è®¾ç½®</span></span><br><span class="line"><span class="comment">#-------------------------------------------------------</span></span><br><span class="line"><span class="comment"># JOB_HOMEï¼šä½œä¸šç›®å½•</span></span><br><span class="line"><span class="comment"># HDFS_PATH :HDFSç›®å½•</span></span><br><span class="line"><span class="comment">#-------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Local</span></span><br><span class="line">JOB_HOME=$(<span class="built_in">cd</span> <span class="string">"<span class="variable">$(dirname "$0")</span>"</span>; <span class="built_in">pwd</span>)</span><br><span class="line">JOB_DATA_PATH=<span class="variable">$&#123;JOB_HOME&#125;</span>/data</span><br><span class="line">PROCESSED_FILE_PATH=<span class="variable">$&#123;JOB_HOME&#125;</span>/pro</span><br><span class="line">SECRETS_CONF_PATH=<span class="variable">$&#123;JOB_HOME&#125;</span>/conf</span><br><span class="line">mkdir -p <span class="variable">$&#123;JOB_HOME&#125;</span>/&#123;data,pro,conf&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># HDFS</span></span><br><span class="line">HADOOP_HOME=/home/<span class="variable">$&#123;USER&#125;</span>/software/hadoop</span><br><span class="line">HDFS_PATH=/hdfs/*/some_log/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------</span></span><br><span class="line"><span class="comment"># å‡½æ•°å:genTargetFileModel</span></span><br><span class="line"><span class="comment"># åŠŸèƒ½:ç”Ÿæˆç›®æ ‡æ–‡ä»¶æ¨¡å¼,éå†HDFSç›®å½•ï¼Œç”Ÿæˆæ—¥ã€æ—¶ã€åˆ†</span></span><br><span class="line"><span class="comment"># å‚æ•°: $1 æ—¥æœŸï¼Œæ ¼å¼ yyyy-MM-dd</span></span><br><span class="line"><span class="comment"># è¿”å›:æ— </span></span><br><span class="line"><span class="comment">#---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">genTargetFileModel</span></span>() &#123;</span><br><span class="line">      <span class="comment"># éå†æ—¥æœŸ</span></span><br><span class="line">      ETL_DT=<span class="variable">$1</span></span><br><span class="line">      CUR_HDFS_PATH=`<span class="built_in">echo</span> <span class="variable">$&#123;HDFS_PATH&#125;</span>|sed <span class="string">"s:*:<span class="variable">$&#123;ETL_DT&#125;</span>:"</span>`</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (( i = 0; i &lt; 24; i++ )); <span class="keyword">do</span></span><br><span class="line">          <span class="keyword">for</span> (( j = 0; j &lt; 12; j++ )); <span class="keyword">do</span></span><br><span class="line">              hour=`<span class="built_in">printf</span> <span class="string">"%02d"</span> <span class="variable">$i</span>`</span><br><span class="line">              minutes=$((j*5))</span><br><span class="line">              minutes=`<span class="built_in">printf</span> <span class="string">"%02d"</span> <span class="variable">$minutes</span>`</span><br><span class="line">              mkdir -p <span class="variable">$&#123;JOB_DATA_PATH&#125;</span>/<span class="variable">$&#123;ETL_DT&#125;</span>/<span class="variable">$&#123;hour&#125;</span>/<span class="variable">$&#123;minutes&#125;</span></span><br><span class="line">          <span class="keyword">done</span></span><br><span class="line">      <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> path <span class="keyword">in</span> `<span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hadoop fs -ls <span class="variable">$&#123;CUR_HDFS_PATH&#125;</span> \</span><br><span class="line">      |awk <span class="string">'&#123;print $8&#125;'</span>`;<span class="keyword">do</span></span><br><span class="line">          <span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;ETL_DT&#125;</span>:<span class="variable">$&#123;path&#125;</span>"</span> &gt;&gt; <span class="variable">$&#123;PROCESSED_FILE_PATH&#125;</span>/pro_<span class="variable">$&#123;ETL_DT&#125;</span>.txt</span><br><span class="line">          <span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hadoop fs -text <span class="variable">$&#123;path&#125;</span> |awk <span class="string">'&#123;</span></span><br><span class="line"><span class="string">              split($0,a," ");</span></span><br><span class="line"><span class="string">              datestr=substr(a[1],11,10);</span></span><br><span class="line"><span class="string">              hourstr=substr(a[2],1,2);</span></span><br><span class="line"><span class="string">              minutestr=substr(a[2],4,2);</span></span><br><span class="line"><span class="string">              minutestr=int(minutestr/5)*5;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">              if(minutestr&lt;10)&#123;</span></span><br><span class="line"><span class="string">                minutestr=("0"minutestr)</span></span><br><span class="line"><span class="string">              &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">              gsub("\"","",a[3])</span></span><br><span class="line"><span class="string">              split(a[3],b,",");</span></span><br><span class="line"><span class="string">              gsub("&#123;|&#125;","",b[3])</span></span><br><span class="line"><span class="string">              gsub("fields:HOSTNAME:","",b[3])</span></span><br><span class="line"><span class="string">              gsub("\\\\t","\t",b[1])</span></span><br><span class="line"><span class="string">              gsub(";","\t",b[1])</span></span><br><span class="line"><span class="string">              lens=split(b[1],tA,"\t")</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">              if(lens==12)&#123;</span></span><br><span class="line"><span class="string">                re=(b[1]"\t\t\t\t\t\t\t\t\t\t\t\t"b[3])</span></span><br><span class="line"><span class="string">              &#125;</span></span><br><span class="line"><span class="string">              if(lens==15)&#123;</span></span><br><span class="line"><span class="string">                re=(b[1]"\t\t\t\t\t\t\t\t\t"b[3])</span></span><br><span class="line"><span class="string">              &#125;</span></span><br><span class="line"><span class="string">              path=(datestr"/"hourstr"/"minutestr"/log_"datestr"_"hourstr"_"minutestr".txt")</span></span><br><span class="line"><span class="string">              print re &gt;&gt; path</span></span><br><span class="line"><span class="string">          &#125;'</span></span><br><span class="line">      <span class="keyword">done</span></span><br><span class="line">      <span class="built_in">unset</span> ETL_DT</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------</span></span><br><span class="line"><span class="comment"># å‡½æ•°å:genTargetFileModel</span></span><br><span class="line"><span class="comment"># åŠŸèƒ½:ç”Ÿæˆç›®æ ‡æ–‡ä»¶æ¨¡å¼,éå†HDFSç›®å½•ï¼Œç”Ÿæˆæ—¥ã€æ—¶ã€åˆ†</span></span><br><span class="line"><span class="comment"># å‚æ•°: $1 æ—¥æœŸï¼Œæ ¼å¼ yyyy-MM-dd</span></span><br><span class="line"><span class="comment"># è¿”å›:æ— </span></span><br><span class="line"><span class="comment">#---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">sendByRysnc</span></span>() &#123;</span><br><span class="line">  ETL_DT=<span class="variable">$1</span></span><br><span class="line">  nohup /usr/bin/rsync -avz \</span><br><span class="line">        --bwlimit=30720 \</span><br><span class="line">        --port=873 \</span><br><span class="line">        --progress \</span><br><span class="line">        --password-file=<span class="variable">$&#123;SECRETS_CONF_PATH&#125;</span>/secret.conf <span class="variable">$&#123;JOB_DATA_PATH&#125;</span>/<span class="variable">$&#123;ETL_DT&#125;</span> <span class="variable">$&#123;user&#125;</span>@<span class="variable">$&#123;ip&#125;</span>::<span class="variable">$&#123;module&#125;</span>/<span class="variable">$&#123;path&#125;</span>/ &gt;&gt; rysnc_send_$(date +%Y%m%d).<span class="built_in">log</span> 2&gt;&amp;1 &amp;</span><br><span class="line">  <span class="built_in">unset</span> ETL_DT</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">mainStart</span></span>() &#123;</span><br><span class="line">    ETL_DT=<span class="variable">$1</span></span><br><span class="line">    genTargetFileModel <span class="variable">$&#123;ETL_DT&#125;</span></span><br><span class="line">    sendByRysnc <span class="variable">$&#123;ETL_DT&#125;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mainStart 2017-09-29</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;awkæ˜¯Shellä¸­ä¸‰å‰‘å®¢ä¹‹ä¸€ï¼ŒåŠŸèƒ½ååˆ†å¼ºå¤§ï¼Œæœ¬æ–‡åˆ†äº«çš„é€šè¿‡ä¸€ä»½ç®¡é“è¾“å…¥ï¼Œå®ç°å¤šç›®å½•è¾“å‡ºã€‚åŸç†ï¼šawkå†…éƒ¨å¯å®ç°ç¼–ç¨‹ï¼Œåœ¨awkå†…éƒ¨å°†è¾“å…¥æµè¿›è¡Œé¢„å¤„ç†åï¼Œåˆ©ç”¨ print ${content} &amp;gt;&amp;gt; ${path}çš„æ–¹å¼å°†æ•°æ®è¿›è¡Œåˆ†æµã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸‹é¢ä¸€ä¸ªå®ä¾‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é€šè¿‡HDFS æ ‡å‡†è¾“å…¥æµï¼Œåœ¨awkä¸­æ ¹æ®æ•°æ®æ—¥æœŸæ—¶é—´åˆ†æµè‡³ä¸åŒçš„æ—¥æœŸæ–‡ä»¶å¤¹ä¸­ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="0x0 å¼€å‘è¯­è¨€" scheme="https://deletee.github.io/categories/0x0-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/"/>
    
      <category term="0x00 ä¸€èµ·æ¥å­¦Shell" scheme="https://deletee.github.io/categories/0x0-%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/0x00-%E4%B8%80%E8%B5%B7%E6%9D%A5%E5%AD%A6Shell/"/>
    
    
      <category term="shell" scheme="https://deletee.github.io/tags/shell/"/>
    
      <category term="awk" scheme="https://deletee.github.io/tags/awk/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ä»“åº“ä¸“é¢˜(5)-ç»´åº¦è®¾è®¡</title>
    <link href="https://deletee.github.io/2018/12/29/dim-design/"/>
    <id>https://deletee.github.io/2018/12/29/dim-design/</id>
    <published>2018-12-29T07:46:30.000Z</published>
    <updated>2019-01-16T13:20:01.579Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;éƒ½è¯´ç»´åº¦è®¾è®¡æ˜¯ç»´åº¦å»ºæ¨¡çš„çµé­‚ï¼Œåœ¨ç»´åº¦å»ºæ¨¡ä¸­ï¼Œæˆ‘ä»¬å°†åº¦é‡æˆä¸ºã€Œäº‹å®ã€ï¼Œå°†ç¯å¢ƒæè¿°ä¸ºã€Œç»´åº¦ã€ï¼Œä½†æ˜¯å¦‚ä½•è®¾è®¡ä¸€ä¸ªå¥½çš„ç»´åº¦æ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦éµå¾ªä¸€å®šçš„æŠ€å·§å’Œæ–¹æ³•ã€‚</p><h3 id="å¦‚ä½•æ ‡è¯†ç»´åº¦ï¼Ÿ"><a href="#å¦‚ä½•æ ‡è¯†ç»´åº¦ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ ‡è¯†ç»´åº¦ï¼Ÿ"></a>å¦‚ä½•æ ‡è¯†ç»´åº¦ï¼Ÿ</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;é€šå¸¸æˆ‘ä»¬éƒ½ä¼šé—®ã€Œè°ã€ä½•æ—¶ã€ä½•åœ°ã€ä¸ºä½•ã€å¦‚ä½•ã€æ¥æè¿°ä¸€ä¸ªäº‹ä»¶è¿‡ç¨‹ï¼ŒåŒæ ·ç»´åº¦å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªäº‹ä»¶æˆ–è€…ä¸šåŠ¡è¿‡ç¨‹çš„è§’åº¦ï¼Œæ¯”å¦‚å•†å“è´­ä¹°<br>è´­ä¹°äººã€è´­ä¹°äº‹ä»¶ã€è´­ä¹°äº§å“ã€è´­ä¹°ä½¿ç”¨çš„è®¾å¤‡ã€è´­ä¹°ä½¿ç”¨çš„IPç­‰å‡ä¸ºç»´åº¦èŒƒç•´</p><a id="more"></a><h3 id="å›´ç»•ä¸šåŠ¡æµç¨‹æ¥æ„å»ºç»´åº¦"><a href="#å›´ç»•ä¸šåŠ¡æµç¨‹æ¥æ„å»ºç»´åº¦" class="headerlink" title="å›´ç»•ä¸šåŠ¡æµç¨‹æ¥æ„å»ºç»´åº¦"></a>å›´ç»•ä¸šåŠ¡æµç¨‹æ¥æ„å»ºç»´åº¦</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è€ƒè™‘åˆ°éœ€æ±‚æ€»æ˜¯å˜æ¢å¤šç«¯ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ä¸å˜ï¼šéœ€æ±‚æ€»æ˜¯å›´ç»•ç€ä¸šåŠ¡æµç¨‹ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬è®¾è®¡ç»´åº¦çš„æ—¶å€™ï¼Œå°±éœ€è¦å……åˆ†ç”Ÿæˆä¸°å¯Œçš„ç»´åº¦åŠå±æ€§</p><h3 id="ç»´åº¦çš„åŸºæœ¬è®¾è®¡æ–¹æ³•ï¼Ÿ"><a href="#ç»´åº¦çš„åŸºæœ¬è®¾è®¡æ–¹æ³•ï¼Ÿ" class="headerlink" title="ç»´åº¦çš„åŸºæœ¬è®¾è®¡æ–¹æ³•ï¼Ÿ"></a>ç»´åº¦çš„åŸºæœ¬è®¾è®¡æ–¹æ³•ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰æ ¹æ®ä¸šåŠ¡æµç¨‹ç¡®å®šä¸»ç»´åº¦</p><p>â€‹         å³åœ¨ä¸šåŠ¡è¿‡ç¨‹ä¸­æ‰¾å‡ºå…³é”®ç»´åº¦ä½œä¸ºä¸»ç»´åº¦ï¼Œåœ¨ä¼ä¸šçº§æ•°æ®ä»“åº“ä¸­ï¼Œå¿…éœ€ç»´åº¦çš„ç»Ÿä¸€å£å¾„ï¼Œä»¥å•†å“ä¸ºä¾‹ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªç»´åº¦å®šä¹‰</p><p>ï¼ˆ2ï¼‰ç¡®å®šç›¸å…³ç»´åº¦</p><p>ï¼ˆ3ï¼‰ç¡®å®šç»´åº¦å±æ€§</p><ul><li>å°½å¯èƒ½ç”Ÿæˆä¸°å¯Œçš„ç»´åº¦å±æ€§</li><li>å°½å¯èƒ½å¤šåœ°ç»™å‡ºåŒ…æ‹¬ä¸€äº›å¯Œæœ‰æ„ä¹‰çš„æ–‡å­—æ€§æè¿°<br>â€‹         ç»´åº¦å»ºæ¨¡ä¸­è¾ƒå¤šç»´åº¦ä»¥IDå½¢æ€å­˜åœ¨ï¼Œä¾‹å¦‚ï¼šå•†å“IDï¼Œä½†æ˜¯å•ä¸€çš„IDåœ¨ä¸šåŠ¡æè¿°éå¸¸æ¬ ç¼ºï¼Œé€šå¸¸IDçš„å«ä¹‰æè¿°ä¹ŸéšIDä½œä¸ºç»´åº¦è®¾è®¡ä¸­çš„ä¸€éƒ¨åˆ†</li><li>åŒºåˆ†æ•°å€¼å‹å±æ€§å’Œäº‹å®<br>â€‹       åœ¨ä¸€äº›ä¸šåŠ¡æ•°æ®ä¸­ï¼Œä¸€äº›æ•°å€¼å‹å­—æ®µæ˜¯ä½œä¸ºç»´åº¦è¿˜æ˜¯ä½œä¸ºåº¦é‡ï¼ˆäº‹å®ï¼‰</li><li>å°½é‡æ²‰æ·€å‡ºé€šç”¨çš„ç»´åº¦å±æ€§<br>â€‹        æœ‰äº›ç»´åº¦å±æ€§å€¼è·å–æ˜¯ç»è¿‡äº†å¤æ‚çš„é€»è¾‘å¤„ç†ï¼Œæˆ–è€…æ˜¯é€šè¿‡è§£ææŸä¸ªå­—æ®µå¾—åˆ°ï¼Œæˆ–æ˜¯å¤šå¼ è¡¨å…³è”å¾—åˆ°ï¼Œå½“è®¾è®¡å‡ºè´Ÿè´£çš„ç»´åº¦æ—¶ï¼Œè‹¥ä¸ä¿ç•™åŸç”Ÿç»´åº¦ï¼Œå°†éš¾ä»¥è¦†ç›–ä¸šåŠ¡çš„å˜åŒ–<br>â€‹        å¹¶ä¸”å±æ€§å€¼æ ¼å¼åšåˆ°ç»Ÿä¸€ï¼Œæ¯”å¦‚æŸæ¨¡å‹Aæ—¶é—´æ ¼å¼ä¸º yyyy-MM-dd HH:mm:ssï¼Œè€Œæ¨¡å‹Bä¸­çš„æ—¶é—´æ ¼å¼ åˆ™æ˜¯ Unix Timestampï¼ŒåŒæ ·ä¹Ÿå°†é€ æˆå£å¾„ä¸ä¸€è‡´</li></ul><p><strong>ç†è§£å…³é”®å­—ï¼šç»´åº¦è®¾è®¡éœ€è¦ä¸¥æ ¼éµå¾ªå¼€å‘è§„èŒƒï¼Œå¯¹å­—æ®µå‘½åã€å«ä¹‰ã€å£å¾„ã€å±æ€§å€¼æ ¼å¼çš„è§„èŒƒï¼Œéœ€ä¸¥æ ¼éµå¾ªã€‚</strong></p><h3 id="å¸¸è§ç»´åº¦è®¾è®¡æ–¹æ³•"><a href="#å¸¸è§ç»´åº¦è®¾è®¡æ–¹æ³•" class="headerlink" title="å¸¸è§ç»´åº¦è®¾è®¡æ–¹æ³•"></a>å¸¸è§ç»´åº¦è®¾è®¡æ–¹æ³•</h3><hr><p><strong>ï¼ˆ1ï¼‰ç¼“æ…¢å˜åŒ–æˆ–å¿«é€Ÿå˜åŒ–</strong></p><p>â€‹         ç»´åº¦ç¼“æ…¢å˜åŒ–</p><ul><li>ä¿®æ”¹ç»´åº¦å±æ€§å€¼      ä¸ä¿ç•™å†å²æ“ä½œï¼Œé€‚ç”¨äºæ— éœ€å…³å¿ƒå†å²ç»´åº¦å€¼çš„æƒ…å½¢ã€‚</li><li>æ’å…¥ä¸€è¡Œ                 ä¿ç•™å†å²æ“ä½œï¼Œç”±äºå¤šäº†æ–°è®°å½•ï¼Œä½¿å¾—ç»´åº¦å…³è”æ—¶ï¼Œä¼šäº§ç”Ÿå†—ä½™è®°å½•ï¼Œå¢åŠ é¢å¤–å­¦ä¹ æˆæœ¬</li><li>æ’å…¥ä¸€åˆ—                 é¢„ç•™ä¸€åˆ—ä½œä¸ºä¸Šä¸€æ¬¡ç»´åº¦å€¼çš„ä¿ç•™ï¼Œé€‚ç”¨äºåªéœ€è¦æŸ¥çœ‹ä¸Šä¸€æ¬¡çš„ç»´åº¦å€¼æƒ…å½¢</li><li>å¿«ç…§ç»´åº¦                 å³å°†æ¯å¤©çš„å˜æ›´å­˜å‚¨ä¸ºä¸€ä¸ªå¿«ç…§ï¼Œåœ¨ç»´åº¦è¡¨è¾ƒå°æ—¶ï¼Œå¯ä»¥å¿½ç•¥å­˜å‚¨</li><li>æé™å­˜å‚¨                 é€šè¿‡æ‹‰é“¾è¡¨çš„å½¢å¼ï¼Œè®°å½•ç»´åº¦çš„ç¼“æ…¢å˜åŒ–ï¼Œä½†æ˜¯æ³¨æ„ï¼Œç»´åº¦è¡¨ä¸­æœ‰é¢‘ç¹å˜åŒ–çš„å­—æ®µã€‚</li></ul><p>â€‹         ç»´åº¦å¿«é€Ÿå˜åŒ–</p><p>â€‹         <strong>æ­¤ç±»é—®é¢˜åˆç§°å¾®å‹ç»´åº¦ï¼Œ</strong>ä¸»è¦æ˜¯ä¸ºäº†è§£å†³å¿«å˜è¶…å¤§ç»´åº¦ï¼ˆrapidly changing monster dimensionï¼‰,é¡¾åæ€ä¹‰ï¼Œåœ¨æŸäº›ç»´åº¦è¡¨ä¸­ï¼Œå¤§é‡ç»´åº¦è¿›è¡Œç¼“æ…¢å˜åŒ–ç”šè‡³æ²¡æœ‰å˜åŒ–ï¼Œä½†æ˜¯æœ‰å°‘é‡çš„ç»´åº¦é¢‘ç¹çš„å‘ç”Ÿå˜åŒ–ï¼Œæ­¤ç§æƒ…å½¢ä¸‹ï¼Œè‹¥ä½¿ç”¨ç¼“æ…¢å˜åŒ–çš„æ–¹å¼è¿›è¡Œå¤„ç†çš„è¯ï¼Œå°†æ¶ˆè€—å¤§é‡èµ„æºã€‚ç”±æ­¤è§£å†³åŠæ³•æ˜¯ï¼š</p><p>â€‹         å°†ç»´åº¦å±æ€§å€¼é¢‘ç‡å˜åŒ–æ¯”è¾ƒé«˜çš„å­—æ®µæå–å‡ºæ¥ï¼Œå»ºç«‹ä¸€ä¸ªå•ç‹¬çš„ç»´åº¦è¡¨ï¼Œåªéœ€ç»´åº¦è¿™ä¸€å¼ å¿«é€Ÿå˜åŒ–çš„ç»´åº¦è¡¨å³å¯ã€‚</p><p><strong>ï¼ˆ2ï¼‰ç»´åº¦çš„å±‚æ¬¡ç»“æ„</strong></p><p>â€‹           <strong>ä¹Ÿæ˜¯é€šå¸¸æ‰€è¯´çš„ è§„èŒƒåŒ–å’Œåè§„èŒƒåŒ–</strong></p><p>â€‹          åœ¨ç»´åº¦è®¾è®¡çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ç»´åº¦çš„å±‚æ¬¡é—®é¢˜ï¼Œæ¯”å¦‚ï¼šå•†å“é€šå¸¸ä¼šæœ‰ä¸€çº§åˆ†ç±»ã€äºŒçº§åˆ†ç±»ã€ä¸‰çº§åˆ†ç±»æ­¤ç§æƒ…å½¢ï¼Œå¯¹äºè¿™æ ·çš„ç»´åº¦å¤„ç†æ–¹å¼ï¼Œé€šå¸¸æœ‰ä¸¤ç§åšæ³•ï¼š</p><ul><li>æ˜Ÿç³»æ¨¡å‹   å°†ç»´åº¦å±‚æ¬¡é—®é¢˜æ‰å¹³åŒ–ï¼Œå°†å±‚æ¬¡çš„ç»´åº¦é¡¹è¿›è¡Œæ‰å¹³å¤„ç†ï¼Œä¾‹å¦‚æœ‰å¦‚ä¸‹ç»´åº¦ï¼šsku_idï¼Œcategory_lv1, category_lv2, category_lv3 â€¦</li><li>é›ªèŠ±æ¨¡å‹   å°†å±‚çº§ç»´åº¦æç‚¼å‡ºæ¥å•ç‹¬ä½œä¸ºä¸€å¼ æ–°çš„ç»´åº¦è¡¨</li></ul><p>ä¸Šæ–‡å·²ç»é˜è¿°è¿‡ï¼Œä¸¤ç§æ¨¡å‹çš„åˆ©å¼Šï¼Œåœ¨æ–°äº’è”ç½‘çš„å¤§æ•°æ®å¹³å°åŸºç¡€ä¸Šï¼Œå­˜å‚¨ä¹Ÿå˜çš„éå¸¸å»‰ä»·ï¼Œé€šå¸¸æ˜¯é€‰ç”¨æ˜Ÿç³»æ¨¡å‹è§£å†³ç»´åº¦å±‚æ¬¡çš„é—®é¢˜</p><p>ï¼ˆ3ï¼‰ç»´åº¦ä¸€è‡´æ€§</p><p>In data warehousing, a conformed dimension is a dimension that has the same meaning to every fact with which it relates. Conformed dimensions allow facts and measures to be categorized and described in the same way across multiple facts and/or data marts, ensuring consistent reporting across the enterprise.</p><p>â€‹         ç»´åº¦ä¸€è‡´æ€§æ˜¯å¦‚æ­¤è§£é‡Šçš„ï¼Œåœ¨æ•°æ®ä»“åº“ä¸­ï¼Œä¸€è‡´çš„ç»´åº¦æ˜¯ä¸å…¶ç›¸å…³çš„æ¯ä¸ªäº‹å®å…·æœ‰ç›¸åŒå«ä¹‰çš„ç»´åº¦ã€‚ ä¸€è‡´çš„ç»´åº¦å…è®¸åœ¨å¤šä¸ªäº‹å®å’Œ/æˆ–æ•°æ®é›†å¸‚ä¸­ä»¥ç›¸åŒçš„æ–¹å¼å¯¹äº‹å®å’Œåº¦é‡è¿›è¡Œåˆ†ç±»å’Œæè¿°ï¼Œä»è€Œç¡®ä¿æ•´ä¸ªä¼ä¸šçš„ä¸€è‡´æŠ¥å‘Šã€‚</p><p>â€‹         é€šå¸¸åœ¨æ•°æ®ä»“åº“å¼€å‘è¿‡ç¨‹ä¸­å¦‚ä½•ä¿è¯ç»´åº¦çš„ä¸€è‡´æ€§å‘¢ï¼Ÿ</p><ul><li><p>ç»´åº¦çš„å®šä¹‰éœ€è¦éµå¾ªå‘½åã€å–å€¼ç­‰è§„èŒƒ</p></li><li><p>ç»´åº¦éœ€é€šè¿‡å…ƒæ•°æ®è¿›è¡Œç®¡ç†  é‡‡ç”¨ç»´åº¦å»ºæ¨¡ï¼Œæ„å‘³ç€å»ºä»“è¿‡ç¨‹æ˜¯è‡ªä¸‹è€Œä¸Šçš„ï¼Œå„ä¸ªæ•°æ®é›†å¸‚å„è‡ªå¼€å‘ï¼Œé‚£ä¹ˆå¦‚ä½•ä¿è¯ä¼ä¸šçº§æ•°æ®ä»“åº“ç»´åº¦ä¸€è‡´æ€§ï¼Œåˆ™éœ€è¦ç»Ÿä¸€çš„å…ƒæ•°æ®è¿›è¡Œç®¡ç†</p></li></ul><p>ç»´åº¦å»ºæ¨¡çš„æ•°æ®ä»“åº“ä¸­ï¼Œæœ‰ä¸€ä¸ªæ¦‚å¿µå«Conformed Dimensionï¼Œä¸­æ–‡ä¸€èˆ¬ç¿»è¯‘ä¸ºâ€œä¸€è‡´æ€§ç»´åº¦â€ã€‚ä¸€è‡´æ€§ç»´åº¦æ˜¯Kimballçš„å¤šç»´ä½“ç³»ç»“æ„ï¼ˆMDï¼‰ä¸­çš„ä¸‰ä¸ªå…³é”®æ€§æ¦‚å¿µä¹‹ä¸€ï¼Œå¦ä¸¤ä¸ªæ˜¯æ€»çº¿æ¶æ„ï¼ˆBus Architectureï¼‰å’Œä¸€è‡´æ€§äº‹å®ï¼ˆConformed Factï¼‰ã€‚</p><p>åœ¨å¤šç»´ä½“ç³»ç»“æ„ä¸­ï¼Œæ²¡æœ‰ç‰©ç†ä¸Šçš„æ•°æ®ä»“åº“ï¼Œç”±ç‰©ç†ä¸Šçš„æ•°æ®é›†å¸‚ç»„åˆæˆé€»è¾‘ä¸Šçš„æ•°æ®ä»“åº“ã€‚è€Œä¸”æ•°æ®é›†å¸‚çš„å»ºç«‹æ˜¯å¯ä»¥é€æ­¥å®Œæˆçš„ï¼Œæœ€ç»ˆç»„åˆåœ¨ä¸€èµ·ï¼Œæˆä¸ºä¸€ä¸ªæ•°æ®ä»“åº“ã€‚å¦‚æœåˆ†æ­¥å»ºç«‹æ•°æ®é›†å¸‚çš„è¿‡ç¨‹å‡ºç°äº†é—®é¢˜ï¼Œæ•°æ®é›†å¸‚å°±ä¼šå˜æˆå­¤ç«‹çš„é›†å¸‚ï¼Œä¸èƒ½ç»„åˆæˆæ•°æ®ä»“åº“ï¼Œè€Œä¸€è‡´æ€§ç»´åº¦çš„æå‡ºæ­£å¼ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>ä¸€è‡´æ€§ç»´åº¦çš„èŒƒå›´æ˜¯æ€»çº¿æ¶æ„ä¸­çš„ç»´åº¦ï¼Œå³å¯èƒ½ä¼šåœ¨å¤šä¸ªæ•°æ®é›†å¸‚ä¸­éƒ½å­˜åœ¨çš„ç»´åº¦ï¼Œè¿™ä¸ªèŒƒå›´çš„é€‰å–éœ€è¦æ¶æ„å¸ˆæ¥å†³å®šã€‚ä¸€è‡´æ€§ç»´åº¦çš„å†…å®¹å’Œæ™®é€šç»´åº¦å¹¶æ²¡æœ‰æœ¬è´¨ä¸ŠåŒºåˆ«ï¼Œéƒ½æ˜¯ç»è¿‡æ•°æ®æ¸…æ´—å’Œæ•´åˆåçš„ç»“æœã€‚</p><p>ä¸€è‡´æ€§ç»´åº¦å»ºç«‹çš„åœ°ç‚¹æ˜¯å¤šç»´ä½“ç³»ç»“æ„çš„åå°ï¼ˆBack Roomï¼‰ï¼Œå³æ•°æ®å‡†å¤‡åŒºã€‚åœ¨å¤šç»´ä½“ç³»ç»“æ„çš„æ•°æ®ä»“åº“é¡¹ç›®ç»„å†…éœ€è¦æœ‰ä¸“é—¨çš„ç»´åº¦è®¾è®¡å¸ˆï¼Œä»–çš„èŒè´£å°±æ˜¯å»ºç«‹ç»´åº¦å’Œç»´æŠ¤ç»´åº¦çš„ä¸€è‡´æ€§ã€‚åœ¨åå°å»ºç«‹å¥½çš„ç»´åº¦åŒæ­¥å¤åˆ¶åˆ°å„ä¸ªæ•°æ®é›†å¸‚ã€‚è¿™æ ·æ‰€æœ‰æ•°æ®é›†å¸‚çš„è¿™éƒ¨åˆ†ç»´åº¦éƒ½æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚å»ºç«‹æ–°çš„æ•°æ®é›†å¸‚æ—¶ï¼Œéœ€è¦åœ¨åå°è¿›è¡Œä¸€è‡´æ€§ç»´åº¦å¤„ç†ï¼Œæ ¹æ®æƒ…å†µæ¥å†³å®šæ˜¯å¦æ–°å¢å’Œä¿®æ”¹ä¸€è‡´æ€§ç»´åº¦ï¼Œç„¶ååŒæ­¥å¤åˆ¶åˆ°å„ä¸ªæ•°æ®é›†å¸‚ã€‚è¿™æ˜¯ä¸åŒæ•°æ®é›†å¸‚ç»´åº¦ä¿æŒä¸€è‡´çš„è¦ç‚¹ã€‚</p><p>åœ¨åŒä¸€ä¸ªé›†å¸‚å†…ï¼Œä¸€è‡´æ€§ç»´åº¦çš„æ„æ€æ˜¯ä¸¤ä¸ªç»´åº¦å¦‚æœæœ‰å…³ç³»ï¼Œè¦ä¹ˆå°±æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œè¦ä¹ˆå°±æ˜¯ä¸€ä¸ªç»´åº¦åœ¨æ•°å­¦æ„ä¹‰ä¸Šæ˜¯å¦ä¸€ä¸ªç»´åº¦çš„å­é›†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå»ºç«‹æœˆç»´åº¦è¯ï¼Œæœˆç»´åº¦çš„å„ç§æè¿°å¿…é¡»ä¸æ—¥æœŸç»´åº¦ä¸­çš„å®Œå…¨ä¸€è‡´ï¼Œæœ€å¸¸ç”¨çš„åšæ³•å°±æ˜¯åœ¨æ—¥æœŸç»´åº¦ä¸Šå»ºç«‹è§†å›¾ç”Ÿæˆæœˆç»´åº¦ã€‚è¿™æ ·æœˆç»´åº¦å°±å¯ä»¥æ˜¯æ—¥æœŸç»´åº¦çš„å­é›†ï¼Œåœ¨åç»­é’»å–ç­‰æ“ä½œæ—¶å¯ä»¥ä¿æŒä¸€è‡´ã€‚å¦‚æœç»´åº¦è¡¨ä¸­çš„æ•°æ®é‡è¾ƒå¤§ï¼Œå‡ºäºæ•ˆç‡çš„è€ƒè™‘ï¼Œåº”è¯¥å»ºç«‹ç‰©åŒ–è§†å›¾æˆ–è€…å®é™…çš„ç‰©ç†è¡¨ã€‚</p><p>è¿™æ ·ï¼Œç»´åº¦ä¿æŒä¸€è‡´åï¼Œäº‹å®å°±å¯ä»¥ä¿å­˜åœ¨å„ä¸ªæ•°æ®é›†å¸‚ä¸­ã€‚è™½ç„¶åœ¨ç‰©ç†ä¸Šæ˜¯ç‹¬ç«‹çš„ï¼Œä½†åœ¨é€»è¾‘ä¸Šç”±ä¸€è‡´æ€§ç»´åº¦ä½¿æ‰€æœ‰çš„æ•°æ®é›†å¸‚æ˜¯è”ç³»åœ¨ä¸€èµ·ï¼Œéšæ—¶å¯ä»¥è¿›è¡Œäº¤å‰æ¢å¯Ÿç­‰æ“ä½œï¼Œä¹Ÿå°±ç»„æˆäº†æ•°æ®ä»“åº“ã€‚</p><p>ï¼ˆ4ï¼‰ç»´åº¦æ•´åˆå’Œæ‹†åˆ†</p><p>â€‹         å› ä¸ºæ•°æ®ä»“åº“çš„æ•°æ®æºè‡ªå„ä¸ªç³»ç»Ÿï¼Œæœ‰ä»ç§»åŠ¨ç«¯ï¼Œwebç«¯ï¼ŒPCç«¯ï¼Œæ¯ä¸ªæ®µçš„æ•°æ®ç»“æ„å·®å¼‚è¾ƒå¤§ï¼Œå³ä¾¿æ˜¯åŒä¸€ç«¯ï¼Œå¯èƒ½å› ä¸ºä¸šåŠ¡æ‹†åˆ†ï¼Œå­—æ®µçš„å±æ€§å€¼ä¹Ÿä¸å®Œå…¨ä¸€è‡´ã€‚</p><p>â€‹         ä¾‹å¦‚ï¼šAç³»ç»Ÿ æŸå­—æ®µå€¼ç”¨ 1/0è¡¨ç¤º tokenæ˜¯å¦æœ‰æ•ˆï¼ŒBç³»ç»Ÿåˆ™ä½¿ç”¨F/Tè¡¨ç¤ºæ˜¯å¦æœ‰æ•ˆ</p><p>â€‹         é‚£ä¹ˆï¼Œåœ¨æ­¤ç§æƒ…å½¢ä¸‹ï¼Œéœ€è¦è¿›è¡Œç»´åº¦æ•´åˆã€‚ç»´åº¦æ•´åˆéœ€è¦éµå¾ªå¦‚ä¸‹è§„èŒƒï¼š</p><ul><li>å‘½åè§„èŒƒç»Ÿä¸€</li><li>å­—æ®µç±»å‹ç»Ÿä¸€</li><li>å±æ€§å€¼ç¼–ç å’Œå«ä¹‰ç»Ÿä¸€</li></ul><p>â€‹      å¦å¤–æœ‰ä¸€ç§åœºæ™¯ï¼Œå› ä¸ºç³»ç»Ÿå·®å¼‚å¤ªå¤§ï¼Œè€Œæ— æ³•è¿›è¡Œç»´åº¦æ•´åˆï¼Œæ­¤æ—¶éœ€è¦è¿›è¡Œç»´åº¦çš„æ‹†åˆ†</p><p>â€‹      ä¾‹å¦‚ï¼šåŠ æ²¹ç«™ä¸»è¦çš„å•†å“æ˜¯åˆ™æ˜¯æ²¹ï¼ŒåŠ æ²¹ç«™å†…åŒæ ·ä¹Ÿæœ‰é›¶å”®åº—ï¼Œå”®å–ä¸€äº›æ—¥å¸¸ç™¾è´§ï¼Œæ²¹ æœ‰ 92ï¼Œ95ï¼Œ98ç­‰ç»´åº¦å±æ€§ï¼Œæ—¥å¸¸ç™¾è´§çš„é€šå¸¸ æ¶‰åŠçš„ è¿›é”€å­˜ï¼Œå•ä»·ç­‰</p><p>â€‹                 ä¸¤ç§å•†å“åœ¨ç»´åº¦å·®å¼‚è¿‡å¤§ï¼Œé€šå¸¸çš„åšæ³•ï¼ŒåŠ æ²¹ç«™çš„ä¸»è¥ä¸šåŠ¡æ˜¯å”®å–æ²¹å“ï¼Œä»è€Œå»ºç«‹ä¸»è¦çš„å•†å“ç»´åº¦è¡¨ï¼Œå¦å¤–å»ºç«‹ä¸€ä¸ªé›¶å”®å•†å“ç»´åº¦è®°å½•è¡¨</p><p>â€‹      <strong>ç†è§£å…³é”®è¯ï¼šå„ä¸ªä¸šåŠ¡å·®å¼‚ç‹¬ç‰¹æ€§è¾ƒå¤§çš„ä¸šåŠ¡å„è‡ªå»ºç«‹ç‹¬ç«‹çš„ä¸¤ä¸ªç»´åº¦è¡¨</strong></p><p>ï¼ˆ5ï¼‰æ‚é¡¹ç»´åº¦çš„å¤„ç†æ–¹æ³•</p><ul><li><strong>é€€åŒ–ç»´åº¦</strong><br>â€‹       æ‰€è°“é€€åŒ–ç»´åº¦ï¼ˆdegenerate dimensionï¼‰ï¼Œæ˜¯æŒ‡åœ¨å®æ–½è¡¨ä¸­é‚£äº›çœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªäº‹å®è¡¨çš„ä¸€ä¸ªç»´åº¦å…³é”®å­—ï¼Œä½†å®é™…ä¸Šæ²¡æœ‰å¯¹åº”çš„ç»´åº¦å­—æ®µã€‚é€€åŒ–ç»´åº¦ä¸€èˆ¬éƒ½æ˜¯äº‹åŠ¡çš„ç¼–å·ï¼Œå¦‚è´­ç‰©å°ç¥¨ç¼–å·ï¼Œå‘ç¥¨ç¼–å·</li><li><strong>è¡Œä¸ºç»´åº¦</strong><br>â€‹       è¡Œä¸ºç»´åº¦æ˜¯åŸºäºè¿‡å»ç»´åº¦æˆå‘˜çš„è¡Œä¸ºè¿›è¡Œåˆ†ç»„æˆ–è€…è¿‡æ»¤äº‹å®çš„åŠæ³•ã€‚è¡Œä¸ºç»´åº¦å³å°†äº‹å®è½¬åŒ–ä¸ºç»´åº¦ï¼Œä»¥ç¡®ä¿è·å¾—æ›´å¤šçš„åˆ†æèƒ½åŠ›<br>â€‹       ä¾‹å¦‚ï¼šè´­ä¹°æ¬¡æ•°è¶…è¿‡30æ¬¡ï¼Œ30æ¬¡è‡³100æ¬¡ï¼Œè¶…è¿‡100æ¬¡ ä½œä¸ºç»´åº¦å€¼</li><li><strong>è§’è‰²ç»´åº¦</strong><br>â€‹       è§’è‰²ç»´åº¦é€šå¸¸æ˜¯ä¸€ä¸ªä¸šåŠ¡æ´»åŠ¨æœ‰å¤šä¸ªè§’è‰²å‚ä¸ï¼Œä¾‹å¦‚ï¼šåŠç†é“¶è¡Œä¸šåŠ¡ï¼Œæœ‰å®¢æˆ·ç»ç†ï¼Œå®¡æ‰¹äººç­‰å‚ä¸ä¸¤ä¸ªåŠä»¥ä¸Šè§’è‰²ï¼Œè€Œè¿™äº›è§’è‰²å‡å±äºå‘˜å·¥ç»´åº¦è¡¨ï¼Œå¯¹äºæ­¤ç§æƒ…å½¢ï¼Œæ²¡æœ‰å¿…è¦æ ¹æ®è§’è‰²å»ºç«‹å¤šä¸ªç»´åº¦è¡¨ï¼Œè€Œæ˜¯å¯ä»¥é€šè¿‡å»ºç«‹è§†å›¾çš„æ–¹å¼è¾¾åˆ°ç›®çš„ã€‚</li><li><strong>å¤šå€¼ç»´åº¦</strong><br>â€‹       <strong>å¤šå€¼ç»´åº¦ä¸€èˆ¬ä¼šå‡ºç°å¤šå¯¹å¤šçš„å…³ç³»ä¸­ï¼Œä¾‹å¦‚ï¼šè´­ä¹°æˆ¿äº§ï¼Œä¼šæœ‰å¤«å¦»ä¸¤äººå…±åŒæŒæœ‰ï¼Œä¸€æ¬¡ä¸‹å•ï¼Œå¤šä¸ªå­è®¢å•</strong></li></ul><p>â€‹       æœ‰å¦‚ä¸‹ä¸‰ç§æ–¹æ³•ï¼š</p><p>â€‹                1ï¼‰é™ä½äº‹å®è¡¨çš„ç²’åº¦      æ¯ä¸€ä¸ªäº‹å®éƒ½æ ‡æ³¨æœ€å°ç²’åº¦ï¼Œä¾‹å¦‚ï¼šå‰å°ä¸šåŠ¡ä¸å•†ä¸šæ™ºèƒ½å…³æ³¨äº¤æ˜“å­è®¢å•ï¼Œæ¯ä¸€ä¸ªå­è®¢å•ä¸€ä¸ªäº‹å®ï¼Œåªä¼šæœ‰ä¸€ä¸ªå•†å“ä¸ä¹‹å¯¹åº”ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œäº‹å®è¡¨çš„ç²’åº¦æ˜¯ä¸èƒ½é™ä½çš„ï¼Œå½“å¼ºè¡Œé™ä½ä¹‹åï¼Œé‚£ä¹ˆè®¢å•äº‹å®åˆ™å‘ç”Ÿæ”¹å˜ï¼Œå¯¹äºç»Ÿè®¡æ¯æ—¥è®¢å•é‡è®¡ç®—ï¼Œåˆ™å¤æ‚åº¦å˜é«˜ï¼Œå¢åŠ å­¦ä¹ å’Œè®¡ç®—æˆæœ¬</p><p>â€‹                2ï¼‰é‡‡ç”¨å¤šå­—æ®µ   ä¾‹å¦‚ï¼šåœ¨ä¹°æˆ¿åˆåŒä¸­ï¼Œæ ‡æ³¨ç¬¬ä¸€ä¹°å—äººï¼Œç¬¬äºŒä¹°å—äººï¼Œå¯é¡ºä½å¢åŠ å†—ä½™çš„å­—æ®µä½</p><p>â€‹               3ï¼‰ä½¿ç”¨å¸¸ç”¨çš„æ¡¥æ¥è¡¨      ä¾‹å¦‚ï¼šè®¢å•ä¸­ï¼Œç¡®å®šçˆ¶è®¢å•ä¸ºç²’åº¦ï¼Œå»ºç«‹çˆ¶è®¢å•ä¸å­è®¢å•çš„æ¡¥æ¥è¡¨ï¼Œå¦å»ºç«‹å­è®¢å•ä¸å•†å“çš„ç»´åº¦å…³ç³»è¡¨ï¼Œæ¡¥æ¥è¡¨åŒ…å«äº‹å®è¡¨å…³è”çš„åˆ†ç»„KEYï¼Œä»¥åŠä½œä¸ºä¹°å—æ–¹çš„ç»´åº¦è¡¨å¤–é”®IDï¼Œæœ‰å¤šä¸ªä¹°å—æ–¹ï¼Œåˆ™æœ‰åœ¨ç›¸åŒçš„KEYä¸‹æœ‰å¤šæ¡è®°å½•ï¼Œæ¡¥æ¥è¡¨éœ€è¦æ›´å¤šçš„è®¡ç®—ï¼Œä¹Ÿå¯èƒ½ä¼šé€ æˆåŒé‡è®¡ç®—ï¼Œä¾‹å¦‚ï¼Œä¹°å—äºº1ç±è´¯ä¸ºå±±ä¸œï¼Œä¹°å—äºº2ç±è´¯ä¸ºæµ™æ±Ÿï¼Œé‚£ä¹ˆå½“åˆ†åˆ«ç»Ÿè®¡å¤–åœ°å±±ä¸œçš„è´­æˆ¿æ•°ï¼Œå’Œæµ™æ±Ÿçš„è´­æˆ¿æ•°ï¼Œåˆ™äº§ç”Ÿäº†å¤šé‡è®¡ç®—ã€‚åŒé‡è®¡ç®—ä¸ä¸€å®šæ˜¯é”™è¯¯ï¼Œå¯¹äºä¸€äº›ä¸šåŠ¡éœ€æ±‚æ˜¯åˆç†çš„ï¼Œä½†å¯¹äºå¦ä¸€äº›ä¸šåŠ¡éœ€æ±‚ï¼Œåˆ™éœ€è¦è§„é¿ã€‚</p><p>â€‹         <strong>ç†è§£å…³é”®å­—ï¼š</strong>å½“å‰å¤§æ•°æ®å¹³å°æ”¯æŒå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå°†å¤šä¸ªä¹°å—äººå¯ä»¥ä½œä¸ºæ•°æ®ç»„ç»“æ„å­˜å…¥ä¸€ä¸ªå­—æ®µä¸­ï¼Œä½¿ç”¨key:valueçš„å½¢å¼ï¼Œå½“ç„¶æ­¤ç§æ–¹æ³•éœ€å¢åŠ ä¸€å®šçš„è®¡ç®—æˆæœ¬ï¼Œå±äºéè§„èŒƒåŒ–æ“ä½œã€‚</p><ul><li><strong>æ‚é¡¹ç»´åº¦ï¼ˆjunk dimensionï¼‰</strong><br>â€‹      <strong>æ‚é¡¹ç»´åº¦å°±æ˜¯ä¸€ç§åŒ…å«çš„æ•°æ®å…·æœ‰å¾ˆå°‘å¯èƒ½å€¼çš„ç»´åº¦</strong><br>â€‹      <strong>å½“å®šä¹‰å¥½å„ç§ç»´åº¦åï¼Œä¼šå‘ç°ä¸€äº›å°èŒƒå›´ç»´åº¦å–ç¦»æ•£å€¼æˆ–è€…æ ‡å¿—ä½çš„å­—æ®µï¼Œä½†æ˜¯è¿™æ ·çš„ç»´åº¦åˆå¾ˆéš¾é€€åŒ–å­˜å‚¨åœ¨äº‹å®è¡¨ä¸­ï¼Œå¯èƒ½ä¼šé€ æˆäº‹å®è¡¨è¿‡å¤§ï¼Œè‹¥æœå•ç‹¬å»ºç«‹ç»´åº¦è¡¨è¿›è¡Œå…³è”ï¼Œé€šè¿‡å¤–é”®å…³è”ï¼Œä¼šå‡ºç°ç»´åº¦è¿‡å¤šçš„æƒ…å†µï¼Œå¦‚æœå°†è¿™äº›å­—æ®µåˆ é™¤ï¼Œåˆ™ä¸šåŠ¡æ–¹ä¸åŒæ„ã€‚</strong><br> è¿™æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯å»ºç«‹æ‚é¡¹ç»´åº¦ï¼Œå°†è¿™äº›å­—æ®µå»ºç«‹åˆ°ä¸€ä¸ªç»´åº¦è¡¨ä¸­ï¼Œåœ¨äº‹å®è¡¨ä¸­åªéœ€ä¿å­˜ä¸€ä¸ªå¤–é”®ã€‚<strong>å‡ ä¸ªå­—æ®µçš„ä¸åŒå–å€¼ç»„æˆä¸€æ¡è®°å½•ï¼Œç”Ÿæˆä»£ç†é”®ï¼Œå­˜å…¥ç»´åº¦è¡¨</strong>ï¼Œå¹¶å°†è¯¥ä»£ç†é”®ä¿å­˜å…¥ç›¸åº”çš„äº‹å®è¡¨å­—æ®µã€‚å»ºè®®ä¸è¦ç›´æ¥ä½¿ç”¨æ‰€æœ‰çš„ç»„åˆç”Ÿæˆå®Œæ•´çš„æ‚é¡¹ç»´åº¦è¡¨ï¼Œåœ¨æŠ½å–æ—¶é‡åˆ°æ–°çš„ç»„åˆæ—¶ç”Ÿæˆç›¸åº”è®°å½•å³å¯ã€‚æ‚é¡¹ç»´åº¦çš„ETLè¿‡ç¨‹æ¯”ä¸€èˆ¬çš„ç»´åº¦ç•¥ä¸ºå¤æ‚ã€‚</li></ul><p><strong>å‡ ä¸ªå­—æ®µçš„ä¸åŒå–å€¼ç»„æˆä¸€æ¡è®°å½•ï¼Œç”Ÿæˆä»£ç†é”®ï¼Œå­˜å…¥ç»´åº¦è¡¨ï¼š å³å°†å‡ ä¸ªæ‚é¡¹ç»´åº¦çš„ç»„åˆå»ºç«‹æ‚é¡¹ç»´åº¦è¡¨ï¼Œç”Ÿæˆä¸€ä¸ªä»£ç†é”®ï¼Œæ¤å…¥äº‹å®è¡¨ä¸­</strong>            </p><ul><li><strong>å¾®å‹ç»´åº¦</strong></li></ul><p><strong>ç†è§£å…³é”®å­—2ï¼š</strong></p><p>â€‹         <strong>ç¬¬ä¸€ï¼šé¿å…ç»´åº¦è¿‡åº¦å¢é•¿     æŸäº›ç»´åº¦å€¼å˜åŒ–è¿‡é«˜ï¼Œå¦‚æœç»´åº¦è¡¨ä½¿ç”¨äº†æ‹‰é“¾æé™å­˜å‚¨ï¼Œé‚£è¾¹è¿‡åº¦å¢é•¿æˆ–è€…å˜åŒ–çš„ç»´åº¦ï¼Œå°†ä½¿å¾—æé™å­˜å‚¨æ•ˆç‡å·®</strong></p><p>â€‹         <strong>ç¬¬äºŒï¼šé¿å…è€¦åˆåº¦è¿‡é«˜        ä¾‹å¦‚ï¼šå–å®¶çš„ä¸»è¥é¡¹ç›®ï¼ŒåŠ å·¥é€»è¾‘å¼‚å¸¸å¤æ‚ï¼Œå¦‚æœèåˆè¿›ç°æœ‰çš„å–å®¶ç»´è¡¨ä¸­ï¼Œé‚£ä¹ˆè¿‡å¤šçš„ä¸šåŠ¡è€¦åˆå°†ä¼šå¯¼è‡´å–å®¶ç»´åº¦éš¾ä»¥ç»´æŠ¤ï¼Œåº”é€‚å½“åšç»´åº¦æ‹†åˆ†</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;éƒ½è¯´ç»´åº¦è®¾è®¡æ˜¯ç»´åº¦å»ºæ¨¡çš„çµé­‚ï¼Œåœ¨ç»´åº¦å»ºæ¨¡ä¸­ï¼Œæˆ‘ä»¬å°†åº¦é‡æˆä¸ºã€Œäº‹å®ã€ï¼Œå°†ç¯å¢ƒæè¿°ä¸ºã€Œç»´åº¦ã€ï¼Œä½†æ˜¯å¦‚ä½•è®¾è®¡ä¸€ä¸ªå¥½çš„ç»´åº¦æ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦éµå¾ªä¸€å®šçš„æŠ€å·§å’Œæ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å¦‚ä½•æ ‡è¯†ç»´åº¦ï¼Ÿ&quot;&gt;&lt;a href=&quot;#å¦‚ä½•æ ‡è¯†ç»´åº¦ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;å¦‚ä½•æ ‡è¯†ç»´åº¦ï¼Ÿ&quot;&gt;&lt;/a&gt;å¦‚ä½•æ ‡è¯†ç»´åº¦ï¼Ÿ&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;é€šå¸¸æˆ‘ä»¬éƒ½ä¼šé—®ã€Œè°ã€ä½•æ—¶ã€ä½•åœ°ã€ä¸ºä½•ã€å¦‚ä½•ã€æ¥æè¿°ä¸€ä¸ªäº‹ä»¶è¿‡ç¨‹ï¼ŒåŒæ ·ç»´åº¦å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªäº‹ä»¶æˆ–è€…ä¸šåŠ¡è¿‡ç¨‹çš„è§’åº¦ï¼Œæ¯”å¦‚å•†å“è´­ä¹°&lt;br&gt;è´­ä¹°äººã€è´­ä¹°äº‹ä»¶ã€è´­ä¹°äº§å“ã€è´­ä¹°ä½¿ç”¨çš„è®¾å¤‡ã€è´­ä¹°ä½¿ç”¨çš„IPç­‰å‡ä¸ºç»´åº¦èŒƒç•´&lt;/p&gt;
    
    </summary>
    
      <category term="0x1 æ•°æ®ä»“åº“" scheme="https://deletee.github.io/categories/0x1-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/"/>
    
      <category term="0x11 æ•°æ®å»ºæ¨¡" scheme="https://deletee.github.io/categories/0x1-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/0x11-%E6%95%B0%E6%8D%AE%E5%BB%BA%E6%A8%A1/"/>
    
    
      <category term="å»ºæ¨¡" scheme="https://deletee.github.io/tags/%E5%BB%BA%E6%A8%A1/"/>
    
      <category term="æ•°æ®ä»“åº“" scheme="https://deletee.github.io/tags/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ä»“åº“ä¸“é¢˜(4)-ç»´åº¦å»ºæ¨¡</title>
    <link href="https://deletee.github.io/2018/12/28/dim-modeling/"/>
    <id>https://deletee.github.io/2018/12/28/dim-modeling/</id>
    <published>2018-12-28T07:46:30.000Z</published>
    <updated>2019-01-16T13:20:01.568Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1ã€ä»€ä¹ˆæ˜¯ç»´åº¦å»ºæ¨¡ï¼Ÿ"><a href="#1ã€ä»€ä¹ˆæ˜¯ç»´åº¦å»ºæ¨¡ï¼Ÿ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯ç»´åº¦å»ºæ¨¡ï¼Ÿ"></a>1ã€ä»€ä¹ˆæ˜¯ç»´åº¦å»ºæ¨¡ï¼Ÿ</h3><p><strong>ç†è§£å…³é”®å­—ï¼š</strong>ç»´åº¦å»ºæ¨¡çš„å‡ºå‘ç‚¹æ˜¯å®ç°å¿«é€Ÿçš„æ•°æ®åˆ†æä¸å†³ç­–ï¼Œç»´åº¦å»ºæ¨¡é€šå¸¸é¢å‘ä¸šåŠ¡äººå‘˜ã€åˆ†æäººå‘˜ä½¿ç”¨ï¼Œç›¸å¯¹ERå»ºæ¨¡æ¥è¯´ä¼šæ›´åŠ å¼€æ”¾ï¼Œæ›´å®¹æ˜“ç†è§£</p><p>ç»´åº¦å»ºæ¨¡æ˜¯ä»ä¸šåŠ¡è¿‡ç¨‹ä¸­æç‚¼è€Œæ¥ï¼Œå…¸å‹ç»´åº¦å»ºè¡¨ä»£è¡¨æ˜Ÿå½¢å»ºæ¨¡å’Œé›ªèŠ±å»ºæ¨¡<br><a id="more"></a></p><h3 id="2ã€ç»´åº¦å»ºæ¨¡ä¸€èˆ¬è¿‡ç¨‹ï¼ˆæ‘˜è‡ªã€Šå¤§æ•°æ®ä¹‹è·¯ã€‹-amp-ã€Šç¦»çº¿å’Œå®æ—¶å¤§æ•°æ®ä¹‹æˆ˜ã€‹ï¼‰"><a href="#2ã€ç»´åº¦å»ºæ¨¡ä¸€èˆ¬è¿‡ç¨‹ï¼ˆæ‘˜è‡ªã€Šå¤§æ•°æ®ä¹‹è·¯ã€‹-amp-ã€Šç¦»çº¿å’Œå®æ—¶å¤§æ•°æ®ä¹‹æˆ˜ã€‹ï¼‰" class="headerlink" title="2ã€ç»´åº¦å»ºæ¨¡ä¸€èˆ¬è¿‡ç¨‹ï¼ˆæ‘˜è‡ªã€Šå¤§æ•°æ®ä¹‹è·¯ã€‹ &amp; ã€Šç¦»çº¿å’Œå®æ—¶å¤§æ•°æ®ä¹‹æˆ˜ã€‹ï¼‰"></a>2ã€ç»´åº¦å»ºæ¨¡ä¸€èˆ¬è¿‡ç¨‹ï¼ˆæ‘˜è‡ªã€Šå¤§æ•°æ®ä¹‹è·¯ã€‹ &amp; ã€Šç¦»çº¿å’Œå®æ—¶å¤§æ•°æ®ä¹‹æˆ˜ã€‹ï¼‰</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Kimballå››æ­¥å»ºæ¨¡æµç¨‹é€‚åˆä¸Šè¿°æ•°æ®ä»“åº“ç³»ç»Ÿå»ºè®¾æµç¨‹ä¸­æ¨¡å‹è®¾è®¡ç¯èŠ‚ï¼Œé‡ç‚¹è§£å†³æ•°æ®ç²’åº¦ã€ç»´åº¦è®¾è®¡å’Œäº‹å®è¡¨è®¾è®¡é—®é¢˜ã€‚</p><p>ï¼ˆ1ï¼‰é€‰æ‹©ä¸šåŠ¡è¿‡ç¨‹</p><p>â€‹          ä¸šåŠ¡è¿‡ç¨‹æè¿°çš„æ˜¯ä¼ä¸šçš„ä¸šåŠ¡æ´»åŠ¨ï¼Œä¾‹å¦‚ç”µå•†ç³»ç»Ÿç”¨æˆ·ä¸‹å•ï¼Œè´¦å·ç³»ç»Ÿç”¨æˆ·æ³¨å†Œäº†ä¸€ä¸ªè´¦å·</p><p>ï¼ˆ2ï¼‰é€‰æ‹©ç²’åº¦</p><p>â€‹           é‚£ä¹ˆä»€ä¹ˆæ˜¯ç²’åº¦å‘¢ï¼Ÿç²’åº¦æ˜¯æè¿°çš„æ˜¯æ´»åŠ¨ç»†èŠ‚çš„æ¯ä¸€ä¸ªå­é¡¹ï¼Œä¾‹å¦‚ï¼Œç”¨æˆ·æ³¨å†Œä¸€ä¸ªè´¦å·ï¼ŒåŒ…å«äº†ç”¨æˆ·åã€æ—¶é—´ã€IPã€ç»ˆç«¯ç±»å‹ã€æ‰‹æœºå·ç ï¼Œå¸å·ç±»å‹ç­‰</p><p>ï¼ˆ3ï¼‰ç¡®å®šç»´åº¦</p><p>â€‹           ç¡®å®šç»´åº¦ä¹‹å‰ï¼Œéœ€è¦å…ˆæ˜ç¡®ä»€ä¹ˆæ˜¯ç»´åº¦ï¼Ÿç»´åº¦æ˜¯è¡¨ç¤ºä¸šåŠ¡æ´»åŠ¨åœ¨ä¸åŒè§’åº¦çš„è¡¨ç°æ–¹å¼ï¼Œä¾‹å¦‚ï¼šæ³¨å†Œè´¦å·çš„æ´»åŠ¨ä¸­ï¼Œä»æ—¶é—´ã€IPã€ç»ˆç«¯ç±»å‹ç­‰è§’åº¦è¿›è¡Œæè¿°</p><p>â€‹           æ¯”å¦‚ï¼šç”¨æˆ·åã€æ³¨å†Œæ—¶é—´ã€æ³¨å†ŒIPã€æ³¨å†Œç»ˆç«¯ã€æ³¨å†Œæ‰‹æœºå·ç ã€æ³¨å†Œè´¦å·ç±»å‹ï¼ˆæ‰‹æœºè´¦å·ã€é‚®ç®±è´¦å·ã€ä¸‰æ–¹è´¦å·ï¼‰</p><p>ï¼ˆ4ï¼‰ç¡®å®šäº‹å®</p><p>â€‹          ç¡®å®šç»´åº¦ä¹‹åï¼Œäº‹å®åˆ™å˜çš„æ¸…æ™°ï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬éœ€è¦è®¡ç®—æŸç»ˆç«¯ã€æŸå¤©çš„æ³¨å†Œé‡</p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Ÿ</p><hr><p>1ã€å¦‚ä½•ç¡®å®šç²’åº¦ï¼Ÿ</p><p>â€‹             æœ€ç»†ç²’åº¦å’Œèšåˆç²’åº¦ä¹‹äº‰ï¼Ÿ åˆ°åº•æ˜¯é€‰æ‹©æœ€ç»†ç²’åº¦ï¼Œè¿˜æ˜¯èšåˆç²’åº¦ï¼Ÿ</p><p>2ã€å¦‚ä½•ç¡®å®šç»´åº¦ï¼Ÿ</p><p>â€‹             æ ‡è¯†ç»´åº¦è§£å†³çš„æ˜¯ä¸šåŠ¡äººå‘˜å¦‚ä½•æè¿°æ¥è‡ªä¸šåŠ¡è¿‡ç¨‹çš„æ•°æ®ï¼Œç»´åº¦ç”¨æ¥è¡¨ç¤ºâ€œè°ã€ä»€ä¹ˆã€ä½•æ—¶ã€ä½•å¤„ã€ä¸ºä½•ã€å¦‚ä½•â€çš„é—®é¢˜ã€‚ä»¥ç«ä»·å¹¿å‘Šæ£€ç´¢æµç¨‹è€Œè¨€å°±æ˜¯å®¢æˆ·é€šè¿‡ä»€ä¹ˆæ¸ é“ã€ä»€ä¹ˆæ ·çš„å®¢æˆ·ç«¯ï¼ˆOSã€IPï¼‰ã€æ£€ç´¢äº†ä»€ä¹ˆæ ·çš„å†…å®¹ã€è¯·æ±‚æœ€ç»ˆæœ‰è°å—ç†ç­‰ã€‚</p><p>3ã€å¦‚ä½•ç¡®å®šäº‹å®ï¼Ÿ</p><p>â€‹             æ ‡è¯†äº‹å®å…¶å®æ˜¯åœ¨ç¡®å®šä¸šåŠ¡è¿‡ç¨‹çš„åº¦é‡æŒ‡æ ‡ï¼ŒæŒ‡æ ‡ä½•æ¥ï¼Ÿå“ªäº›æŒ‡æ ‡å¿…é¡»ä¿ç•™ï¼Œé‚£äº›æŒ‡æ ‡å¿…é¡»åˆ é™¤ï¼Œå¾…å®šæŒ‡æ ‡å¦‚ä½•å¤„ç†ï¼Ÿ<strong>å¿…é¡»ç»¼åˆè€ƒè™‘ä¸šåŠ¡ç”¨æˆ·éœ€æ±‚å’Œç°å®æ•°æ®çš„å®é™…æƒ…å†µ</strong>ã€‚äº‹å®è¡¨çš„è®¾è®¡å®Œå…¨ä¾èµ–äºç‰©ç†æ´»åŠ¨ï¼Œä¸å—å¯èƒ½äº§ç”Ÿçš„æœ€ç»ˆæŠ¥è¡¨çš„å½±å“ï¼ŒæŠ¥è¡¨åªæ˜¯äº‹å®è¡¨è®¾è®¡çš„å‚è€ƒè§†è§’ã€‚</p><p>â€‹            <strong>æŒ‡æ ‡å¿…éœ€è¦è€ƒè™‘ä¸šåŠ¡çš„éœ€æ±‚å’Œæ•°æ®çš„å®é™…æƒ…å†µ</strong></p><h3 id="3ã€é›ªèŠ±æ¨¡å‹-ä¸-æ˜Ÿå½¢æ¨¡å‹"><a href="#3ã€é›ªèŠ±æ¨¡å‹-ä¸-æ˜Ÿå½¢æ¨¡å‹" class="headerlink" title="3ã€é›ªèŠ±æ¨¡å‹ ä¸ æ˜Ÿå½¢æ¨¡å‹"></a>3ã€é›ªèŠ±æ¨¡å‹ ä¸ æ˜Ÿå½¢æ¨¡å‹</h3><p><strong>ç†è§£å…³é”®å­—ï¼šæ—¶é—´ä¸ç©ºé—´äº¤æ¢</strong></p><p><strong>ï¼ˆ1ï¼‰é›ªèŠ±æ¨¡å‹æ˜¯å……åˆ†å±•å¼€ç»´åº¦ï¼Œå½“å‡ºç°ç»´åº¦å±‚æ¬¡æ—¶ï¼Œä¾‹å¦‚ï¼šæŸå•†å“åˆ†å¤§ç±»ã€ç§ç±»ã€å°ç±»ï¼Œä½¿ç”¨é›ªèŠ±æ¨¡å‹å»ºæ¨¡æ—¶ï¼Œé€šå¸¸å°†ç»´åº¦è¡¨ä¸­è®°å½•å°ç±»çš„IDï¼Œé¢å¤–è®¾è®¡ä¸€å¼ ç±»åˆ«çš„ç»´åº¦è¡¨</strong></p><p><strong>é›ªèŠ±æ¨¡å‹å»é™¤äº†æ•°æ®å†—ä½™ï¼ŒèŠ‚çœäº†éƒ¨åˆ†å­˜å‚¨ï¼Œä½†ä¹Ÿå¸¦æ¥äº†ä¸€å®šçš„ä¸å˜ï¼Œä½¿å¾—ä¸šåŠ¡äººå‘˜åˆ†ææŸ¥è¯¢æ—¶éœ€è¦å…³è”å¤šå¼ ç»´åº¦è¡¨ã€‚</strong></p><p><strong>ï¼ˆ2ï¼‰æ˜Ÿç³»æ¨¡å‹åˆ™æ˜¯å…è®¸ä¸€å®šçš„å†—ä½™ï¼Œå°†ç»´åº¦å±‚æ¬¡æ‰å¹³åŒ–ï¼Œé€šè¿‡ç‰ºç‰²ä¸€å°éƒ¨åˆ†ç©ºé—´æ¢å–æŸ¥è¯¢æ—¶å¿«æ·</strong></p><p>PS:æŸäº›æƒ…å†µä¸‹å¯ä»¥éœ€è¦ç”¨åˆ°é›ªèŠ±æ¨¡å‹</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1ã€ä»€ä¹ˆæ˜¯ç»´åº¦å»ºæ¨¡ï¼Ÿ&quot;&gt;&lt;a href=&quot;#1ã€ä»€ä¹ˆæ˜¯ç»´åº¦å»ºæ¨¡ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;1ã€ä»€ä¹ˆæ˜¯ç»´åº¦å»ºæ¨¡ï¼Ÿ&quot;&gt;&lt;/a&gt;1ã€ä»€ä¹ˆæ˜¯ç»´åº¦å»ºæ¨¡ï¼Ÿ&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ç†è§£å…³é”®å­—ï¼š&lt;/strong&gt;ç»´åº¦å»ºæ¨¡çš„å‡ºå‘ç‚¹æ˜¯å®ç°å¿«é€Ÿçš„æ•°æ®åˆ†æä¸å†³ç­–ï¼Œç»´åº¦å»ºæ¨¡é€šå¸¸é¢å‘ä¸šåŠ¡äººå‘˜ã€åˆ†æäººå‘˜ä½¿ç”¨ï¼Œç›¸å¯¹ERå»ºæ¨¡æ¥è¯´ä¼šæ›´åŠ å¼€æ”¾ï¼Œæ›´å®¹æ˜“ç†è§£&lt;/p&gt;
&lt;p&gt;ç»´åº¦å»ºæ¨¡æ˜¯ä»ä¸šåŠ¡è¿‡ç¨‹ä¸­æç‚¼è€Œæ¥ï¼Œå…¸å‹ç»´åº¦å»ºè¡¨ä»£è¡¨æ˜Ÿå½¢å»ºæ¨¡å’Œé›ªèŠ±å»ºæ¨¡&lt;br&gt;
    
    </summary>
    
      <category term="0x1 æ•°æ®ä»“åº“" scheme="https://deletee.github.io/categories/0x1-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/"/>
    
      <category term="0x11 æ•°æ®å»ºæ¨¡" scheme="https://deletee.github.io/categories/0x1-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/0x11-%E6%95%B0%E6%8D%AE%E5%BB%BA%E6%A8%A1/"/>
    
    
      <category term="å»ºæ¨¡" scheme="https://deletee.github.io/tags/%E5%BB%BA%E6%A8%A1/"/>
    
      <category term="æ•°æ®ä»“åº“" scheme="https://deletee.github.io/tags/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/"/>
    
      <category term="ç»´åº¦" scheme="https://deletee.github.io/tags/%E7%BB%B4%E5%BA%A6/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ä»“åº“ä¸“é¢˜(3)-ERå»ºæ¨¡</title>
    <link href="https://deletee.github.io/2018/12/27/er-modeling/"/>
    <id>https://deletee.github.io/2018/12/27/er-modeling/</id>
    <published>2018-12-27T07:46:30.000Z</published>
    <updated>2019-01-16T13:20:01.572Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1ã€ä»€ä¹ˆæ˜¯ERå»ºæ¨¡ï¼Ÿ"><a href="#1ã€ä»€ä¹ˆæ˜¯ERå»ºæ¨¡ï¼Ÿ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯ERå»ºæ¨¡ï¼Ÿ"></a>1ã€ä»€ä¹ˆæ˜¯ERå»ºæ¨¡ï¼Ÿ</h3><p><strong>ç†è§£å…³é”®å­—ï¼šERæ¨¡å‹åˆç§°å®ä½“-å…³ç³»æ¨¡å‹ï¼Œéµå¾ª3NFå»ºæ¨¡ï¼Œé‡‡ç”¨ERè¿›è¡Œæ•°æ®ä»“åº“å»ºæ¨¡éœ€è¦ä»æ•´ä¸ªä¼ä¸šçš„è§’åº¦ç†æ¸…å„ä¸šåŠ¡ä¹‹é—´çš„å…³ç³»ï¼Œå»ºæ¨¡çš„å‡ºå‘ç‚¹æ˜¯åŸºäºä¼ä¸šæ•°æ®çš„æ•´åˆï¼Œå»ºè®¾EDWéœ€è¦å»ºæ¨¡äººå‘˜å¯¹ä¼ä¸šæ•´ä½“ä¸šåŠ¡æœ‰ç²¾æ·±çš„æŠŠæ§</strong></p><p>ä¾‹å¦‚ï¼šTeradataçš„ FS-LDMæ¨¡å‹ï¼Œå°†é‡‘èä¸šåŠ¡åˆ†ä¸º10å¤§ä¸»é¢˜ï¼Œé€šå¸¸æ˜¯å¯¹æ•´ä½“è¡Œä¸šå‘å±•çš„æ²‰æ·€ï¼Œå°†æˆç†Ÿçš„æ¨¡å‹åšé€‚å½“çš„è°ƒæ•´å³å¯å¿«é€Ÿè½åœ°å®æ–½<br><a id="more"></a></p><h3 id="2ã€ERå»ºæ¨¡çš„ä¸‰ä¸ªé˜¶æ®µ"><a href="#2ã€ERå»ºæ¨¡çš„ä¸‰ä¸ªé˜¶æ®µ" class="headerlink" title="2ã€ERå»ºæ¨¡çš„ä¸‰ä¸ªé˜¶æ®µ"></a><strong>2ã€ERå»ºæ¨¡çš„ä¸‰ä¸ªé˜¶æ®µ</strong></h3><p><strong>ç†è§£å…³é”®å­—ï¼šERæ¨¡å‹æ˜¯è‡ªä¸Šè€Œä¸‹çš„å»ºæ¨¡æ–¹å¼ï¼Œç”±æ­¤å»ºæ¨¡çš„éœ€è¦å…ˆä»ä¼ä¸šçš„æ•´ä½“æ¡†æ¶è¿›è¡Œé«˜åº¦æŠ½è±¡</strong></p><p><strong>ï¼ˆ1ï¼‰é«˜å±‚æ¨¡å‹</strong><br>â€‹         ä¸€ä¸ªé«˜åº¦æŠ½è±¡çš„æ¨¡å‹ï¼Œæè¿°ä¸»è¦çš„ä¸»é¢˜åŠä¸»ä½“é—´çš„å…³ç³»ï¼Œç”¨äºæè¿°ä¼ä¸šçš„æ€»ä½“æƒ…å†µ<br><strong>ï¼ˆ2ï¼‰ä¸­å±‚æ¨¡å‹</strong><br>â€‹         åœ¨é«˜å±‚æ¨¡å‹çš„åŸºç¡€ä¸Šï¼Œç»†åŒ–ä¸»é¢˜åŸŸçš„å®ä½“ã€å…³ç³»ç­‰æ•°æ®é¡¹<br><strong>ï¼ˆ3ï¼‰ç‰©ç†æ¨¡å‹</strong><br>â€‹        åœ¨ä¸­å±‚æ¨¡å‹çš„åŸºç¡€ä¸Šï¼Œé€šå¸¸ä¼šæ ¹æ®å¹³å°çš„ç‰¹æ€§è¿›è¡Œç‰©ç†å±æ€§è®¾è®¡ï¼Œä¾‹å¦‚ï¼šåˆ†è¡¨ã€åˆ†åŒºã€åˆ†åŒºç´¢å¼•ç­‰è®¾è®¡<br><strong>ç†è§£å…³é”®å­—2ï¼šå…ˆé€šè¿‡æ•´åˆæ•´ä¸ªä¼ä¸šçš„ä¸šåŠ¡å…³ç³»ï¼Œåˆ’åˆ†ç›¸åº”ä¸»é¢˜åŸŸåŠå¯¹åº”çš„ä¸»é¢˜ä¹‹é—´çš„å…³ç³»ï¼Œå†ç»†åŒ–æ¯ä¸ªä¸»é¢˜åŸŸä¸­çš„å†…å®¹ï¼Œæœ€åæ˜¯æ ¹æ®å¹³å°çš„ç‰¹ç‚¹è¿›è¡Œç‰©ç†è®¾è®¡</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1ã€ä»€ä¹ˆæ˜¯ERå»ºæ¨¡ï¼Ÿ&quot;&gt;&lt;a href=&quot;#1ã€ä»€ä¹ˆæ˜¯ERå»ºæ¨¡ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;1ã€ä»€ä¹ˆæ˜¯ERå»ºæ¨¡ï¼Ÿ&quot;&gt;&lt;/a&gt;1ã€ä»€ä¹ˆæ˜¯ERå»ºæ¨¡ï¼Ÿ&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ç†è§£å…³é”®å­—ï¼šERæ¨¡å‹åˆç§°å®ä½“-å…³ç³»æ¨¡å‹ï¼Œéµå¾ª3NFå»ºæ¨¡ï¼Œé‡‡ç”¨ERè¿›è¡Œæ•°æ®ä»“åº“å»ºæ¨¡éœ€è¦ä»æ•´ä¸ªä¼ä¸šçš„è§’åº¦ç†æ¸…å„ä¸šåŠ¡ä¹‹é—´çš„å…³ç³»ï¼Œå»ºæ¨¡çš„å‡ºå‘ç‚¹æ˜¯åŸºäºä¼ä¸šæ•°æ®çš„æ•´åˆï¼Œå»ºè®¾EDWéœ€è¦å»ºæ¨¡äººå‘˜å¯¹ä¼ä¸šæ•´ä½“ä¸šåŠ¡æœ‰ç²¾æ·±çš„æŠŠæ§&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼šTeradataçš„ FS-LDMæ¨¡å‹ï¼Œå°†é‡‘èä¸šåŠ¡åˆ†ä¸º10å¤§ä¸»é¢˜ï¼Œé€šå¸¸æ˜¯å¯¹æ•´ä½“è¡Œä¸šå‘å±•çš„æ²‰æ·€ï¼Œå°†æˆç†Ÿçš„æ¨¡å‹åšé€‚å½“çš„è°ƒæ•´å³å¯å¿«é€Ÿè½åœ°å®æ–½&lt;br&gt;
    
    </summary>
    
      <category term="0x1 æ•°æ®ä»“åº“" scheme="https://deletee.github.io/categories/0x1-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/"/>
    
      <category term="0x11 æ•°æ®å»ºæ¨¡" scheme="https://deletee.github.io/categories/0x1-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/0x11-%E6%95%B0%E6%8D%AE%E5%BB%BA%E6%A8%A1/"/>
    
    
      <category term="å»ºæ¨¡" scheme="https://deletee.github.io/tags/%E5%BB%BA%E6%A8%A1/"/>
    
      <category term="æ•°æ®ä»“åº“" scheme="https://deletee.github.io/tags/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/"/>
    
      <category term="ER" scheme="https://deletee.github.io/tags/ER/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ä»“åº“ä¸“é¢˜(2)-æ•°æ®å»ºæ¨¡</title>
    <link href="https://deletee.github.io/2018/12/26/data-modeling/"/>
    <id>https://deletee.github.io/2018/12/26/data-modeling/</id>
    <published>2018-12-26T07:46:30.000Z</published>
    <updated>2019-01-16T13:20:01.567Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®å»ºæ¨¡ï¼Ÿ"><a href="#1ã€ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®å»ºæ¨¡ï¼Ÿ" class="headerlink" title="1ã€ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®å»ºæ¨¡ï¼Ÿ"></a>1ã€ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®å»ºæ¨¡ï¼Ÿ</h2><p>ç†è§£å…³é”®å­—ï¼šæ•°æ®å»ºæ¨¡å°±æ˜¯æ•°æ®ç»„ç»‡å’Œå­˜å‚¨çš„æ–¹æ³•<br>æ•°æ®æ¨¡å‹æ˜¯æ•°æ®ç»„ç»‡å’Œå­˜å‚¨æ–¹æ³•ï¼Œæ­£å¦‚æˆ‘ä»¬å¸Œæœ›å›¾ä¹¦é¦†çš„ä¹¦åˆ†é—¨åˆ«ç±»çš„æ”¾ç½®ã€‚<br>æ•°æ®æ¨¡å‹å¼ºè°ƒä»ä¸šåŠ¡ã€æ•°æ®å­˜å–å’Œä½¿ç”¨è§’åº¦åˆç†è§„åˆ’æ•°æ®</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆéœ€è¦æ•°æ®å»ºæ¨¡å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä»å»ºæ¨¡æœ‰å“ªäº›å¥½å¤„ç†è§£</p><a id="more"></a><p>ï¼ˆ1ï¼‰æ€§èƒ½ è‰¯å¥½çš„æ¨¡å‹èƒ½å¸®åŠ©æˆ‘ä»¬å¿«é€ŸæŸ¥è¯¢æ‰€éœ€è¦çš„æ•°æ®ï¼Œå‡å°‘ä¸å¿…è¦çš„æ•°æ®æŸ¥è¯¢I/O<br>ï¼ˆ2ï¼‰æˆæœ¬ è‰¯å¥½çš„æ•°æ®æ¨¡å‹èƒ½å¤Ÿæå¤§åœ°å‡å°‘ä¸å¿…è¦çš„æ•°æ®å­˜å‚¨ï¼Œä¹Ÿèƒ½å®ç°è®¡ç®—ç»“æœçš„å¤ç”¨ï¼Œæå¤§åœ°é™ä½å¤§æ•°æ®ç³»ç»Ÿä¸­çš„å­˜å‚¨å’Œè®¡ç®—æˆæœ¬<br>ï¼ˆ3ï¼‰æ•ˆç‡ è‰¯å¥½çš„æ•°æ®æ¨¡å‹èƒ½å¤Ÿæå¤§åœ°æé«˜ç”¨æˆ·ä½“éªŒï¼Œç”¨æˆ·å¯é€šè¿‡ä¸šåŠ¡æ²‰æ·€åçš„æ¨¡å‹å°½å¯èƒ½å‡å°‘ä¸å¿…è¦çš„æŸ¥è¯¢ï¼Œä»è€Œæé«˜æ•ˆç‡<br>ï¼ˆ4ï¼‰è´¨é‡ è‰¯å¥½çš„æ•°æ®æ¨¡å‹å°†éµå¾ªä¸€å®šçš„æ•°æ®è§„èŒƒï¼ˆä¾‹å¦‚ï¼šå£å¾„çº¦æŸï¼Œå­—æ®µçº¦æŸç­‰ï¼‰ä»è€Œå‡å°‘æ•°æ®è®¡ç®—çš„å¤±è¯¯ï¼Œä¿éšœæ•°æ®è´¨é‡</p><h2 id="2ã€OLTPä¸OLAPçš„åŒºåˆ«"><a href="#2ã€OLTPä¸OLAPçš„åŒºåˆ«" class="headerlink" title="2ã€OLTPä¸OLAPçš„åŒºåˆ«"></a>2ã€OLTPä¸OLAPçš„åŒºåˆ«</h2><p>ç†è§£å…³é”®å­—ï¼š</p><p> OLTP æ˜¯è®²ç©¶äº‹åŠ¡ï¼Œåœ¨OLAPä¸­äº‹åŠ¡ä¸æ˜¯æ‰€å…³æ³¨çš„ï¼Œä¸»è¦æ˜¯æ‰¹é‡çš„è¯»å†™ï¼Œè‡´åŠ›äºè”æœºåˆ†æ<br> ä¸€ä¸ªæ˜¯è®²ç©¶å¿«é€Ÿå“åº”ï¼Œä¸€ä¸ªæ˜¯è®²ç©¶å¤§åå<br>OLTPé€šå¸¸ä½¿ç”¨ERæ¨¡å‹ï¼Œé‡‡ç”¨ä¸‰èŒƒå¼æ¶ˆé™¤æ•°æ®ä¸­çš„å†—ä½™ï¼Œè€ŒOLAPé‡‡ç”¨çš„æ¨¡å‹åˆ™æ¯”è¾ƒä¸°å¯Œ</p><h2 id="3ã€æœ‰å“ªäº›å»ºæ¨¡æ–¹æ³•è®ºï¼Ÿ"><a href="#3ã€æœ‰å“ªäº›å»ºæ¨¡æ–¹æ³•è®ºï¼Ÿ" class="headerlink" title="3ã€æœ‰å“ªäº›å»ºæ¨¡æ–¹æ³•è®ºï¼Ÿ"></a>3ã€æœ‰å“ªäº›å»ºæ¨¡æ–¹æ³•è®ºï¼Ÿ</h2><p>ï¼ˆ1ï¼‰ERå»ºæ¨¡<br>ï¼ˆ2ï¼‰ç»´åº¦å»ºæ¨¡<br>ï¼ˆ3ï¼‰Data vaultå»ºæ¨¡<br>ï¼ˆ4ï¼‰Anchorå»ºæ¨¡</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®å»ºæ¨¡ï¼Ÿ&quot;&gt;&lt;a href=&quot;#1ã€ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®å»ºæ¨¡ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;1ã€ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®å»ºæ¨¡ï¼Ÿ&quot;&gt;&lt;/a&gt;1ã€ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®å»ºæ¨¡ï¼Ÿ&lt;/h2&gt;&lt;p&gt;ç†è§£å…³é”®å­—ï¼šæ•°æ®å»ºæ¨¡å°±æ˜¯æ•°æ®ç»„ç»‡å’Œå­˜å‚¨çš„æ–¹æ³•&lt;br&gt;æ•°æ®æ¨¡å‹æ˜¯æ•°æ®ç»„ç»‡å’Œå­˜å‚¨æ–¹æ³•ï¼Œæ­£å¦‚æˆ‘ä»¬å¸Œæœ›å›¾ä¹¦é¦†çš„ä¹¦åˆ†é—¨åˆ«ç±»çš„æ”¾ç½®ã€‚&lt;br&gt;æ•°æ®æ¨¡å‹å¼ºè°ƒä»ä¸šåŠ¡ã€æ•°æ®å­˜å–å’Œä½¿ç”¨è§’åº¦åˆç†è§„åˆ’æ•°æ®&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆä¸ºä»€ä¹ˆéœ€è¦æ•°æ®å»ºæ¨¡å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä»å»ºæ¨¡æœ‰å“ªäº›å¥½å¤„ç†è§£&lt;/p&gt;
    
    </summary>
    
      <category term="0x1 æ•°æ®ä»“åº“" scheme="https://deletee.github.io/categories/0x1-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/"/>
    
      <category term="0x11 æ•°æ®å»ºæ¨¡" scheme="https://deletee.github.io/categories/0x1-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/0x11-%E6%95%B0%E6%8D%AE%E5%BB%BA%E6%A8%A1/"/>
    
    
      <category term="å»ºæ¨¡" scheme="https://deletee.github.io/tags/%E5%BB%BA%E6%A8%A1/"/>
    
      <category term="æ•°æ®ä»“åº“" scheme="https://deletee.github.io/tags/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>Hive SQLä¼˜åŒ–</title>
    <link href="https://deletee.github.io/2018/12/25/sql-optimization/"/>
    <id>https://deletee.github.io/2018/12/25/sql-optimization/</id>
    <published>2018-12-25T07:46:30.000Z</published>
    <updated>2019-01-16T13:20:01.577Z</updated>
    
    <content type="html"><![CDATA[<h4 id="0x00-group-by-å¼•èµ·çš„å€¾æ–œ"><a href="#0x00-group-by-å¼•èµ·çš„å€¾æ–œ" class="headerlink" title="0x00 group by å¼•èµ·çš„å€¾æ–œ"></a><strong>0x00 group by å¼•èµ·çš„å€¾æ–œ</strong></h4><h5 id="1-ä¼˜åŒ–æªæ–½"><a href="#1-ä¼˜åŒ–æªæ–½" class="headerlink" title="1|ä¼˜åŒ–æªæ–½"></a>1|ä¼˜åŒ–æªæ–½</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.map.aggr = <span class="literal">true</span></span><br><span class="line"><span class="keyword">set</span> hive.groupby.skewindata = <span class="literal">true</span></span><br></pre></td></tr></table></figure> <a id="more"></a><h5 id="2-åŸç†"><a href="#2-åŸç†" class="headerlink" title="2|åŸç†"></a>2|åŸç†</h5><p>â€‹    ä½œä¸šå°†ç”Ÿæˆä¸¤ä¸ªMapReduce Job</p><p>â€‹    ç¬¬ä¸€ä¸ªMapReduce Jobä¸­ Mapçš„è¾“å‡ºç»“æœä¼šéšæœºçš„åˆ†å¸ƒåˆ°Reduceä¸­ï¼Œæ¯ä¸ªReduceåšéƒ¨åˆ†èšåˆæ“ä½œå¹¶è¾“å‡ºç»“æœï¼Œè¿™æ ·å¤„ç†çš„ç»“æœ ç›¸åŒçš„group by keyä¼šåˆ†å¸ƒåˆ°ä¸åŒçš„reduceä¸­</p><p>â€‹    ç¬¬äºŒä¸ªMapReduce Jobä¸­ å†æ ¹æ® ç›¸åŒgroup by keyåˆ†å¸ƒåˆ°reduceä¸­</p><h4 id="0x01-count-distinct-ä¼˜åŒ–"><a href="#0x01-count-distinct-ä¼˜åŒ–" class="headerlink" title="0x01 count distinct ä¼˜åŒ–"></a><strong>0x01 count distinct ä¼˜åŒ–</strong></h4><h5 id="1-ä¾‹å­"><a href="#1-ä¾‹å­" class="headerlink" title="1|ä¾‹å­"></a>1|ä¾‹å­</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> ssn) <span class="keyword">from</span> <span class="keyword">table</span></span><br></pre></td></tr></table></figure><h5 id="2-è¯´æ˜"><a href="#2-è¯´æ˜" class="headerlink" title="2|è¯´æ˜"></a>2|è¯´æ˜</h5><p>â€‹    ç”±äºå¦‚ä¸ŠSQLï¼ŒHiveä¼šå°†Mapé˜¶æ®µçš„è¾“å‡ºå…¨éƒ¨åˆ†å¸ƒåˆ°ä¸€ä¸ªReduceä¸­ï¼Œå¾ˆå®¹æ˜“å¼•èµ·æ€§èƒ½é—®é¢˜</p><h5 id="3-æ­£ç¡®çš„æ“ä½œæ–¹æ³•"><a href="#3-æ­£ç¡®çš„æ“ä½œæ–¹æ³•" class="headerlink" title="3|æ­£ç¡®çš„æ“ä½œæ–¹æ³•"></a>3|æ­£ç¡®çš„æ“ä½œæ–¹æ³•</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(<span class="number">1</span>) </span><br><span class="line"> <span class="keyword">from</span> (</span><br><span class="line">        <span class="keyword">select</span> ssn <span class="keyword">from</span> <span class="keyword">table</span> </span><br><span class="line">        <span class="keyword">group</span> <span class="keyword">by</span> ssn</span><br><span class="line">) t</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- åŸç†</span><br><span class="line">-- åˆ©ç”¨group by å…ˆè¿›è¡Œæ•°æ®å»é‡ï¼Œç„¶åå†è¿›è¡Œè®¡æ•°ï¼Œè®¡æ•°æ˜¯ä¸å¯é¿å…çš„ï¼Œç›®çš„æ˜¯ä¸ºäº†å¤§é‡å‡å°‘é‡å¤è®¡æ•°</span><br></pre></td></tr></table></figure><h4 id="0x02-å¤§è¡¨joinå°è¡¨"><a href="#0x02-å¤§è¡¨joinå°è¡¨" class="headerlink" title="0x02 å¤§è¡¨joinå°è¡¨"></a><strong>0x02 å¤§è¡¨joinå°è¡¨</strong></h4><h5 id="1-æ–¹æ³•"><a href="#1-æ–¹æ³•" class="headerlink" title="1|æ–¹æ³•"></a>1|æ–¹æ³•</h5><p>â€‹    ä¸€èˆ¬éƒ½æ˜¯é‡‡ç”¨ map joinçš„æ–¹æ³•ï¼Œé»˜è®¤Hiveæ˜¯å¼€å¯ mapjoinï¼Œå…¶Hiveè®¾ç½®å‚æ•°å¦‚ä¸‹ï¼š </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.auto.convert.join = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>â€‹    æˆ–è€…æ˜¯ä½¿ç”¨Hintçš„æ–¹å¼è¿›è¡Œå°è¡¨æŒ‡å®š</p><h5 id="2-æ¡ˆä¾‹"><a href="#2-æ¡ˆä¾‹" class="headerlink" title="2|æ¡ˆä¾‹"></a>2|æ¡ˆä¾‹</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="comment">/*+mapjoin(t1)*/</span></span><br><span class="line">       t0.ssn</span><br><span class="line">       ,t1.name</span><br><span class="line"><span class="keyword">from</span> big_table0 t0</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span></span><br><span class="line">     small_table1 t1</span><br><span class="line"><span class="keyword">on</span> t0.ssn = t1.ssn;</span><br><span class="line"><span class="comment">-- /*+mapjoin(t1)*/ å³ map join hintï¼Œå¦‚æœéœ€è¦mapjoinå¤šä¸ªè¡¨ï¼Œåˆ™æ ¼å¼ä¸º /*+mapjoin(t1,t2,t3)*/</span></span><br></pre></td></tr></table></figure><h4 id="0x03-å¤§è¡¨joinå¤§è¡¨-å¾…è¡¥å……"><a href="#0x03-å¤§è¡¨joinå¤§è¡¨-å¾…è¡¥å……" class="headerlink" title="0x03 å¤§è¡¨joinå¤§è¡¨(å¾…è¡¥å……)"></a><strong>0x03 å¤§è¡¨joinå¤§è¡¨(å¾…è¡¥å……)</strong></h4><p>â€‹    1|é—®é¢˜åœºæ™¯</p><p>â€‹    2|è§£å†³æ–¹æ³•1</p><p>â€‹    3|è§£å†³æ–¹æ³•2</p><h4 id="0x04-ä¼˜åŒ–æ¡ˆä¾‹"><a href="#0x04-ä¼˜åŒ–æ¡ˆä¾‹" class="headerlink" title="0x04 ä¼˜åŒ–æ¡ˆä¾‹"></a>0x04 ä¼˜åŒ–æ¡ˆä¾‹</h4><h5 id="1-ä¸šåŠ¡èƒŒæ™¯ï¼š"><a href="#1-ä¸šåŠ¡èƒŒæ™¯ï¼š" class="headerlink" title="1|ä¸šåŠ¡èƒŒæ™¯ï¼š"></a>1|ä¸šåŠ¡èƒŒæ™¯ï¼š</h5><p>â€‹       ç­›é€‰å‡º å½“æ—¥ æ³¨å†Œäº§å“ã€æ³¨å†ŒIPä¸ºç»´åº¦ä¸‹è¶…è¿‡30ä¸ªå¸å·çš„ å¸å·æ¸…å•</p><h5 id="2-å¸¸è§„åšæ³•"><a href="#2-å¸¸è§„åšæ³•" class="headerlink" title="2|å¸¸è§„åšæ³•"></a>2|å¸¸è§„åšæ³•</h5><p>â€‹      å…ˆç­›é€‰å‡ºæ»¡è¶³ æ³¨å†Œäº§å“ã€æ³¨å†ŒIP æ•°é‡è¶…è¿‡30ä¸ªçš„ æ³¨å†Œäº§å“åŠæ³¨å†ŒIPçš„ç»´åº¦æ¸…å•ï¼Œç„¶åå†å…³è”æºè¡¨è¿›è¡Œç­›é€‰å‡ºå¸å·</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp.tmp_algorithm1 <span class="keyword">as</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  t1.ssn,</span><br><span class="line">  <span class="number">1</span> <span class="keyword">AS</span> rubbish_rate</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      dt,</span><br><span class="line">      ssn,</span><br><span class="line">      reg_ip,</span><br><span class="line">      reg_product</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">      dw.dw_user_static_reg_info_dd</span><br><span class="line">    <span class="keyword">WHERE</span> dt = <span class="string">'2018-11-22'</span></span><br><span class="line">          <span class="keyword">AND</span> (</span><br><span class="line">            <span class="keyword">split</span>(ssn, <span class="string">'@'</span>) [<span class="number">1</span>] <span class="keyword">IN</span> (<span class="string">'126.com'</span>, <span class="string">'yeah.net'</span>, <span class="string">'vip.126.com'</span>, <span class="string">'vip.163.com'</span>)</span><br><span class="line">            <span class="keyword">OR</span></span><br><span class="line">            <span class="keyword">split</span>(ssn, <span class="string">'@'</span>) [<span class="number">1</span>] <span class="keyword">IS</span> <span class="literal">NULL</span></span><br><span class="line">          )</span><br><span class="line">  ) t1</span><br><span class="line">  <span class="keyword">JOIN</span></span><br><span class="line">  (</span><br><span class="line">         <span class="keyword">SELECT</span></span><br><span class="line">           dt,</span><br><span class="line">           reg_ip,</span><br><span class="line">           reg_product,</span><br><span class="line">           <span class="keyword">count</span>(*) <span class="keyword">AS</span> cnt</span><br><span class="line">         <span class="keyword">FROM</span></span><br><span class="line">           dw.dw_user_static_reg_info_dd</span><br><span class="line">         <span class="keyword">WHERE</span> dt = <span class="string">'2018-11-22'</span></span><br><span class="line">               <span class="keyword">AND</span> (</span><br><span class="line">                 <span class="keyword">split</span>(ssn, <span class="string">'@'</span>) [<span class="number">1</span>] <span class="keyword">IN</span> (<span class="string">'126.com'</span>, <span class="string">'yeah.net'</span>, <span class="string">'vip.126.com'</span>, <span class="string">'vip.163.com'</span>)</span><br><span class="line">                 <span class="keyword">OR</span></span><br><span class="line">                 <span class="keyword">split</span>(ssn, <span class="string">'@'</span>) [<span class="number">1</span>] <span class="keyword">IS</span> <span class="literal">NULL</span></span><br><span class="line">               )</span><br><span class="line">         <span class="keyword">GROUP</span> <span class="keyword">BY</span> dt,reg_ip, reg_product</span><br><span class="line">         <span class="keyword">HAVING</span> cnt &gt;= <span class="number">30</span></span><br><span class="line">       ) t2</span><br><span class="line">    <span class="keyword">ON</span> t1.dt=t2.dt <span class="keyword">and</span> t1.reg_ip = t2.reg_ip <span class="keyword">AND</span> t1.reg_product = t2.reg_product</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> t1.ssn</span><br><span class="line">;</span><br></pre></td></tr></table></figure><h5 id="3-ä¼˜åŒ–åšæ³•"><a href="#3-ä¼˜åŒ–åšæ³•" class="headerlink" title="3|ä¼˜åŒ–åšæ³•"></a>3|ä¼˜åŒ–åšæ³•</h5><p>â€‹     ä½¿ç”¨çª—å£å‡½æ•°è¿›è¡Œç»´åº¦å†…è®¡æ•°ï¼Œå¦‚ä¸‹é€šè¿‡çª—å£å‡½æ•°è®¡ç®—åœ¨  ç»´åº¦ æ³¨å†Œäº§å“ã€æ³¨å†ŒIPä¸‹çš„æ•°é‡ï¼Œé€šè¿‡å­æŸ¥è¯¢è¿›è¡Œç­›é€‰å‡ºç›®æ ‡å¸å·æ¸…å•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp.tmp_algorithm2 <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> ssn,<span class="number">1</span> <span class="keyword">as</span> rubbish_rate</span><br><span class="line"><span class="keyword">from</span>(</span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">       ssn</span><br><span class="line">      ,reg_ip</span><br><span class="line">      ,reg_product</span><br><span class="line">      ,<span class="keyword">count</span>(<span class="number">1</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> reg_ip,reg_product) <span class="keyword">as</span> cnt</span><br><span class="line"> <span class="keyword">from</span> dw.dw_user_static_reg_info_dd</span><br><span class="line"><span class="keyword">where</span> dt = <span class="string">'2018-11-22'</span></span><br><span class="line"> <span class="keyword">and</span> ( </span><br><span class="line">        <span class="keyword">split</span>(ssn, <span class="string">'@'</span>) [<span class="number">1</span>] <span class="keyword">in</span> (<span class="string">'126.com'</span>, <span class="string">'yeah.net'</span>, <span class="string">'vip.126.com'</span>, <span class="string">'vip.163.com'</span>) </span><br><span class="line">      <span class="keyword">or</span> <span class="keyword">split</span>(ssn, <span class="string">'@'</span>) [<span class="number">1</span>] <span class="keyword">is</span> <span class="literal">null</span></span><br><span class="line">  )</span><br><span class="line">) t</span><br><span class="line"><span class="keyword">where</span> cnt &gt;= <span class="number">30</span>;</span><br></pre></td></tr></table></figure><h5 id="4-ä¼˜åŒ–æ€è·¯"><a href="#4-ä¼˜åŒ–æ€è·¯" class="headerlink" title="4|ä¼˜åŒ–æ€è·¯"></a>4|ä¼˜åŒ–æ€è·¯</h5><p>â€‹     ç”±äºHQL æ˜¯è½¬æ¢ä¸ºMapReduceçš„å½¢æ€è¿›è¡Œæ•°æ®è®¡ç®—ï¼Œå¸¸è§„åšæ³•ä¸­ä¼šå¯ç”¨å¤§é‡çš„MapReduceï¼Œå¹¶é‡å¤çš„æŠ½å–äº†æºè¡¨æ•°æ®ï¼Œæµªè´¹äº†è®¡ç®—ï¼Œä¼˜åŒ–åšæ³•æ˜¯å®ç°ä¸€ä»½æ•°æ®æå–ï¼Œå¤æ‚å†…å­˜è®¡ç®—ï¼Œä»è€Œå‡å°‘ä½¿ç”¨è®¡ç®—èµ„æº</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;0x00-group-by-å¼•èµ·çš„å€¾æ–œ&quot;&gt;&lt;a href=&quot;#0x00-group-by-å¼•èµ·çš„å€¾æ–œ&quot; class=&quot;headerlink&quot; title=&quot;0x00 group by å¼•èµ·çš„å€¾æ–œ&quot;&gt;&lt;/a&gt;&lt;strong&gt;0x00 group by å¼•èµ·çš„å€¾æ–œ&lt;/strong&gt;&lt;/h4&gt;&lt;h5 id=&quot;1-ä¼˜åŒ–æªæ–½&quot;&gt;&lt;a href=&quot;#1-ä¼˜åŒ–æªæ–½&quot; class=&quot;headerlink&quot; title=&quot;1|ä¼˜åŒ–æªæ–½&quot;&gt;&lt;/a&gt;1|ä¼˜åŒ–æªæ–½&lt;/h5&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt; hive.map.aggr = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt; hive.groupby.skewindata = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="0x2 æŠ€æœ¯å¹³å°" scheme="https://deletee.github.io/categories/0x2-%E6%8A%80%E6%9C%AF%E5%B9%B3%E5%8F%B0/"/>
    
      <category term="0x21 Hive" scheme="https://deletee.github.io/categories/0x2-%E6%8A%80%E6%9C%AF%E5%B9%B3%E5%8F%B0/0x21-Hive/"/>
    
    
      <category term="Hive" scheme="https://deletee.github.io/tags/Hive/"/>
    
      <category term="SQL" scheme="https://deletee.github.io/tags/SQL/"/>
    
      <category term="ä¼˜åŒ–" scheme="https://deletee.github.io/tags/%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ä»“åº“ä¸“é¢˜(1)-æ•°ä»“æ¦‚è®º</title>
    <link href="https://deletee.github.io/2018/12/20/edw-brief-summary/"/>
    <id>https://deletee.github.io/2018/12/20/edw-brief-summary/</id>
    <published>2018-12-20T07:46:30.000Z</published>
    <updated>2019-01-16T13:20:01.569Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>é€šå¸¸æ¥è®²ï¼Œå¤§å®¶éƒ½çŸ¥é“æ•°æ®ä»“åº“çš„å®˜æ–¹æ¦‚å¿µ<br>æ•°æ®ä»“åº“æ¦‚å¿µåˆ›å§‹äººW.H.Inmonåœ¨ã€Šå»ºç«‹æ•°æ®ä»“åº“ã€‹ä¸€ä¹¦ä¸­å¯¹æ•°æ®ä»“åº“çš„å®šä¹‰æ˜¯ï¼šæ•°æ®ä»“åº“å°±æ˜¯é¢å‘ä¸»é¢˜çš„ã€é›†æˆçš„ã€ç›¸å¯¹ç¨³å®šçš„ã€éšæ—¶é—´ä¸æ–­å˜åŒ–ï¼ˆä¸åŒæ—¶é—´ï¼‰çš„æ•°æ®é›†åˆï¼Œç”¨ä»¥æ”¯æŒç»è¥ç®¡ç†ä¸­çš„å†³ç­–åˆ¶å®šè¿‡ç¨‹ã€æ•°æ®ä»“åº“ä¸­çš„æ•°æ®é¢å‘ä¸»é¢˜ï¼Œä¸ä¼ ç»Ÿæ•°æ®åº“é¢å‘åº”ç”¨ç›¸å¯¹åº”ã€‚</p></blockquote><a id="more"></a><h3 id="0x1-æ•°æ®ä»“åº“æœ‰å“ªäº›ç‚¹ï¼Ÿèƒ½çœ‹åˆ°é‚£äº›é¢"><a href="#0x1-æ•°æ®ä»“åº“æœ‰å“ªäº›ç‚¹ï¼Ÿèƒ½çœ‹åˆ°é‚£äº›é¢" class="headerlink" title="0x1 æ•°æ®ä»“åº“æœ‰å“ªäº›ç‚¹ï¼Ÿèƒ½çœ‹åˆ°é‚£äº›é¢?"></a>0x1 æ•°æ®ä»“åº“æœ‰å“ªäº›ç‚¹ï¼Ÿèƒ½çœ‹åˆ°é‚£äº›é¢?</h3><blockquote><p>å¾ˆå¤šæ•°æ®å¼€å‘äººå‘˜ï¼Œæ— æ³•å°†æ•°æ®ä»“åº“çš„ç‚¹è¿æˆçº¿ï¼Œæ›´åˆ«è¯´ç”±çº¿ç»‡æˆé¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬è¿›è¡Œä¸€äº›å¤´è„‘é£æš´ï¼Œçœ‹çœ‹æ•°æ®ä»“åº“éƒ½æœ‰å“ªäº›å†…å®¹ï¼Ÿ</p></blockquote><p><img src="/knowledge/edw-brainstorm.jpg" alt="edw-brainstorm"></p><p>æ€»çš„æ¥è¯´ï¼Œæ•°æ®ä»“åº“å¯ä»¥æ•´ç†å¦‚ä¸‹4å—å†…å®¹ï¼š<br>ï¼ˆ1ï¼‰æ•°æ®å»ºæ¨¡æ–¹æ³•è®º<br>ï¼ˆ2ï¼‰å®æ–½æ–¹æ³•è®ºï¼ˆæœ€ä½³å®è·µï¼‰<br>ï¼ˆ3ï¼‰æ•°æ®ç®¡ç†<br>ï¼ˆ4ï¼‰æ•°æ®åº”ç”¨</p><p>æ¯ä¸€å—å†…å®¹æ‹¿å‡ºæ¥è®²ï¼Œéƒ½æ˜¯æ— è¾¹ç•Œçš„ï¼Œè¦æƒ³æˆä¸ºè¿™ä¸€é¢†åŸŸçš„ä¸“å®¶ï¼Œéœ€è¦æœ‰æ•°æ®ä»“åº“çš„å…¨å±€è§‚å¹¶ä¸”æœ‰æŸä¸€é¢†åŸŸçš„æœ€ä½³å®è·µã€‚<br>æ•°ä»“ä¹‹è·¯ï¼Œä»»é‡è€Œé“è¿œï¼ï¼ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;é€šå¸¸æ¥è®²ï¼Œå¤§å®¶éƒ½çŸ¥é“æ•°æ®ä»“åº“çš„å®˜æ–¹æ¦‚å¿µ&lt;br&gt;æ•°æ®ä»“åº“æ¦‚å¿µåˆ›å§‹äººW.H.Inmonåœ¨ã€Šå»ºç«‹æ•°æ®ä»“åº“ã€‹ä¸€ä¹¦ä¸­å¯¹æ•°æ®ä»“åº“çš„å®šä¹‰æ˜¯ï¼šæ•°æ®ä»“åº“å°±æ˜¯é¢å‘ä¸»é¢˜çš„ã€é›†æˆçš„ã€ç›¸å¯¹ç¨³å®šçš„ã€éšæ—¶é—´ä¸æ–­å˜åŒ–ï¼ˆä¸åŒæ—¶é—´ï¼‰çš„æ•°æ®é›†åˆï¼Œç”¨ä»¥æ”¯æŒç»è¥ç®¡ç†ä¸­çš„å†³ç­–åˆ¶å®šè¿‡ç¨‹ã€æ•°æ®ä»“åº“ä¸­çš„æ•°æ®é¢å‘ä¸»é¢˜ï¼Œä¸ä¼ ç»Ÿæ•°æ®åº“é¢å‘åº”ç”¨ç›¸å¯¹åº”ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="0x1 æ•°æ®ä»“åº“" scheme="https://deletee.github.io/categories/0x1-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/"/>
    
      <category term="0x11 æ•°æ®å»ºæ¨¡" scheme="https://deletee.github.io/categories/0x1-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/0x11-%E6%95%B0%E6%8D%AE%E5%BB%BA%E6%A8%A1/"/>
    
    
      <category term="æ•°æ®ä»“åº“" scheme="https://deletee.github.io/tags/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨LaTeXå†™æ•°å­¦å…¬å¼</title>
    <link href="https://deletee.github.io/2018/08/16/latex-math-formula/"/>
    <id>https://deletee.github.io/2018/08/16/latex-math-formula/</id>
    <published>2018-08-16T07:46:30.000Z</published>
    <updated>2019-01-16T13:20:01.573Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;æœ€è¿‘ä¸€ç›´å­¦ä¹  çº¿æ€§ä»£æ•°ï¼Œé€šè¿‡latexæ¥å†™æ•°å­¦å…¬å¼ï¼Œæ›¿ä»£äº†ä½¿ç”¨æˆªå›¾çš„æ–¹å¼æ¥å†™åšå®¢ï¼Œå½“ç„¶ç›´æ¥ä¹¦å†™ä¸€ä¸ªæ•°å­¦å…¬å¼ä¹Ÿæ˜¯æœ‰ä¸€å®šéš¾åº¦ï¼Œç”±æ­¤æˆ‘ä»¬éœ€è¦ä¸æ–­çš„ç§¯ç´¯ï¼Œä¸‹æ–‡å°†ç®€å•ä»‹ç»ä½¿ç”¨LaTeXä¹¦å†™çŸ©é˜µï¼Œæ›´å¤šçš„æ•°å­¦å…¬å¼å¯ä»¥å‚è€ƒLaTeXå®˜æ–¹æ–‡æ¡£ã€‚</p><h3 id="LaTeX-å†™ç®€å•Matrixè¯­æ³•"><a href="#LaTeX-å†™ç®€å•Matrixè¯­æ³•" class="headerlink" title="LaTeX å†™ç®€å•Matrixè¯­æ³•"></a>LaTeX å†™ç®€å•Matrixè¯­æ³•</h3><blockquote><p>ä½¿ç”¨\$\$begin{matrix}â€¦\end{matrix}$$æ¥ç”ŸæˆçŸ©é˜µï¼Œå…¶ä¸­â€¦ è¡¨ç¤ºçš„æ˜¯LaTeX çš„çŸ©é˜µå‘½ä»¤ï¼ŒçŸ©é˜µå‘½ä»¤ä¸­æ¯ä¸€è¡Œä»¥ \ ç»“æŸï¼ŒçŸ©é˜µçš„å…ƒç´ ä¹‹é—´ç”¨&amp;æ¥åˆ†éš”å¼€ã€‚</p></blockquote><p>ä¾‹å¦‚: å†™ä¸€ä¸ªç®€å•çŸ©é˜µ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">  \begin&#123;matrix&#125;</span><br><span class="line">   1 &amp; 2 &amp; 3 \\</span><br><span class="line">   4 &amp; 5 &amp; 6 \\</span><br><span class="line">   7 &amp; 8 &amp; 9</span><br><span class="line">  \end&#123;matrix&#125; \tag&#123;1&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><script type="math/tex; mode=display">\begin{matrix}1 & 2 & 3 \\4 & 5 & 6 \\7 & 8 & 9\end{matrix} \tag{1}</script><a id="more"></a><h3 id="å¸¦æ‹¬å·çš„Matrix"><a href="#å¸¦æ‹¬å·çš„Matrix" class="headerlink" title="å¸¦æ‹¬å·çš„Matrix"></a>å¸¦æ‹¬å·çš„Matrix</h3><hr><p>æ„Ÿè§‰(1)ä¸­çš„çŸ©é˜µä¸æ˜¯å¾ˆç¾è§‚ï¼Œå¯ä»¥ç»™çŸ©é˜µåŠ ä¸Šæ‹¬å·ï¼ŒåŠ æ‹¬å·çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œå¤§è‡´å¯åˆ†ä¸ºä¸¤ç§ï¼šä½¿ç”¨\left â€¦ \right æˆ–è€…æŠŠå…¬å¼å‘½ä»¤ä¸­çš„matrix æ”¹æˆ pmatrixã€bmatrixã€Bmatrixã€vmatrixã€Vmatrixç­‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">  \begin&#123;pmatrix&#125;</span><br><span class="line">   1 &amp; 2 &amp; 3 \\</span><br><span class="line">   4 &amp; 5 &amp; 6 \\</span><br><span class="line">   7 &amp; 8 &amp; 9</span><br><span class="line">  \end&#123;pmatrix&#125; \tag&#123;2&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><script type="math/tex; mode=display">\begin{pmatrix}1 & 2 & 3 \\4 & 5 & 6 \\7 & 8 & 9\end{pmatrix} \tag{2}</script><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">  \begin&#123;bmatrix&#125;</span><br><span class="line">   1 &amp; 2 &amp; 3 \\</span><br><span class="line">   4 &amp; 5 &amp; 6 \\</span><br><span class="line">   7 &amp; 8 &amp; 9</span><br><span class="line">  \end&#123;bmatrix&#125; \tag&#123;3&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><script type="math/tex; mode=display">\begin{bmatrix}1 & 2 & 3 \\4 & 5 & 6 \\7 & 8 & 9\end{bmatrix} \tag{3}</script><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">  \begin&#123;Bmatrix&#125;</span><br><span class="line">   1 &amp; 2 &amp; 3 \\</span><br><span class="line">   4 &amp; 5 &amp; 6 \\</span><br><span class="line">   7 &amp; 8 &amp; 9</span><br><span class="line">  \end&#123;Bmatrix&#125; \tag&#123;4&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><script type="math/tex; mode=display">\begin{Bmatrix}1 & 2 & 3 \\4 & 5 & 6 \\7 & 8 & 9\end{Bmatrix} \tag{4}</script><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">  \begin&#123;vmatrix&#125;</span><br><span class="line">   1 &amp; 2 &amp; 3 \\</span><br><span class="line">   4 &amp; 5 &amp; 6 \\</span><br><span class="line">   7 &amp; 8 &amp; 9</span><br><span class="line">  \end&#123;vmatrix&#125; \tag&#123;5&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><script type="math/tex; mode=display">\begin{vmatrix}1 & 2 & 3 \\4 & 5 & 6 \\7 & 8 & 9\end{vmatrix} \tag{5}</script><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">  \begin&#123;Vmatrix&#125;</span><br><span class="line">   1 &amp; 2 &amp; 3 \\</span><br><span class="line">   4 &amp; 5 &amp; 6 \\</span><br><span class="line">   7 &amp; 8 &amp; 9</span><br><span class="line">  \end&#123;Vmatrix&#125; \tag&#123;6&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><script type="math/tex; mode=display">\begin{Vmatrix}1 & 2 & 3 \\4 & 5 & 6 \\7 & 8 & 9\end{Vmatrix} \tag{6}</script><p>å¢å¹¿çŸ©é˜µ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$$ </span><br><span class="line">\left[</span><br><span class="line">    \begin&#123;array&#125;&#123;cc|c&#125;</span><br><span class="line">      1 &amp; 2 &amp; 3 \\</span><br><span class="line">      4 &amp; 5 &amp; 6</span><br><span class="line">    \end&#123;array&#125;</span><br><span class="line">\right] \tag&#123;7&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><script type="math/tex; mode=display">\left[    \begin{array}{cc|c}      1 & 2 & 3 \\      4 & 5 & 6    \end{array}\right] \tag{7}</script><p>ç»„åˆçŸ©é˜µ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$$ </span><br><span class="line">\left[</span><br><span class="line">    \begin&#123;pmatrix&#125;</span><br><span class="line">      1 &amp; 2 &amp; 3 \\</span><br><span class="line">      4 &amp; 5 &amp; 6</span><br><span class="line">    \end&#123;pmatrix&#125;</span><br><span class="line">\right] \tag&#123;7&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><script type="math/tex; mode=display">\left[\begin{pmatrix}1 & 2 & 3 \\4 & 5 & 6\end{pmatrix}\right] \tag{8}</script><h3 id="å¸¦çœç•¥ç¬¦å·çš„Matrix"><a href="#å¸¦çœç•¥ç¬¦å·çš„Matrix" class="headerlink" title="å¸¦çœç•¥ç¬¦å·çš„Matrix"></a>å¸¦çœç•¥ç¬¦å·çš„Matrix</h3><p>\ddots è¡¨ç¤ºï¼š    <strong>â‹±</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$$ </span><br><span class="line">\left[</span><br><span class="line">    \begin&#123;matrix&#125;</span><br><span class="line">      1 &amp; 2 &amp; 3 \\</span><br><span class="line">      4 &amp; \ddots &amp; 6 \\</span><br><span class="line">      7 &amp; 8 &amp; 9</span><br><span class="line">    \end&#123;matrix&#125;</span><br><span class="line">\right] \tag&#123;9&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><script type="math/tex; mode=display">\left[    \begin{matrix}      1 & 2 & 3 \\      4 & \ddots & 6 \\      7 & 8 & 9    \end{matrix}\right] \tag{9}</script><p>\vdots è¡¨ç¤ºï¼š <strong>â‹®</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$$ </span><br><span class="line">\left[</span><br><span class="line">    \begin&#123;matrix&#125;</span><br><span class="line">      1 &amp; \vdots &amp; 3 \\</span><br><span class="line">      4 &amp; \vdots &amp; 6</span><br><span class="line">    \end&#123;matrix&#125;</span><br><span class="line">\right] \tag&#123;10&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><script type="math/tex; mode=display">\left[\begin{matrix}1 & \vdots & 3 \\4 & \vdots & 6\end{matrix}\right] \tag{10}</script><p>\cdots è¡¨ç¤ºï¼š <strong>â‹¯</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$$ </span><br><span class="line">\left[</span><br><span class="line">    \begin&#123;matrix&#125;</span><br><span class="line">      1 &amp; \cdots &amp; 3 \\</span><br><span class="line">      4 &amp; \cdots &amp; 6</span><br><span class="line">    \end&#123;matrix&#125;</span><br><span class="line">\right] \tag&#123;11&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><script type="math/tex; mode=display">\left[\begin{matrix}1 & \cdots & 3 \\4 & \cdots & 6\end{matrix}\right] \tag{11}</script><p>æ›´å¤šLaTeXè¯­æ³•<a href="https://katex.org/docs/supported.html" target="_blank" rel="noopener">è¯·ç‚¹å‡»è¿™é‡Œ</a></p><script type="math/tex; mode=display">e=mc^2</script><script type="math/tex; mode=display">x^y = (1+e^x)^-2xy^w</script><script type="math/tex; mode=display">lim_{1\to+\infty}P(|\frac{1}{n}\sum_i^nX_i-\mu|<\epsilon)=1, i=1,...,n</script><script type="math/tex; mode=display">\cos 2\theta = \cos^2 \theta - \sin^2 \theta = 2 \cos^2 \theta</script><script type="math/tex; mode=display">\begin{equation}\begin{split}\frac{\partial^2 f}{\partial{x^2}} &= \frac{\partial(\Delta_x f(i,j))}{\partial x} = \frac{\partial(f(i+1,j)-f(i,j))}{\partial x} \\&= \frac{\partial f(i+1,j)}{\partial x} - \frac{\partial f(i,j)}{\partial x} \\&= f(i+2,j) -2f(f+1,j) + f(i,j)\end{split}\nonumber\end{equation}</script><script type="math/tex; mode=display">\bar{y}\breve{a}\hat{\theta}\widehat{ac}( \big( \Big( \bigg( \Bigg(</script><script type="math/tex; mode=display">\def\arraystretch{1.5}   \begin{array}{c:c:c}   a & b & c \\ \hline   d & e & f \\   \hdashline   g & h & i\end{array}\tag{11}</script><script type="math/tex; mode=display">\left[    \begin{matrix}      1 & \vdots & 3 \\      4 & \vdots & 6    \end{matrix}\right]\implies</script><script type="math/tex; mode=display">x = \frac{(-b +- sqrt(b^2-4ac))}{(2a)}</script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;æœ€è¿‘ä¸€ç›´å­¦ä¹  çº¿æ€§ä»£æ•°ï¼Œé€šè¿‡latexæ¥å†™æ•°å­¦å…¬å¼ï¼Œæ›¿ä»£äº†ä½¿ç”¨æˆªå›¾çš„æ–¹å¼æ¥å†™åšå®¢ï¼Œå½“ç„¶ç›´æ¥ä¹¦å†™ä¸€ä¸ªæ•°å­¦å…¬å¼ä¹Ÿæ˜¯æœ‰ä¸€å®šéš¾åº¦ï¼Œç”±æ­¤æˆ‘ä»¬éœ€è¦ä¸æ–­çš„ç§¯ç´¯ï¼Œä¸‹æ–‡å°†ç®€å•ä»‹ç»ä½¿ç”¨LaTeXä¹¦å†™çŸ©é˜µï¼Œæ›´å¤šçš„æ•°å­¦å…¬å¼å¯ä»¥å‚è€ƒLaTeXå®˜æ–¹æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;h3 id=&quot;LaTeX-å†™ç®€å•Matrixè¯­æ³•&quot;&gt;&lt;a href=&quot;#LaTeX-å†™ç®€å•Matrixè¯­æ³•&quot; class=&quot;headerlink&quot; title=&quot;LaTeX å†™ç®€å•Matrixè¯­æ³•&quot;&gt;&lt;/a&gt;LaTeX å†™ç®€å•Matrixè¯­æ³•&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨\$\$begin{matrix}â€¦\end{matrix}$$æ¥ç”ŸæˆçŸ©é˜µï¼Œå…¶ä¸­â€¦ è¡¨ç¤ºçš„æ˜¯LaTeX çš„çŸ©é˜µå‘½ä»¤ï¼ŒçŸ©é˜µå‘½ä»¤ä¸­æ¯ä¸€è¡Œä»¥ \ ç»“æŸï¼ŒçŸ©é˜µçš„å…ƒç´ ä¹‹é—´ç”¨&amp;amp;æ¥åˆ†éš”å¼€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¾‹å¦‚: å†™ä¸€ä¸ªç®€å•çŸ©é˜µ&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  \begin&amp;#123;matrix&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   1 &amp;amp; 2 &amp;amp; 3 \\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   4 &amp;amp; 5 &amp;amp; 6 \\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   7 &amp;amp; 8 &amp;amp; 9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  \end&amp;#123;matrix&amp;#125; \tag&amp;#123;1&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$$&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;script type=&quot;math/tex; mode=display&quot;&gt;
\begin{matrix}
1 &amp; 2 &amp; 3 \\
4 &amp; 5 &amp; 6 \\
7 &amp; 8 &amp; 9
\end{matrix} \tag{1}&lt;/script&gt;
    
    </summary>
    
      <category term="0xF åŠå…¬æŠ€èƒ½" scheme="https://deletee.github.io/categories/0xF-%E5%8A%9E%E5%85%AC%E6%8A%80%E8%83%BD/"/>
    
      <category term="0xF0 MarkDown" scheme="https://deletee.github.io/categories/0xF-%E5%8A%9E%E5%85%AC%E6%8A%80%E8%83%BD/0xF0-MarkDown/"/>
    
    
      <category term="markdown" scheme="https://deletee.github.io/tags/markdown/"/>
    
      <category term="LaTeX" scheme="https://deletee.github.io/tags/LaTeX/"/>
    
  </entry>
  
  <entry>
    <title>åˆ©ç”¨fuse_dfså¿«é€Ÿå»ºç«‹hdfsäº‘å­˜å‚¨</title>
    <link href="https://deletee.github.io/2018/08/16/fuse-hdfs/"/>
    <id>https://deletee.github.io/2018/08/16/fuse-hdfs/</id>
    <published>2018-08-16T07:46:30.000Z</published>
    <updated>2019-01-16T13:20:01.581Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€ä»‹ç»"><a href="#ä¸€ã€ä»‹ç»" class="headerlink" title="ä¸€ã€ä»‹ç»"></a>ä¸€ã€ä»‹ç»</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å°†HDFSæŒ‚è½½åˆ°æœ¬åœ°ï¼Œå…è®¸ç”¨æˆ·åƒè®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸€æ ·è®¿é—®è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿï¼Œç”¨æˆ·å¯åƒè¯»å†™æœ¬åœ°æ–‡ä»¶ä¸€æ ·è¯»å†™HDFSä¸Šçš„æ–‡ä»¶ï¼Œå¤§å¤§ç®€åŒ–äº†HDFSä½¿ç”¨ï¼Œæ–¹æ³•è¾ƒä¸ºå¸¸ç”¨ä¸¤ç§æ–¹æ³•æ˜¯ï¼šåˆ©ç”¨fuse_dfsæˆ–è€…åˆ©ç”¨NFSv3ï¼Œå› NFSv3éœ€å¯¹Hadoopé›†ç¾¤ç«¯è¿›è¡Œæ“ä½œï¼Œä¿®æ”¹ä»£ä»·å¤ªå¤§ï¼Œæœ¬æ–‡ä»‹ç»ä»¥fuse_dfsï¼Œåªéœ€åœ¨å®¢æˆ·ç«¯è¿›è¡Œé…ç½®å³å¯æŒ‚è½½hdfsã€‚<br><a id="more"></a><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç”¨æˆ·ç©ºé—´æ–‡ä»¶ç³»ç»Ÿï¼ˆFilesystem in Userspaceï¼Œç®€ç§°FUSEï¼‰æ˜¯ä¸€ä¸ªé¢å‘ç±»Unixè®¡ç®—æœºæ“ä½œç³»ç»Ÿçš„è½¯ä»¶æ¥å£ï¼Œå®ƒä½¿æ— ç‰¹æƒçš„ç”¨æˆ·èƒ½å¤Ÿæ— éœ€ç¼–è¾‘å†…æ ¸ä»£ç è€Œåˆ›å»ºè‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿã€‚ç›®å‰Linuxé€šè¿‡å†…æ ¸æ¨¡å—å¯¹æ­¤è¿›è¡Œæ”¯æŒã€‚ä¸€äº›æ–‡ä»¶ç³»ç»Ÿå¦‚ZFSã€glusterfså’Œlustreä½¿ç”¨FUSEå®ç°ã€‚Linuxç”¨äºæ”¯æŒç”¨æˆ·ç©ºé—´æ–‡ä»¶ç³»ç»Ÿçš„å†…æ ¸æ¨¡å—åå«FUSEï¼ŒFUSEä¸€è¯æœ‰æ—¶ç‰¹æŒ‡Linuxä¸‹çš„ç”¨æˆ·ç©ºé—´æ–‡ä»¶ç³»ç»Ÿã€‚é€šè¿‡ä½¿ç”¨Hadoopçš„Fuse-DFSåˆ†ç±»æ¨¡å—ï¼Œä»»æ„ä¸€ä¸ªHadoopæ–‡ä»¶ç³»ç»Ÿ(ä¸è¿‡ä¸€èˆ¬ä¸ºHDFS)éƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ªæ ‡å‡†æ–‡ä»¶ç³»ç»Ÿè¿›è¡ŒæŒ‚è½½ã€‚<br><br><br>Hadooopæºç ä¸­è‡ªå¸¦äº†fuse-dfsæ¨¡å—ï¼Œåˆ©ç”¨fuse_dfså°†hdfså½“ä¸€ä¸ªç½‘ç›˜æŒ‚è½½åˆ°æœ¬åœ°ã€‚</p><h3 id="äºŒã€åº”ç”¨åœºæ™¯"><a href="#äºŒã€åº”ç”¨åœºæ™¯" class="headerlink" title="äºŒã€åº”ç”¨åœºæ™¯"></a>äºŒã€åº”ç”¨åœºæ™¯</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åŒæ­¥ï¼šå®ç°ç”¨æˆ·å¯¹ä¸ªäººè®¡ç®—æŒ‡å®šç›®å½•ä¸‹çš„ç‰¹å®šç±»å‹çš„æ–‡ä»¶è‡ªåŠ¨ä¸HDFSåŒæ­¥ï¼Œå®æ—¶ç›‘æµ‹ç”¨æˆ·æ–‡ä»¶å˜åŒ–æƒ…å†µã€‚ä¸éœ€è¦ç”¨æˆ·å¹²é¢„å°±èƒ½åŠæ—¶è‡ªåŠ¨å¤‡ä»½æ–‡ä»¶ã€‚å½“ç”¨æˆ·æ–°å»ºã€ä¿®æ”¹æˆ–åˆ é™¤æ–‡ä»¶ï¼ˆç›®å½•ï¼‰æ—¶è‡ªåŠ¨æ›´æ–°åŒæ­¥ï¼Œä¿éšœç”¨æˆ·é‡è¦æ–‡ä»¶çš„å®‰å…¨ã€‚å½“ç”¨æˆ·ç§»åŠ¨åŠå…¬æ—¶ï¼Œå¯ç›´æ¥ä»HDFSè®¿é—®ï¼Œçœç•¥äº†ç§»åŠ¨å­˜å‚¨ä»‹è´¨çš„æ‹·è´è¿‡ç¨‹ï¼Œæé«˜ç”¨æˆ·å·¥ä½œæ•ˆç‡ã€‚æ›´æ¢æ–°è®¡ç®—æœºæ—¶ï¼Œç”¨æˆ·ç™»å½•ååŸè®¡ç®—æœºä¸­çš„ä¸ªäººæ–‡ä»¶å°†è‡ªåŠ¨ä»HDFSå­˜å‚¨ä¸­åŒæ­¥åˆ°æ–°è®¡ç®—æœºä¸­ã€‚ä¾‹å¦‚ï¼šé€‚ç”¨æ•°æ®ä»“åº“éœ€è¦ETLè¿›è¡ŒHadoopæ–‡ä»¶è¿›è¡Œftpæˆ–è€…rsyncæ¨é€çš„åœºæ™¯ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç½‘ç›˜ï¼šç”¨æˆ·å¯å°†ä¸å¸¸ç”¨çš„æ–‡ä»¶å­˜å‚¨åœ¨HDFSå­˜å‚¨ä¸­ï¼Œä»è€ŒèŠ‚çº¦æœ¬åœ°å­˜å‚¨ç©ºé—´ï¼Œæé«˜æ–‡ä»¶çš„ç‰©ç†å®‰å…¨æ€§ï¼Œä¹Ÿä¾¿äºèµ„æºå…±äº«ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å…±äº«ï¼šç”¨æˆ·å¯ä»¥æŠŠç½‘ç›˜æˆ–åŒæ­¥ç›˜çš„ä»»æ„æ–‡ä»¶ï¼ˆç›®å½•ï¼‰åˆ†äº«ç»™ç¾¤ç»„æˆ–å…¶ä»–ç”¨æˆ·ã€‚åªéœ€è¦åœ¨äº‘å­˜å‚¨ä¸­å­˜å‚¨ä¸€ä»½æ–‡ä»¶ï¼Œè¢«åˆ†äº«çš„äººä¸éœ€è¦ä¸‹è½½å­˜å‚¨å³å¯åœ¨çº¿æµè§ˆï¼Œå®ç°èµ„æºå…±äº«ã€‚è‹¥æºæ–‡ä»¶è¢«ä¿®æ”¹ï¼Œæ‰€æœ‰åˆ†äº«äººç«‹å³ä¼šå¾—åˆ°æ›´æ–°æ–‡ä»¶ã€‚</p><h3 id="ä¸‰ã€éƒ¨ç½²å®ç°"><a href="#ä¸‰ã€éƒ¨ç½²å®ç°" class="headerlink" title="ä¸‰ã€éƒ¨ç½²å®ç°"></a>ä¸‰ã€éƒ¨ç½²å®ç°</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç›®å‰ç½‘ç»œä¸Šå…³äºåˆ©ç”¨fuseæŒ‚è½½hdfsè¾ƒå¤šåŸºäºè¾ƒæ—©ç‰ˆæœ¬çš„hadoop(0.xï¼Œ1.x) ï¼Œå¹¶å¤§å¤šéƒ½åŸºäºæ— kerberosè®¤è¯ï¼Œæœ¬æ–‡ä»¥åŒ—äº¬äº¦åº„Hadoop 2.5.2ä¸ºä¾‹ï¼Œä»‹ç»é€šè¿‡fuseæŒ‚è½½hdfsåˆ°æœ¬åœ°çš„æ–¹æ³•ã€‚è®¾å®šæºç ç›®å½•ä¸º$HADOOP_SRC_HOMEï¼Œé‚£ä¹ˆHadoop 2.x çš„ fuse_dfs æºç ä½äº<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">HADOOP_SRC_HOME/hadoop-hdfs-project/hadoop-hdfs/src/main/native/</span></span><br></pre></td></tr></table></figure></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;é‚£ä¹ˆæ€ä¹ˆç¼–è¯‘fuse_dfsï¼Ÿfuse_dfsæ˜¯Hadoopè‡ªå¸¦æ¨¡å—ï¼Œç¼–è¯‘Hadoopæ—¶ï¼Œå¢åŠ ç¼–è¯‘å‚æ•°require.fuse=trueï¼Œå³ç¼–è¯‘å‘½ä»¤å¦‚ä¸‹<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn package -Drequire.fuse=true -DskipTests -Dmaven.javadoc.skip=true -Dtar</span><br></pre></td></tr></table></figure></p><h4 id="ç¼–è¯‘ç¯å¢ƒ"><a href="#ç¼–è¯‘ç¯å¢ƒ" class="headerlink" title="ç¼–è¯‘ç¯å¢ƒ"></a>ç¼–è¯‘ç¯å¢ƒ</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Linux: 3.16.0-0.bpo.4-amd64 (Debian7)</span><br><span class="line">JDK: 1.7.0_80 64bit</span><br><span class="line">Apache Hadoop: 2.5.2 </span><br><span class="line">Ant: 1.8.2</span><br><span class="line">GCC: 4.7.2 (ç³»ç»Ÿé»˜è®¤)</span><br><span class="line">Protocbuf 2.5.0</span><br><span class="line">Maven 3.0.4</span><br><span class="line">Cmake 2.8.9</span><br><span class="line">Make 3.8.1</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…fuseç­‰ä¾èµ–"><a href="#å®‰è£…fuseç­‰ä¾èµ–" class="headerlink" title="å®‰è£…fuseç­‰ä¾èµ–"></a>å®‰è£…fuseç­‰ä¾èµ–</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -y install maven build-essential autoconf automake libtool cmake zlib1g-dev pkg-config libssl-dev libfuse-dev</span><br></pre></td></tr></table></figure><h4 id="ç¼–è¯‘fuse-dfs-Hadoop"><a href="#ç¼–è¯‘fuse-dfs-Hadoop" class="headerlink" title="ç¼–è¯‘fuse_dfs(Hadoop)"></a>ç¼–è¯‘fuse_dfs(Hadoop)</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¸‹è½½</span></span><br><span class="line">mkdir package &amp;&amp; cd package</span><br><span class="line">wget http://archive.apache.org/dist/hadoop/core/hadoop-2.5.2/hadoop-2.5.2-src.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">è§£å‹</span></span><br><span class="line">tar -zxvf hadoop-2.5.2-src.tar.gz</span><br><span class="line">ln -s hadoop-2.5.2-src hadoop-src</span><br><span class="line">echo "export HADOOP_SRC_HOME=$HOME/package/hadoop-src/" &gt;&gt; .bashrc &amp;&amp; source .bashrc</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç¼–è¯‘</span></span><br><span class="line">cd hadoop-2.5.2-src</span><br><span class="line">mvn package -Drequire.fuse=true -DskipTests -Dmaven.javadoc.skip=true -Dtar</span><br></pre></td></tr></table></figure><h6 id="PS-ç¼–è¯‘Hadoopä¹‹å‰éœ€æå‰å®‰è£…å¥½fuseï¼Œå¦åˆ™fuse-dfsæ— æ³•ç¼–è¯‘æˆåŠŸ"><a href="#PS-ç¼–è¯‘Hadoopä¹‹å‰éœ€æå‰å®‰è£…å¥½fuseï¼Œå¦åˆ™fuse-dfsæ— æ³•ç¼–è¯‘æˆåŠŸ" class="headerlink" title="PS: ç¼–è¯‘Hadoopä¹‹å‰éœ€æå‰å®‰è£…å¥½fuseï¼Œå¦åˆ™fuse_dfsæ— æ³•ç¼–è¯‘æˆåŠŸ"></a>PS: ç¼–è¯‘Hadoopä¹‹å‰éœ€æå‰å®‰è£…å¥½fuseï¼Œå¦åˆ™fuse_dfsæ— æ³•ç¼–è¯‘æˆåŠŸ</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ç¼–è¯‘åçš„fuse_dfsä½äºï¼š</span></span><br><span class="line"><span class="meta">$</span><span class="bash">HADOOP_SRC_HOME/hadoop-hdfs-project/hadoop-hdfs-native-client/target/main/native/fuse-dfs/fuse_dfs</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å®Œæ•´çš„HadoopåŒ…åˆ™ä½äºï¼š</span></span><br><span class="line"><span class="meta">$</span><span class="bash">HADOOP_SRC_HOME/hadoop-dist/target/hadoop-2.5.2.tar.gz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸€ä¸ªç”¨äºæŒ‚è½½hdfsçš„è„šæœ¬ï¼š</span></span><br><span class="line"><span class="meta">$</span><span class="bash">HADOOP_SRC_HOME/hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/fuse-dfs/fuse_dfs_wrapper.sh</span></span><br></pre></td></tr></table></figure><h4 id="éƒ¨ç½²Hadoopï¼ˆç•¥ï¼‰"><a href="#éƒ¨ç½²Hadoopï¼ˆç•¥ï¼‰" class="headerlink" title="éƒ¨ç½²Hadoopï¼ˆç•¥ï¼‰"></a>éƒ¨ç½²Hadoopï¼ˆç•¥ï¼‰</h4><h4 id="é…ç½®ã€fuse-dfs-wrapper-sh"><a href="#é…ç½®ã€fuse-dfs-wrapper-sh" class="headerlink" title="é…ç½®ã€fuse_dfs_wrapper.sh"></a>é…ç½®ã€fuse_dfs_wrapper.sh</h4><p>HDFSæŒ‚è½½ä¸»è¦ä¾èµ–æºç çš„ä¸¤ä¸ªæ¨¡å—ï¼Œä¸€ä¸ªæ˜¯hadoop-hdfs-projectï¼Œå¦ä¸€ä¸ªæ˜¯hadoop-clientï¼Œå¯å°†ä¾èµ–çš„jaråŒ…å•ç‹¬æç‚¼å‡ºæ¥ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/usr/bin/env bash</span></span><br><span class="line">export HADOOP_HOME=$&#123;HADOOP_HOME:-/usr/local/share/hadoop&#125;</span><br><span class="line">export HADOOP_CONF_DIR=$&#123;HADOOP_HOME&#125;/etc/hadoop</span><br><span class="line">export HADOOP_PREFIX=$HOME/package/hadoop-src</span><br><span class="line">export JAVA_HOME=$HOME/opt/jdk</span><br><span class="line"></span><br><span class="line">export FUSEDFS_PATH="$HADOOP_PREFIX/hadoop-hdfs-project/hadoop-hdfs/target/native/main/native/fuse-dfs"</span><br><span class="line">export LIBHDFS_PATH="$HADOOP_PREFIX/hadoop-hdfs-project/hadoop-hdfs/target/native/target/usr/local/lib"</span><br><span class="line"></span><br><span class="line">if [ "$OS_ARCH" = "" ]; then</span><br><span class="line">    export OS_ARCH=amd64</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ "$JAVA_HOME" = "" ]; then</span><br><span class="line">    export  JAVA_HOME=/usr/local/java</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ "$LD_LIBRARY_PATH" = "" ]; then</span><br><span class="line">export LD_LIBRARY_PATH=$JAVA_HOME/jre/lib/$OS_ARCH/server:/usr/local/lib</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">JARS=`find "$HADOOP_PREFIX/hadoop-hdfs-project" -name "*.jar" | xargs`</span><br><span class="line">for jar in $JARS; do</span><br><span class="line">  CLASSPATH=$jar:$CLASSPATH</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">JARS=`find "$HADOOP_PREFIX/hadoop-client" -name "*.jar" | xargs`</span><br><span class="line">for jar in $JARS; do</span><br><span class="line">  CLASSPATH=$jar:$CLASSPATH</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">export CLASSPATH=$HADOOP_CONF_DIR:$CLASSPATH</span><br><span class="line">export PATH=$FUSEDFS_PATH:$PATH</span><br><span class="line">export LD_LIBRARY_PATH=$LIBHDFS_PATH:$JAVA_HOME/jre/lib/$OS_ARCH/server:$LD_LIBRARY_PATH</span><br><span class="line"></span><br><span class="line">fuse_dfs $@</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> sudo bash ./fuse-dfs/fuse_dfs_wrapper.sh hdfs://$&#123;nn&#125;:$&#123;port&#125; /mnt/hdfs</span><br><span class="line">INFO /home/hzxijingjing/package/hadoop-2.5.2-src/hadoop-hdfs-project/hadoop-hdfs/src/main/native/fuse-dfs/fuse_options.c:164 Adding FUSE arg /mnt/hdfs</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŒ‚è½½ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"> df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">rootfs           50G  8.2G   39G  18% /</span><br><span class="line">udev             10M     0   10M   0% /dev</span><br><span class="line">tmpfs           1.6G  216K  1.6G   1% /run</span><br><span class="line">/dev/vda1        50G  8.2G   39G  18% /</span><br><span class="line">tmpfs           5.0M  4.0K  5.0M   1% /run/lock</span><br><span class="line">tmpfs           3.2G     0  3.2G   0% /run/shm</span><br><span class="line">/dev/vdb1        99G   75M   94G   1% /data</span><br><span class="line">fuse_dfs         49G     0   49G   0% /mnt/hdfs  # HDFSæŒ‚è½½æˆåŠŸ</span><br></pre></td></tr></table></figure><p>â€‹ è‡³æ­¤ä¸ºæ­¢ï¼Œå·²å®ç°æ— ç®€å•è®¤è¯çš„HadoopæŒ‚è½½ï¼Œç„¶è€Œå¯¹äºé…ç½®äº†kerberosè®¤è¯çš„Hadoopï¼Œå®æ–½æŒ‚è½½ä¼šå‡ºç°å¦‚ä¸‹æƒ…å†µï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /mnt &amp;&amp; ls -lh</span><br><span class="line">ls: cannot access hdfs: Transport endpoint is not connected</span><br><span class="line">d????????? ? ?      ?          ?            ? hdfs</span><br></pre></td></tr></table></figure></p><p>åç½®å‚æ•° -dï¼Œè¿›å…¥debugæ¨¡å¼ï¼Œ æŸ¥çœ‹è¿è¡Œä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /bin/sh ./fuse-dfs/fuse_dfs_wrapper.sh hdfs://$&#123;nn&#125;:$&#123;port&#125; /mnt/dfs -d</span><br></pre></td></tr></table></figure><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">............ # çœç•¥ä¸€äº›æ— ç”¨æ—¥å¿— </span><br><span class="line">FUSE <span class="keyword">library</span> version: <span class="number">2</span><span class="variable">.9</span><span class="variable">.0</span></span><br><span class="line">nullpath_ok: <span class="number">0</span></span><br><span class="line">nopath: <span class="number">0</span></span><br><span class="line">utime_omit_ok: <span class="number">0</span></span><br><span class="line"><span class="keyword">unique</span>: <span class="number">1</span>, opcode: INIT (<span class="number">26</span>), nodeid: <span class="number">0</span>, insize: <span class="number">56</span>, pid: <span class="number">0</span></span><br><span class="line">INIT: <span class="number">7</span><span class="variable">.23</span></span><br><span class="line">flags=<span class="number">0</span>x0003fffb</span><br><span class="line">max_readahead=<span class="number">0</span>x00020000</span><br><span class="line">INFO /home/hzxijingjing/<span class="keyword">package</span>/hadoop-<span class="number">2</span><span class="variable">.5</span><span class="variable">.2</span>-src/hadoop-hdfs-project/hadoop-hdfs/src/main/native/fuse-dfs/fuse_init<span class="variable">.c</span>:<span class="number">98</span> Mounting <span class="keyword">with</span> options: [ <span class="keyword">protected</span>=(NULL), nn_uri=hdfs:<span class="comment">//hadoop1232.hz.163.org:8020, nn_port=0, debug=0, read_only=0, initchecks=0, no_permissions=0, usetrash=1, entry_timeout=60, attribute_timeout=60, rdbuffer_size=10485760, direct_io=0 ]</span></span><br><span class="line">............ # çœç•¥ä¸€äº›æ— ç”¨æ—¥å¿—                                                                                                                                                                                                                                                                                          </span><br><span class="line">fuseConnectInit: initialized <span class="keyword">with</span> timer period <span class="number">5</span>, expiry period <span class="number">300</span></span><br><span class="line">   INIT: <span class="number">7</span><span class="variable">.18</span></span><br><span class="line">   flags=<span class="number">0</span>x00000039</span><br><span class="line">   max_readahead=<span class="number">0</span>x00020000</span><br><span class="line">   max_write=<span class="number">0</span>x00020000</span><br><span class="line">   max_background=<span class="number">0</span></span><br><span class="line">   congestion_threshold=<span class="number">0</span></span><br><span class="line">   <span class="keyword">unique</span>: <span class="number">1</span>, success, outsize: <span class="number">40</span></span><br><span class="line"><span class="keyword">unique</span>: <span class="number">2</span>, opcode: STATFS (<span class="number">17</span>), nodeid: <span class="number">1</span>, insize: <span class="number">40</span>, pid: <span class="number">13769</span></span><br><span class="line">statfs /</span><br><span class="line">   <span class="keyword">unique</span>: <span class="number">2</span>, success, outsize: <span class="number">96</span></span><br><span class="line"><span class="keyword">unique</span>: <span class="number">3</span>, opcode: GETATTR (<span class="number">3</span>), nodeid: <span class="number">1</span>, insize: <span class="number">56</span>, pid: <span class="number">13815</span></span><br><span class="line">getattr /</span><br><span class="line">fuseNewConnect: failed to find Kerberos ticket cache file '/tmp/krb5cc_0'.  Did you remember to kinit <span class="keyword">for</span> UID <span class="number">0</span>?</span><br><span class="line">fuseConnect(usrname=root): fuseNewConnect failed <span class="keyword">with</span> error code -<span class="number">13</span></span><br><span class="line">fuseConnectAsThreadUid: failed to open a libhdfs connection!  error -<span class="number">13</span>.</span><br><span class="line">   <span class="keyword">unique</span>: <span class="number">3</span>, error: -<span class="number">5</span> (Input/<span class="keyword">output</span> error), outsize: <span class="number">16</span></span><br><span class="line"><span class="keyword">unique</span>: <span class="number">4</span>, opcode: STATFS (<span class="number">17</span>), nodeid: <span class="number">1</span>, insize: <span class="number">40</span>, pid: <span class="number">13826</span></span><br></pre></td></tr></table></figure><p>ä»ä¸Šå¯ä»¥çœ‹å‡ºï¼Œå¤§æ¦‚æ˜¯æ— æ³•é€šè¿‡kerberosçš„cacheæ–‡ä»¶/tmp/krb5cc_0è®¤è¯ï¼Œæ—©å°±æ„è¯†åˆ°åŸºäºkerberosçš„hadoopæ˜¯å—éš¾å•ƒçš„éª¨å¤´ï¼Œç”¨è¿‡kerberosè®¤è¯çš„åŒå­¦éƒ½çŸ¥é“ï¼Œkerberosè®¤è¯ä¾èµ–æœ¬åœ°Linuxå‘½ä»¤ kinit å®ç°è®¤è¯ï¼Œè®¤è¯ä¹‹åé€šå¸¸ä¼šæœ‰ä¸€ä¸ªæœ‰æ•ˆæœŸï¼Œå³åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œæ— éœ€å†æ¬¡è®¤è¯ã€‚</p><p>ç„¶è€Œåˆ©ç”¨fuse_dfsæŒ‚è½½kerberosè®¤è¯çš„HDFSï¼Œæ— è®ºæ˜¯åº¦å¨˜è¿˜æ˜¯è°·çˆ¸åœ¨è¿™æ–¹é¢èµ„æ–™ä¹Ÿæ˜¯æå°‘ï¼Œæ— å¥ˆåªèƒ½çœ‹ä¸‹fuse_dfsçš„æºç ã€‚</p><h4 id="fuse-dfså®ç°"><a href="#fuse-dfså®ç°" class="headerlink" title="fuse-dfså®ç°"></a>fuse-dfså®ç°</h4><p>â€‹ fuse_dfsæ˜¯ç”±Cè¯­è¨€å¼€å‘ï¼Œä»£ç ç›®å½•ä½äº$HADOOP_SRC_HOME/hadoop-hdfs-project/hadoop-hdfs/src/main/native/ï¼ˆä¸Šæ–‡æœ‰æåˆ°ï¼‰<br>â€‹ å¦‚ä¸‹æ˜¯fuse_dfsè¿æ¥hdfsåŠæ“ä½œç›¸å…³æºç æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./fuse-dfs/fuse_connect.c</span><br><span class="line">./libhdfs/hdfs.c</span><br></pre></td></tr></table></figure><h5 id="vim-fuse-connect-c"><a href="#vim-fuse-connect-c" class="headerlink" title="vim fuse_connect.c"></a>vim fuse_connect.c</h5><p>åˆ©ç”¨libhdfså»ºç«‹è¿æ¥<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**å‡½æ•°ä¸»ä½“ä¸­ä¸€æ®µä»£ç è¡¨ç¤ºå¦‚ä½•é€šè¿‡libhdfsè¿æ¥*/</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Create a new libhdfs connection.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param usrname       Username to use for the new connection</span></span><br><span class="line"><span class="comment"> * @param ctx           FUSE context to use for the new connection</span></span><br><span class="line"><span class="comment"> * @param out           (out param) the new libhdfs connection</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @return              0 on success; error code otherwise</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">fuseNewConnect</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *usrname, struct fuse_context *ctx,</span></span></span><br><span class="line"><span class="function"><span class="params">        struct hdfsConn **out)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  <span class="comment">/** </span></span></span><br><span class="line"><span class="function"><span class="comment"> * Find out what type of authentication the system administrator</span></span></span><br><span class="line"><span class="function"><span class="comment"> * has configured.</span></span></span><br><span class="line"><span class="function"><span class="comment"> *</span></span></span><br><span class="line"><span class="function"><span class="comment"> * @return     the type of authentication, or AUTH_CONF_UNKNOWN on error.</span></span></span><br><span class="line"><span class="function"><span class="comment"> */</span></span></span><br><span class="line"><span class="function">  </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//è·å–Hadoopè®¤è¯æ–¹å¼  </span></span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">enum</span> authConf <span class="title">discoverAuthConf</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> ret;</span><br><span class="line">  <span class="keyword">char</span> *val = <span class="literal">NULL</span>;</span><br><span class="line">  <span class="keyword">enum</span> authConf authConf;</span><br><span class="line"></span><br><span class="line">  ret = hdfsConfGetStr(HADOOP_SECURITY_AUTHENTICATION, &amp;val);</span><br><span class="line">  <span class="keyword">if</span> (ret)</span><br><span class="line">    authConf = AUTH_CONF_UNKNOWN;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (!val)</span><br><span class="line">    authConf = AUTH_CONF_OTHER;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(val, <span class="string">"kerberos"</span>))</span><br><span class="line">    authConf = AUTH_CONF_KERBEROS;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    authConf = AUTH_CONF_OTHER;</span><br><span class="line">  <span class="built_in">free</span>(val);</span><br><span class="line">  <span class="keyword">return</span> authConf;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–åˆ°Hadoopçš„è®¤è¯æ–¹å¼ä¹‹åï¼Œé¦–å…ˆæ‰¾kerberosè®¤è¯åçš„cacheæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (gHdfsAuthConf == AUTH_CONF_KERBEROS) &#123;</span><br><span class="line">    findKerbTicketCachePath(ctx, kpath, <span class="keyword">sizeof</span>(kpath));</span><br><span class="line">    <span class="keyword">if</span> (stat(kpath, &amp;st) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"fuseNewConnect: failed to find Kerberos ticket cache "</span></span><br><span class="line">        <span class="string">"file '%s'.  Did you remember to kinit for UID %d?\n"</span>,</span><br><span class="line">        kpath, ctx-&gt;uid);</span><br><span class="line">      ret = -EACCES;</span><br><span class="line">      <span class="keyword">goto</span> error;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥æ‰¾kerberosè®¤è¯åçš„cacheæ–‡ä»¶ï¼Œä»å‘ç°cacheæ–‡ä»¶ä½äºï¼š/tmp/krb5cc_%d</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Find the Kerberos ticket cache path.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * This function finds the Kerberos ticket cache path from the thread ID and</span></span><br><span class="line"><span class="comment"> * user ID of the process making the request.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Normally, the ticket cache path is in a well-known location in /tmp.</span></span><br><span class="line"><span class="comment"> * However, it's possible that the calling process could set the KRB5CCNAME</span></span><br><span class="line"><span class="comment"> * environment variable, indicating that its Kerberos ticket cache is at a</span></span><br><span class="line"><span class="comment"> * non-default location.  We try to handle this possibility by reading the</span></span><br><span class="line"><span class="comment"> * process' environment here.  This will be allowed if we have root</span></span><br><span class="line"><span class="comment"> * capabilities, or if our UID is the same as the remote process' UID.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Note that we don't check to see if the cache file actually exists or not.</span></span><br><span class="line"><span class="comment"> * We're just trying to find out where it would be if it did exist. </span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param path          (out param) the path to the ticket cache file</span></span><br><span class="line"><span class="comment"> * @param pathLen       length of the path buffer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">findKerbTicketCachePath</span><span class="params">(struct fuse_context *ctx,</span></span></span><br><span class="line"><span class="function"><span class="params">                                    <span class="keyword">char</span> *path, <span class="keyword">size_t</span> pathLen)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  FILE *fp = <span class="literal">NULL</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> * <span class="keyword">const</span> KRB5CCNAME = <span class="string">"\0KRB5CCNAME="</span>;</span><br><span class="line">  <span class="keyword">int</span> c = <span class="string">'\0'</span>, pathIdx = <span class="number">0</span>, keyIdx = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">size_t</span> KRB5CCNAME_LEN = <span class="built_in">strlen</span>(KRB5CCNAME + <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// /proc/&lt;tid&gt;/environ contains the remote process' environment.  It is</span></span><br><span class="line">  <span class="comment">// exposed to us as a series of KEY=VALUE pairs, separated by NULL bytes.</span></span><br><span class="line">  <span class="built_in">snprintf</span>(path, pathLen, <span class="string">"/proc/%d/environ"</span>, ctx-&gt;pid);</span><br><span class="line">  fp = fopen(path, <span class="string">"r"</span>);</span><br><span class="line">  <span class="keyword">if</span> (!fp)</span><br><span class="line">    <span class="keyword">goto</span> done;</span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (c == EOF)</span><br><span class="line">      <span class="keyword">goto</span> done;</span><br><span class="line">    <span class="keyword">if</span> (keyIdx == KRB5CCNAME_LEN) &#123;</span><br><span class="line">      <span class="keyword">if</span> (pathIdx &gt;= pathLen - <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">goto</span> done;</span><br><span class="line">      <span class="keyword">if</span> (c == <span class="string">'\0'</span>)</span><br><span class="line">        <span class="keyword">goto</span> done;</span><br><span class="line">      path[pathIdx++] = c;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (KRB5CCNAME[keyIdx++] != c) &#123;</span><br><span class="line">      keyIdx = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    c = fgetc(fp);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">done:</span><br><span class="line">  <span class="keyword">if</span> (fp)</span><br><span class="line">    fclose(fp);</span><br><span class="line">  <span class="keyword">if</span> (pathIdx == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">snprintf</span>(path, pathLen, <span class="string">"/tmp/krb5cc_%d"</span>, ctx-&gt;uid); <span class="comment">// cacheæ–‡ä»¶çš„ç›®å½•</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    path[pathIdx] = <span class="string">'\0'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>â€‹ ç”±ä¸Šä»£ç å¯ä»¥çœ‹å‡ºï¼Œå‡½æ•°findKerbTicketCachePathä»ä¸Šä¸‹æ–‡ctxä¸­è·å–uidä»è€Œè·å–<strong>/tmp/krb5cc_${uid}</strong>ï¼Œé‚£ä¹ˆå¦‚ä½•æŒ‚è½½hdfsæ—¶ï¼Œè¯†åˆ«åˆ°kerberosçš„cacheæ–‡ä»¶å‘¢ï¼Ÿ</p><h5 id="vim-hdfs-c"><a href="#vim-hdfs-c" class="headerlink" title="vim hdfs.c"></a>vim hdfs.c</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">hdfsBuilder</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> forceNewInstance;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *nn;</span><br><span class="line">    tPort port;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *kerbTicketCachePath;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *userName;</span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> KERBEROS_TICKET_CACHE_PATH <span class="meta-string">"hadoop.security.kerberos.ticket.cache.path"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (bld-&gt;kerbTicketCachePath) &#123;</span><br><span class="line">            jthr = hadoopConfSetStr(env, jConfiguration,</span><br><span class="line">                KERBEROS_TICKET_CACHE_PATH, bld-&gt;kerbTicketCachePath);</span><br><span class="line">            <span class="keyword">if</span> (jthr) &#123;</span><br><span class="line">                ret = printExceptionAndFree(env, jthr, PRINT_EXC_ALL,</span><br><span class="line">                    <span class="string">"hdfsBuilderConnect(%s)"</span>,</span><br><span class="line">                    hdfsBuilderToStr(bld, buf, <span class="keyword">sizeof</span>(buf)));</span><br><span class="line">                <span class="keyword">goto</span> done;</span><br><span class="line">            &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆå®šä½åˆ°ï¼šKERBEROS_TICKET_CACHE_PATH â€œhadoop.security.kerberos.ticket.cache.pathâ€ </p><p>åœ¨core-site.xmlæ·»åŠ å¦‚ä¸‹å±æ€§ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.security.kerberos.ticket.cache.path<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>/tmp/krb5cc_$&#123;uid&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>Path to the Kerberos ticket cache. <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p>${uid}æ˜¯ä»€ä¹ˆï¼Ÿuid=7765</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kinit urs<span class="variable">.keytab</span> urs</span><br><span class="line">Ticket cache: FILE:/tmp/krb5cc_7765</span><br><span class="line">Default principal: urs@HADOOP<span class="variable">.HZ</span><span class="variable">.NETEASE</span><span class="variable">.COM</span></span><br><span class="line"></span><br><span class="line">Valid starting    Expires           Service principal</span><br><span class="line"><span class="number">10</span>/<span class="number">05</span>/<span class="number">2018</span> <span class="number">10</span>:<span class="number">52</span>  <span class="number">10</span>/<span class="number">05</span>/<span class="number">2018</span> <span class="number">20</span>:<span class="number">52</span>  krbtgt/HADOOP<span class="variable">.HZ</span><span class="variable">.NETEASE</span><span class="variable">.COM</span>@HADOOP<span class="variable">.HZ</span><span class="variable">.NETEASE</span><span class="variable">.COM</span></span><br><span class="line">  renew <span class="keyword">until</span> <span class="number">11</span>/<span class="number">05</span>/<span class="number">2018</span> <span class="number">10</span>:<span class="number">52</span></span><br></pre></td></tr></table></figure><p>æœ€åé‡æ–°æŒ‚è½½ï¼Œæ“ä½œæ‰‹æ³•åŒä¸Šã€‚</p><p> <img src="http://nos.netease.com/knowledge/4bb30049-1f3b-40b2-b065-c57605ab708f" style="height:110px;width:700px"></p><p> <img src="http://nos.netease.com/knowledge/29f7fedd-7a00-4c51-bc38-a2615ce3d49c" style="height:370px;width:600px"></p><p><strong>å¤§åŠŸå‘Šæˆ!</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ä¸€ã€ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä¸€ã€ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ä»‹ç»&quot;&gt;&lt;/a&gt;ä¸€ã€ä»‹ç»&lt;/h3&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;å°†HDFSæŒ‚è½½åˆ°æœ¬åœ°ï¼Œå…è®¸ç”¨æˆ·åƒè®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸€æ ·è®¿é—®è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿï¼Œç”¨æˆ·å¯åƒè¯»å†™æœ¬åœ°æ–‡ä»¶ä¸€æ ·è¯»å†™HDFSä¸Šçš„æ–‡ä»¶ï¼Œå¤§å¤§ç®€åŒ–äº†HDFSä½¿ç”¨ï¼Œæ–¹æ³•è¾ƒä¸ºå¸¸ç”¨ä¸¤ç§æ–¹æ³•æ˜¯ï¼šåˆ©ç”¨fuse_dfsæˆ–è€…åˆ©ç”¨NFSv3ï¼Œå› NFSv3éœ€å¯¹Hadoopé›†ç¾¤ç«¯è¿›è¡Œæ“ä½œï¼Œä¿®æ”¹ä»£ä»·å¤ªå¤§ï¼Œæœ¬æ–‡ä»‹ç»ä»¥fuse_dfsï¼Œåªéœ€åœ¨å®¢æˆ·ç«¯è¿›è¡Œé…ç½®å³å¯æŒ‚è½½hdfsã€‚&lt;br&gt;
    
    </summary>
    
      <category term="0x2 æŠ€æœ¯å¹³å°" scheme="https://deletee.github.io/categories/0x2-%E6%8A%80%E6%9C%AF%E5%B9%B3%E5%8F%B0/"/>
    
      <category term="0x20 Hadoop" scheme="https://deletee.github.io/categories/0x2-%E6%8A%80%E6%9C%AF%E5%B9%B3%E5%8F%B0/0x20-Hadoop/"/>
    
    
      <category term="fuse" scheme="https://deletee.github.io/tags/fuse/"/>
    
      <category term="hdfs" scheme="https://deletee.github.io/tags/hdfs/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ä»“åº“ETLä¹‹æ•°æ®äº¤æ¢</title>
    <link href="https://deletee.github.io/2017/06/05/edw-data-exchange/"/>
    <id>https://deletee.github.io/2017/06/05/edw-data-exchange/</id>
    <published>2017-06-05T07:46:30.000Z</published>
    <updated>2019-01-16T13:20:01.580Z</updated>
    
    <content type="html"><![CDATA[<p>â€‹          ä»1990å¹´æ•°æ®ä»“åº“ä¹‹çˆ¶æ¯”å°”Â·æ©é—¨ï¼ˆBill Inmonï¼‰æå‡ºæ•°æ®ä»“åº“çš„æ¦‚å¿µï¼ŒETLä½œä¸ºæ•°æ®ä»“åº“çš„æ ¸å¿ƒç»„ä»¶ï¼Œåœ¨ä¼ ç»Ÿçš„æ•°æ®ä»“åº“ä¸­æ˜¯æœåŠ¡äºæ•°æ®é‡‡é›†ï¼Œæ•°æ®å¤„ç†ï¼Œå¤§æ•°æ®æ—¶ä»£æ¥ä¸´ï¼Œå¯¹ETLçš„ç†è§£ä¹Ÿç”±ã€æŠ½å–ã€è½¬æ¢ã€åŠ è½½ã€‘å‡çº§åˆ°ã€äº¤æ¢ã€‘è¿™ä¸ªå±‚é¢ã€‚å¦‚æœä½ ä¹Ÿè€ƒè™‘å»ºè®¾ä¼ä¸šçº§æ•°æ®ä»“åº“å¯ä»¥ä½œä¸ºå‚è€ƒã€‚</p><a id="more"></a><h3 id="0x0-ETLä¹‹å®šä½"><a href="#0x0-ETLä¹‹å®šä½" class="headerlink" title="0x0 ETLä¹‹å®šä½"></a>0x0 ETLä¹‹å®šä½</h3><p>ä¸šå†…å¤šæ•°çŸ¥åæ•°æ®ä»“åº“è§£å†³æ–¹æ¡ˆæä¾›æ–¹åˆ©ç”¨å…¬å¸çš„è‡ªæˆ‘ç ”å‘çš„ETLå·¥å…·åŠæ•°æ®å¹³å°ä»ç”Ÿäº§ç³»ç»Ÿæ¥å…¥æ•°æ®æºï¼Œåœ¨åº“å†…è¿›è¡Œæ•°æ®è½¬æ¢å·¥ä½œï¼Œä¸å…¶ä»–ä¸‰æ–¹å‚å®¶ï¼ˆä¹™æ–¹ï¼‰ä¸€æ ·ï¼Œè‡ªé¡¾ä¸€äº©ä¸‰åˆ†åœ°ï¼Œå®Œæˆäº†ç«¯å¯¹ç«¯çš„æ•°æ®æ”¯æ’‘ï¼Œç„¶è€Œå¯¹äºç”²æ–¹è€Œè¨€ï¼Œå„ä¸ªå‚å®¶çš„ç«¯çš„æ•°æ®é‡‡é›†æ— ç–‘æ˜¯å¯¹ç”Ÿäº§ç³»ç»Ÿçš„å¢åŠ å¤šå€å‹åŠ›ï¼Œå¦å¤–å‚å®¶ä¹‹é—´çš„æ•°æ®äº¤æ¢ä¹Ÿæ˜¯å¸¸æ€ã€‚</p><p>å»ºè®¾æ•°æ®ä»“åº“çš„æ¨¡å¼æœ‰ç”±ä¸Šè€Œä¸‹ä»¥åŠç”±ä¸‹è€Œä¸Šä¸¤ç§æ¨¡å¼ï¼Œå¯¹äºå¤§ä¼ä¸šè€Œè¨€ï¼Œå„ä¸ªéƒ¨é—¨çš„è¿è¥æ¨¡å¼ã€ä¸šåŠ¡æ–¹å‘å‡æœ‰åƒå·®ä¸‡åˆ«ï¼Œéƒ¨é—¨å¤§å¤šå»ºè®¾è‡ªå·±çš„æ•°æ®ä»“åº“ï¼Œå…¬å¸ä»å„ä¸ªéƒ¨é—¨å»ºè®¾çš„æ•°æ®ä»“åº“ä¹‹ä¸Šå»ºç«‹æ€»çš„æ•°æ®ä»“åº“ã€‚åœ¨æˆ‘ä»¬å…¬å¸ï¼Œéƒ¨é—¨ä¹‹é—´æ•°æ®ETLï¼Œä¸€æ–¹é¢å› ä¸šåŠ¡æ¨¡å¼ï¼Œå¦ä¸€æ–¹é¢å„éƒ¨é—¨æ•°æ®å¹³å°äº§å“å¤šæ ·åŒ–ï¼ŒETLå¤§å¤šé‡‡ç”¨ftpã€rsyncè¿™ç§æ–‡ä»¶æ•°æ®ä¼ è¾“æ–¹å¼ï¼Œæ—¥å¿—é‡‡é›†åˆ™ä½¿ç”¨DataStreamæˆ–flumeç­‰ã€‚æˆ‘ä»¬é€šå¸¸é¢ä¸´ä¼ä¸šä¹‹é—´çš„æ•°æ®äº¤äº’ï¼Œæ”¿åºœéƒ¨é—¨çš„æ•°æ®æ¨é€ï¼Œå³ä¾¿æ˜¯ä¸€ä¸ªéƒ¨é—¨å†…éƒ¨æ•°æ®çš„äº¤æ¢ä¹Ÿæ˜¯å¸¸æ€ï¼Œæ•°æ®å…±äº«æœ‰åˆ©äºå¤§æ•°æ®ç”Ÿæ€å‘å±•ï¼Œç¦»çº¿å¹³å°éœ€è¦ç”Ÿäº§ç³»ç»Ÿçš„æ•°æ®è¿›è¡Œè®¡ç®—ï¼Œç”Ÿäº§ç³»ç»Ÿä¹Ÿéœ€è¦ç¦»çº¿å¹³å°çš„æ•°æ®æ”¯æ’‘ã€‚æ•°æ®äº¤æ¢ä½œä¸ºETLä¸€ä¸ªå‡çº§æ¨¡å¼æˆä¸ºä¼ä¸šçº§æ•°æ®ä»“åº“å»ºè®¾çš„å¿…ç„¶ã€‚</p><h3 id="0x1-äº¤æ¢å¹³å°çš„äº§ç”Ÿ"><a href="#0x1-äº¤æ¢å¹³å°çš„äº§ç”Ÿ" class="headerlink" title="0x1 äº¤æ¢å¹³å°çš„äº§ç”Ÿ"></a>0x1 äº¤æ¢å¹³å°çš„äº§ç”Ÿ</h3><p>å¤§å¤šå¤§æ•°æ®ä»ä¸šäººå£«ä¹Ÿè®¤è¯†åˆ°æ•°æ®äº¤æ¢ï¼Œå¾ˆå¤šå‚å®¶ä¹Ÿè®¤è¯†åˆ°äº†ETLæ¨¡å¼çš„ä¸æ—¶ä¿±è¿›ï¼Œé˜¿é‡Œçš„æ•°æ®å·¥åœºï¼Œäºšä¿¡çš„äº‘åŒ–äº¤æ¢å¹³å°ï¼Œåä¸ºçš„äº‘åŒ–äº¤æ¢å¹³å°ä»¥åŠæˆ‘ä»¬çš„çŒ›çŠ¸å¤§æ•°æ®å¹³å°åº”è¿è€Œç”Ÿï¼Œå¤§æ•°æ®äº¤æ¢å¹³å°æœåŠ¡äºä¼ä¸šï¼ˆéƒ¨é—¨ã€ç³»ç»Ÿï¼‰æ•°æ®äº¤æ¢ï¼Œæ•°æ®äº¤æ¢å¯¹äºç”¨æˆ·è€Œè¨€éƒ½æ˜¯é€æ˜çš„ï¼Œä¸ä»…æ»¡è¶³ä¼ ç»Ÿçš„ETLåŠŸèƒ½ï¼ŒåŒæ—¶éœ€è¦æ»¡è¶³åŠ¨æ€æ‰©å±•ã€‚<br>å¤§æ•°æ®å½¢åŠ¿ä¸‹ï¼Œäº’è”ç½‘æ•°æ®ä»“åº“è¾ƒä¹‹ä¼ ç»Ÿçš„æ•°æ®ä»“åº“å¹³å°æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><p><img src="/knowledge/ea0c5fdb-950f-43ae-86f5-a6201eeaa97f.png" alt="ea0c5fdb-950f-43ae-86f5-a6201eeaa97f"></p><p>ä¸ºé€‚åº”æ•°æ®ä»“åº“çš„å‘å±•ï¼Œé‚£ä¹ˆæ•°æ®äº¤æ¢å¹³å°åº”è¯¥å…·å¤‡å“ªäº›èƒ½åŠ›å‘¢ï¼Ÿå°ç¼–è®¤ä¸ºå¯ä»å¦‚ä¸‹å‡ ä¸ªæ–¹é¢è¿›è¡Œé˜è¿°ï¼Œæ•°æ®é‡‡é›†èƒ½åŠ›ï¼Œæ•°æ®å­˜å‚¨èƒ½åŠ›ï¼Œæ•°æ®ç®¡ç†èƒ½åŠ›ï¼Œæ•°æ®è®¡ç®—èƒ½åŠ›ï¼Œå¹³å°å¼€æ”¾èƒ½åŠ›ï¼Œä½œä¸šè°ƒåº¦èƒ½åŠ›ã€‚<br><img src="/knowledge/17d126f8-829b-4698-a332-6eef1cb1ce2b.png" alt="17d126f8-829b-4698-a332-6eef1cb1ce2b"></p><p>(1)    æ•°æ®é‡‡é›†èƒ½åŠ›<br>äº¤æ¢å¹³å°åº”æ”¯æŒå¯¹è¡¨ï¼ˆå…³ç³»è¡¨ï¼Œk-vè¡¨ï¼‰ã€æ–‡ä»¶ï¼ˆç»“æ„åŒ–ã€éç»“æ„åŒ–ï¼‰ã€æ¶ˆæ¯ã€æ•°æ®æµç­‰å¤šç§æ•°æ®å½¢å¼çš„æ”¯æŒï¼ŒåŒæ—¶éœ€æ”¯æŒå¤šæ ·åŒ–çš„é‡‡é›†æ–¹å¼ï¼šå®æ—¶å¢é‡æµå¼ï¼ˆflumeã€DataStreamç­‰ï¼‰ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆnsqã€Kafakaï¼‰ç­‰ä¸»æµæŠ€æœ¯ã€‚ç”±äºæŠ€æœ¯ç¹æ‚ï¼Œç§ç±»ç¹å¤šï¼Œé€‰å–é€‚åˆè‡ªå·±ä¸šåŠ¡æ¨¡å¼çš„å·¥å…·å½¢æˆç»„ä»¶åŒ–åˆ©äºè·¨å¹³å°éƒ¨ç½²ï¼Œè¿™æ˜¯æ•°æ®é‡‡é›†åº”è€ƒè™‘çš„ã€‚ï¼ˆPSï¼šå®é™…ä¸Šå¯¹äºæ—¥å¿—æµå¼æ”¶é›†çš„å½¢å¼é€šå¸¸æ˜¯æ•ˆç‡é«˜ï¼Œé«˜å“åº”ï¼Œä½†ä¹Ÿå¤„äºä¸ç¨³å®šçš„ï¼Œæ˜“ä¸¢å¤±æ•°æ®ç­‰ç°çŠ¶ã€‚ï¼‰</p><p>(2)    æ•°æ®å­˜å‚¨èƒ½åŠ›<br>äº’è”ç½‘çš„æ•°æ®ã€å¤§ã€‘æ˜¯æ¯‹åº¸ç½®ç–‘çš„äº‹å®ï¼Œä¼ ç»ŸRDBMSçš„æ ¸å¿ƒè®¾è®¡æ€æƒ³åŸºæœ¬ä¸Šæ˜¯30å¹´å‰å½¢æˆçš„ï¼Œåœ¨æ•°æ®ä»“åº“é¢†åŸŸæœ‰ç›¸å½“æƒå¨çš„å…¬å¸æœ‰Teradataã€IBMã€Oracleã€SAPç­‰è¿™é‡Œå…¬å¸å‡æ‹¥æœ‰è‡ªèº«æ•°æ®å­˜å‚¨ç³»ç»Ÿä»¥åŠè½¯ç¡¬ä¸€ä½“åŒ–çš„å¤§æ•°æ®è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒåŠ¨æ€æ‰©å±•çš„èƒ½åŠ›ï¼ŒTeradataã€Aster Dataã€GreenPluméƒ½æ˜¯MPPå­˜å‚¨æ¶æ„ï¼Œæ”¯æŒPBçº§åˆ«å­˜å‚¨ï¼ˆå‰ä¸¤è€…å±äºå•†ä¸šæ•°æ®åº“ï¼ŒGreenPlumå¼€æºï¼‰ï¼Œè¿™äº›å‡æ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œæˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„Hadoopæ˜¯å±äºSMPæ¶æ„ï¼Œæ”¯æŒéç»“æ„åŒ–ã€åŠç»“æ„åŒ–ã€ç»“æ„åŒ–æ•°æ®å­˜å‚¨ï¼Œæ•°æ®å­˜å‚¨å¹³å°çš„é€‰å‹æ ¹æ®ä¼ä¸šçš„ä¸šåŠ¡æ¨¡å¼é€‰å®šã€‚</p><p>(3)    å¹³å°ç®¡ç†èƒ½åŠ›<br>æ•°æ®ç®¡ç†ï¼šæ•°æ®çš„äº¤æ¢å¿Œè®³æ•°æ®å†—ä½™ï¼Œæµ™æ±Ÿç§»åŠ¨å¤§æ•°æ®ä¸­å¿ƒä½¿ç”¨äºšä¿¡äº‘åŒ–äº¤æ¢å¹³å°å‡ºç°äº†è¿™æ ·çš„ä¸€ä¸ªåœºæ™¯ï¼Œå‚å®¶Aéœ€è¦ç”Ÿäº§ç³»ç»Ÿä¸­æ•°æ®è¡¨T1éƒ¨åˆ†å­—æ®µ,ï¼Œå‚å®¶Béœ€è¦ç”Ÿäº§ç³»ç»Ÿä¸­æ•°æ®è¡¨T1çš„æ‰€æœ‰å­—æ®µï¼Œå¦æœ‰ç‰¹æ®Šæƒ…æ™¯é•¿å®¶Céœ€è¦è¡¨ä¸­çš„å­—æ®µä¸å‚å®¶Aæœ‰äº¤å‰å­—æ®µç°è±¡ï¼Œç”Ÿäº§ç³»ç»Ÿä¸ºç»™ä¸‰ä¸ªå‚å®¶åŒæ—¶ä¾›æ•°ï¼Œé€ æˆäº†å¤§é‡æ•°æ®å†—ä½™ï¼Œç©ºé—´æœ‰æ•ˆåˆ©ç”¨ç‡60%ä¸åˆ°ã€‚</p><p>å¤šç§Ÿæˆ·ç®¡ç†ï¼šæ•°æ®äº¤æ¢æœ¬èº«çš„ä¸€ä¸ªæ¦‚å¿µå°±æ˜¯äº¤æ¢ï¼Œæ„å‘³ç€å¤šç§Ÿæˆ·ï¼Œå¹³å°æ˜¯å¼€æ”¾çš„ï¼Œé¢å‘å¤šä¸ªéƒ¨é—¨ç”šè‡³å¤šä¸ªä¼ä¸šï¼Œç§Ÿæˆ·å¯ä»¥çµæ´»åˆ›å»ºè‡ªå·±çš„ä½œä¸šä½“ç³»ï¼Œæå‡ºç›¸åº”çš„æ•°æ®éœ€æ±‚ï¼Œè¿›è¡Œè‡ªä¸»ç®¡ç†å’Œé…ç½®ï¼Œè·¨ç³»ç»Ÿæˆ–è€…è·¨éƒ¨é—¨çš„æ•°æ®è¯·æ±‚å¼€æ”¾ç»™ç”¨æˆ·ï¼Œå¼€å¯æœ‰æ•ˆçš„éœ€æ±‚ç®¡ç†ä½“ç³»ã€‚</p><p>ä½œä¸šç®¡ç†ï¼šETLå¹³å°æ‰€éœ€ç»´æŠ¤çš„ç»†èŠ‚ç¹å¤šï¼Œå¦‚æœäº¤äº’çš„æ¥å£ç®¡ç†ä¸€å¡Œç³Šæ¶‚ï¼Œæ¯”å¦‚ç¹å¤šçš„FTPã€æ•£ä¹±çš„Shellè„šæœ¬ã€crontabå®šæ—¶ä»»åŠ¡ææ™•äº†è¿ç»´äººå‘˜ï¼Œä¸€æ—¦äººå‘˜è¿­ä»£ï¼Œä»˜å‡ºçš„ç®¡ç†æˆæœ¬å¾ˆå¤§ï¼Œå»ºç«‹ä¸€å¥—å®Œå–„çš„å…ƒæ•°æ®ç®¡ç†ä½“ç³»æ˜¯ä¿éšœç³»ç»Ÿæ­£å¸¸è¿ä½œå¿…éœ€çš„å·¥å…·ã€‚</p><p>(4)    æ•°æ®è®¡ç®—èƒ½åŠ›</p><p>äº’è”ç½‘çš„æ•°æ®â€œå¤§â€æ˜¯ä¸äº‰çš„äº‹å®ï¼Œç°åœ¨åˆ†æä¸€ä¸‹æ•°æ®å¤„ç†æŠ€æœ¯é¢ä¸´çš„æŒ‘æˆ˜ï¼Œè¿‘å‡ å¹´è§è¿‡å½¢å½¢è‰²è‰²çš„æ•°æ®ä»“åº“ï¼Œå¤§å¤šä½¿ç”¨çš„è‡ªä¸‹è€Œä¸Šçš„æ–¹å¼å»ºè®¾ï¼Œç”Ÿæ€æ•°ä»“ä¸­æ‰€ä½¿ç”¨çš„å¹³å°äº§å“å¤šæ ·æ€§ï¼Œç„¶è€Œä¼ ç»Ÿè¡Œä¸šç”µä¿¡ä¹Ÿå¥½ï¼Œé“¶è¡Œä¹Ÿå¥½ï¼Œäº’è”ç½‘äº§å“æ•°ä»“ä¹Ÿç½¢ï¼Œé²œæœ‰PBçº§åˆ«çš„æ•°ä»“ï¼Œé¢å¯¹çš„ç”¨æˆ·é‡å‡ åƒä¸‡ï¼Œå¯¹åº”çš„æ•°æ®æ˜¯å‡ ç™¾TBï¼Œæ•°æ®é‡å°‘æ€ä¹ˆæ ·çš„å»ºè®¾æ–¹æ¡ˆéƒ½æ˜¯æ— æ‰€è°“çš„ï¼Œå½“é¢å¯¹10äº¿çº§åˆ«çš„ç”¨æˆ·ï¼ŒPBçº§åˆ«çš„æ•°æ®æ—¶ï¼Œå¦‚ä½•æ»¡è¶³æ•°æ®è®¡ç®—ï¼Ÿå¦‚ä½•é€‚åº”å¤šç§æ•°æ®å¹³å°çš„æ¥å…¥ï¼Ÿ</p><p>æ•°æ®äº¤æ¢å¹³å°éœ€å…·å¤‡å¼ºå¤§çš„æ•°æ®è®¡ç®—èƒ½åŠ›ï¼Œæ”¯æŒå¸¸è§çš„åˆ†å¸ƒå¼è®¡ç®—æ¨¡å‹ï¼Œä»¥å®ç°æ•°æ®çš„é¢„å¤„ç†ï¼ˆæ ¼å¼è½¬æ¢ã€ä¾‹å¦‚lzoè½¬æ¢æˆHFileã€‘ï¼Œç©ºå€¼å¤„ç†ã€æ•°æ®å‹ç¼©ç­‰ï¼‰ä»¥åŠå¸¸è§çš„è®¡ç®—å‡½æ•°ï¼ˆçª—å£å‡½æ•°ï¼Œä¸­ä½æ•°è®¡ç®—ã€æ—¶åºè®¡ç®—ã€å›¾è®¡ç®—ç­‰ï¼‰ã€‚</p><p>(5)    å¹³å°å¼€æ”¾èƒ½åŠ›<br>èƒ½å¤Ÿå¯¹å¤–è¾“å‡ºæ•°æ®ï¼Œè¿™æ˜¯ä¼ä¸šçº§çš„äº¤æ¢å¹³å°æ‰€åº”å…·å¤‡çš„åŸºæœ¬èƒ½åŠ›ï¼Œæ•°æ®å¼€æ”¾å¹¶ä¸æ„å‘³ç€è°éƒ½å¯ä»¥éšæ„è·å–æ•°æ®ï¼Œæ”¾å¼ƒæ•°æ®å®‰å…¨ï¼Œæ•°æ®å¼€æ”¾è¡¨ç¤ºæ•°æ®å…±äº«ï¼Œæ»¡è¶³ä¼ä¸šçš„å„é¡¹ä¸šåŠ¡éœ€æ±‚ï¼Œæ ¹æ®éƒ¨é—¨çš„å…·ä½“éœ€æ±‚ï¼Œç”³è¯·å·²å¼€æ”¾çš„æ•°æ®ï¼Œæ•°æ®å®‰å…¨ä¿éšœã€‚</p><p>æ•°æ®äº¤æ¢å¹³å°æ‰€åº”æ”¯æŒçš„ä¸ä»…æ˜¯ä¼ ç»Ÿçš„æ•°æ®å¼€æ”¾ï¼Œæ›´åº”å…·æœ‰å…ƒæ•°æ®å¼€æ”¾ã€è®¡ç®—èƒ½åŠ›çš„å¼€æ”¾ï¼Œä¸°å¯Œçš„APIæä¾›ï¼Œæ—¢ç„¶æ— æ³•æ»¡è¶³æ‰€æœ‰çš„ä¸ªæ€§åŒ–éœ€æ±‚ï¼Œé‚£å°±åº”æœ‰å¼€æ”¾çš„APIä¸ºå…¶ä»–ç³»ç»Ÿæ— ç¼è¡”æ¥ï¼Œå•çº¯çš„æ•°æ®å¯¼å‡ºå·²æ— æ³•æ»¡è¶³ä¸šåŠ¡çš„å‘å±•ã€‚</p><p>(6)    ä½œä¸šè°ƒåº¦èƒ½åŠ›<br>è°ƒåº¦åŠŸèƒ½æ˜¯ä»ETLå·¥å…·å½¢æˆåˆä¾¿æ‹¥æœ‰çš„ï¼ŒETLè°ƒåº¦å·¥å…·å‘å±•ä¹Ÿä»æœ€åˆçš„crontabè¡ç”Ÿåˆ°ç°åœ¨çš„è°ƒåº¦å¹³å°ï¼Œä¸šå†…ä¼ä¸šçº§çš„è°ƒåº¦å·¥å…·ä¾‹å¦‚å›½å¤–çš„Informaticaå…¬å¸çš„Informaticaã€Teradataçš„ ETL Automationã€å¾®è½¯çš„ SSISã€Control-Mï¼Œå›½å†…çš„æœ‰è‡ªä¸»ç ”å‘é˜¿é‡Œçš„Zeusï¼Œäºšä¿¡çš„ AI-CLOUD-ETLï¼Œåä¸ºç ”å‘çš„äº‘-ETLï¼Œç½‘æ˜“çš„nscheduleã€çŒ›çŠ¸ç­‰ï¼Œå¼€æºçš„è°ƒåº¦å·¥å…·æœ‰Azkabanï¼ŒKettleç­‰ã€‚</p><p>è°ƒåº¦æ¨¡å¼æ˜¯å„è‰²å„æ ·ï¼Œæœ‰ä»¥å·¥ä½œæµè°ƒåº¦å•ä½ï¼Œæœ‰ä»¥ä½œä¸šä¸ºè°ƒåº¦å•ä½ï¼Œæ‰€æ”¯æŒçš„ä½œä¸šå½¢å¼ä¹Ÿæ˜¯å¤šç§ï¼Œè„šæœ¬å½¢å¼(shellã€pythonã€Perlï¼Œruby)ï¼ŒSQLã€Javaã€MapReduceä»¥åŠå…¶ä»–ç»„ä»¶å½¢å¼ã€‚è°ƒåº¦ç­–ç•¥ä¹Ÿæ˜¯ä¸°å¯Œå¤šæ ·ï¼Œæœ‰æ—¶é—´è§¦å‘ã€æ—¶é—´è§¦å‘ã€æ¥å£é€šçŸ¥ã€æ‰‹å·¥æ‰§è¡Œã€‚</p><p>å®ç°ä»»åŠ¡çš„ç»Ÿä¸€è°ƒåº¦ï¼Œæ”¯æŒåŠ¨æ€æ‰©å±•çš„ä½œä¸šç±»å‹ï¼Œä¸°å¯Œçš„è°ƒåº¦æ¨¡å¼æ˜¯æ•°æ®äº¤æ¢å¹³å°åº”å…·å¤‡çš„ã€‚ä»¥ä¸Šæ‰€åˆ—ä¸¾çš„6é¡¹èƒ½åŠ›æå‡ºä¸€äº›å¸¸è§çš„ä½“ç°ï¼Œæ„å»ºæ•°æ®äº¤æ¢å¹³å°æ‰€è€ƒè™‘çš„ç»†èŠ‚éå¸¸å¤šã€‚</p><h3 id="0x3-äº¤æ¢å¹³å°å»ºè®¾æœ€ä½³å®è·µ"><a href="#0x3-äº¤æ¢å¹³å°å»ºè®¾æœ€ä½³å®è·µ" class="headerlink" title="0x3 äº¤æ¢å¹³å°å»ºè®¾æœ€ä½³å®è·µ"></a>0x3 äº¤æ¢å¹³å°å»ºè®¾æœ€ä½³å®è·µ</h3><p>å¾ˆå¤šæ•°æ®å¹³å°æä¾›çš„æ˜¯çº¯ç²¹çš„æ•°æ®æœåŠ¡ï¼Œè¾ƒå°‘æä¾›Apiæˆ–å…ƒæ•°æ®æœåŠ¡ä»¥æ»¡è¶³å…¶ä»–å¹³å°çš„åµŒå…¥ï¼Œä¸šå†…æ‰“é€ æˆPaaSçº§çš„ETLäº¤æ¢å¹³å°å±ˆæŒ‡å¯æ•°ï¼ŒæŠ€æœ¯å› ç´ æ˜¯ä¸€æ–¹é¢ï¼Œä¸šåŠ¡éœ€æ±‚æ˜¯å¦éœ€è¦æ‰“é€ è¿™æ ·ä¸€ä¸ªå¹³å°ä¹Ÿæ˜¯å…¶ä¸­ä¸€ä¸ªåŸå› ï¼Œå¯¹ä¸šåŠ¡éœ€æ±‚çš„ç†è§£ï¼Œæ˜¯å¦å…·æœ‰æŒç»­çš„ç»´æŠ¤åŠæ›´æ–°èƒ½åŠ›åˆæ˜¯å¦ä¸€æ–¹é¢ã€‚è¿˜æœ‰ä¸€å¥è¯æ˜¯è¿™ä¹ˆè¯´çš„ï¼Œè§„åˆ™ä¸çµæ´»æ€ä¹ˆå–èˆï¼Ÿä¸ºä¾¿äºç»´æŠ¤å¯èƒ½å°†ä¸»æµçš„éœ€æ±‚æ»¡è¶³ï¼Œå¯¹äºä¸€äº›ä¸ªæ€§åŒ–çš„éœ€æ±‚åˆ™è¢«æŠ›å¼ƒï¼Œå¾ˆå¤šå…¬å¸æŠ€æœ¯ä¹Ÿå¾ˆå¼ºï¼Œä½†æ‰“é€ è¿™æ ·ä¸€ä¸ªETLäº¤æ¢å¹³å°æ›´å¤šçš„è€ƒè™‘æ˜¯ä»ç”¨æˆ·éœ€æ±‚ä¸­æ¥ï¼Œåˆ°å®è·µå»æ¥ï¼Œçº¯ç²¹çš„ä¸ºå®ç°åŠŸèƒ½ï¼Œå¤§è°ˆæ€§èƒ½ä¹Ÿæœªå¿…æ˜¯ä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œä¸šåŠ¡å§‹ç»ˆä¸ºç‹ã€‚ä¸‹é¢è®¾æƒ³ä¸€ä¸ªäº¤æ¢å¹³å°æ¶æ„å›¾ä¾›å‚è€ƒï¼š<br><img src="/knowledge/ad06504b-d047-4671-aa24-94aabaaa3a00.png" alt="ad06504b-d047-4671-aa24-94aabaaa3a00"></p><p><strong>ç¨ä½œæ‹“å±•ï¼š</strong><br><img src="/knowledge/8fe41e06-28d7-4405-85f9-7ceffad1f0a1.png" alt="8fe41e06-28d7-4405-85f9-7ceffad1f0a1"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;â€‹          ä»1990å¹´æ•°æ®ä»“åº“ä¹‹çˆ¶æ¯”å°”Â·æ©é—¨ï¼ˆBill Inmonï¼‰æå‡ºæ•°æ®ä»“åº“çš„æ¦‚å¿µï¼ŒETLä½œä¸ºæ•°æ®ä»“åº“çš„æ ¸å¿ƒç»„ä»¶ï¼Œåœ¨ä¼ ç»Ÿçš„æ•°æ®ä»“åº“ä¸­æ˜¯æœåŠ¡äºæ•°æ®é‡‡é›†ï¼Œæ•°æ®å¤„ç†ï¼Œå¤§æ•°æ®æ—¶ä»£æ¥ä¸´ï¼Œå¯¹ETLçš„ç†è§£ä¹Ÿç”±ã€æŠ½å–ã€è½¬æ¢ã€åŠ è½½ã€‘å‡çº§åˆ°ã€äº¤æ¢ã€‘è¿™ä¸ªå±‚é¢ã€‚å¦‚æœä½ ä¹Ÿè€ƒè™‘å»ºè®¾ä¼ä¸šçº§æ•°æ®ä»“åº“å¯ä»¥ä½œä¸ºå‚è€ƒã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="0x1 æ•°æ®ä»“åº“" scheme="https://deletee.github.io/categories/0x1-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/"/>
    
      <category term="0x10 æ•°ä»“æ¦‚è®º" scheme="https://deletee.github.io/categories/0x1-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/0x10-%E6%95%B0%E4%BB%93%E6%A6%82%E8%AE%BA/"/>
    
    
      <category term="æ•°æ®ä»“åº“" scheme="https://deletee.github.io/tags/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>åˆ©ç”¨HFile BulkLoadå®ç°HBaseæµ·é‡æ•°æ®åŠ è½½</title>
    <link href="https://deletee.github.io/2016/07/01/hbase-bulk-load/"/>
    <id>https://deletee.github.io/2016/07/01/hbase-bulk-load/</id>
    <published>2016-07-01T07:46:30.000Z</published>
    <updated>2019-01-17T10:44:45.397Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨æ•°æ®ä»“åº“å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å°†HBaseä½œä¸ºæˆ‘ä»¬æ•°æ®å³æœåŠ¡çš„æŒä¹…åŒ–å­˜å‚¨ä»‹è´¨ï¼Œç”±æ­¤å¤§é‡çš„æ•°æ®æ¨¡å‹ä»æ•°æ®ä»“åº“è®¡ç®—åå†™å…¥è‡³HBaseã€‚é€šå¸¸æˆ‘ä»¬ä½¿ç”¨HBaseæä¾›çš„APIæ–¹æ³•ï¼Œå®ç°äº†æ¥å£è°ƒç”¨ï¼Œä½†å¯¹äºæµ·é‡çš„æ•°æ®ï¼Œæ¥å£çš„è°ƒç”¨å¼•èµ·HBase cpuã€å†…å­˜å ç”¨è¿‡é«˜ï¼Œå½±å“æ­£å¸¸ä¸šåŠ¡ä½¿ç”¨ã€‚äºæ˜¯æˆ‘ä»¬ç€æ‰‹ç ”ç©¶HFile BulkLoadçš„æ–¹å¼è¿›è¡Œç¦»çº¿æ•°æ®åŠ è½½ã€‚</p><a id="more"></a><h4 id="0x0-HBaseçš„å­˜å‚¨æ–‡ä»¶æ ¼å¼ï¼šHFile"><a href="#0x0-HBaseçš„å­˜å‚¨æ–‡ä»¶æ ¼å¼ï¼šHFile" class="headerlink" title="0x0 HBaseçš„å­˜å‚¨æ–‡ä»¶æ ¼å¼ï¼šHFile"></a>0x0 HBaseçš„å­˜å‚¨æ–‡ä»¶æ ¼å¼ï¼šHFile</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HBaseå®é™…çš„å­˜å‚¨æ–‡ä»¶åŠŸèƒ½æ˜¯ç”±HFileç±»å®ç°çš„ï¼Œå®ƒè¢«ä¸“é—¨åˆ›å»ºä»¥è¾¾åˆ°ä¸€ä¸ªç›®çš„ï¼šæœ‰æ•ˆåœ°å­˜å‚¨HBaseçš„æ•°æ®ã€‚å®ƒä»¬åŸºäºHadoopçš„TFileç±»ï¼Œå¹¶æ¨¡ä»¿-Googleçš„BigTableæ¶æ„ä½¿ç”¨çš„SSTableæ ¼å¼ã€‚æ›¾åœ¨HBaseä¸­ä½¿ç”¨è¿‡çš„Hadoopçš„MapFileç±»è¢«è¯æ˜æ€§èƒ½ä¸å¤Ÿå¥½ã€‚<br><img src="/knowledge/image-20190116214700183.png" alt="image-20190116214700183"></p><h4 id="0x1-BulkLoadåŸç†"><a href="#0x1-BulkLoadåŸç†" class="headerlink" title="0x1 BulkLoadåŸç†"></a>0x1 BulkLoadåŸç†</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä½¿ç”¨ Bulk Load æ–¹å¼ç”±äºåˆ©ç”¨äº† HBase çš„æ•°æ®ä¿¡æ¯æ˜¯æŒ‰ç…§ç‰¹å®šæ ¼å¼å­˜å‚¨åœ¨ HDFS é‡Œçš„è¿™ä¸€ç‰¹æ€§ï¼Œç›´æ¥åœ¨ HDFS ä¸­ç”ŸæˆæŒä¹…åŒ–çš„ HFile æ•°æ®æ ¼å¼æ–‡ä»¶ï¼Œç„¶åå®Œæˆå·¨é‡æ•°æ®å¿«é€Ÿå…¥åº“çš„æ“ä½œï¼Œé…åˆ MapReduce å®Œæˆè¿™æ ·çš„æ“ä½œï¼Œä¸å ç”¨ Region èµ„æºï¼Œä¸ä¼šäº§ç”Ÿå·¨é‡çš„å†™å…¥ I/Oï¼Œæ‰€ä»¥éœ€è¦è¾ƒå°‘çš„ CPU å’Œç½‘ç»œèµ„æºã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bulk Load çš„å®ç°åŸç†æ˜¯é€šè¿‡ä¸€ä¸ª MapReduce Job æ¥å®ç°çš„ï¼Œé€šè¿‡ Job ç›´æ¥ç”Ÿæˆä¸€ä¸ª HBase çš„å†…éƒ¨ HFile æ ¼å¼æ–‡ä»¶ï¼Œç”¨æ¥å½¢æˆä¸€ä¸ªç‰¹æ®Šçš„ HBase æ•°æ®è¡¨ï¼Œç„¶åç›´æ¥å°†æ•°æ®æ–‡ä»¶åŠ è½½åˆ°è¿è¡Œçš„é›†ç¾¤ä¸­ã€‚ä½¿ç”¨ Bulk Load åŠŸèƒ½æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ImportTsv å·¥å…·ï¼ŒImportTsv æ˜¯ HBase çš„ä¸€ä¸ªå†…ç½®å·¥å…·ï¼Œç›®çš„æ˜¯ä» TSV æ–‡ä»¶ç›´æ¥åŠ è½½å†…å®¹è‡³ HBaseã€‚å®ƒé€šè¿‡è¿è¡Œä¸€ä¸ª MapReduce Job, å°†æ•°æ®ä» TSV æ–‡ä»¶ä¸­ç›´æ¥å†™å…¥ HBase çš„è¡¨æˆ–è€…å†™å…¥ä¸€ä¸ª HBase çš„è‡ªæœ‰æ ¼å¼æ•°æ®æ–‡ä»¶ã€‚</p><h4 id="0x2-ç»“åˆMapReduceç”ŸæˆHFile"><a href="#0x2-ç»“åˆMapReduceç”ŸæˆHFile" class="headerlink" title="0x2 ç»“åˆMapReduceç”ŸæˆHFile"></a>0x2 ç»“åˆMapReduceç”ŸæˆHFile</h4><h5 id="0x20-ä½œä¸šçš„é…ç½®"><a href="#0x20-ä½œä¸šçš„é…ç½®" class="headerlink" title="0x20 ä½œä¸šçš„é…ç½®"></a>0x20 ä½œä¸šçš„é…ç½®</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Job Configure</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Job job = Job.getInstance(conf,<span class="string">"HFileProducerETL"</span>);</span><br><span class="line">        job.setJarByClass(HFileProducerETL2.class);</span><br><span class="line">        TableMapReduceUtil.addDependencyJars(job);</span><br><span class="line">        job.setMapperClass(BulkLoadMapper.class);</span><br><span class="line">        job.setReducerClass(KeyValueSortReducer.class);</span><br><span class="line">        job.setMapOutputKeyClass(ImmutableBytesWritable.class);</span><br><span class="line">        job.setOutputValueClass(KeyValue.class);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (fs.exists(outputPath)) &#123;</span><br><span class="line">            fs.delete(outputPath, <span class="keyword">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        FileInputFormat.setInputPaths(job,inputPath);</span><br><span class="line">        FileOutputFormat.setOutputPath(job,outputPath);</span><br><span class="line">        HTable htable =<span class="keyword">new</span> HTable(conf, tablename);</span><br><span class="line">        HFileOutputFormat2.configureIncrementalLoad(job,htable,htable);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> job.waitForCompletion(<span class="keyword">false</span>) ? <span class="number">0</span> : <span class="number">1</span>;</span><br></pre></td></tr></table></figure><h5 id="0x21-Map"><a href="#0x21-Map" class="headerlink" title="0x21 Map"></a>0x21 Map</h5><p>â€‹             key ç±»ï¼šImmutableBytesWritable<br>â€‹          value ç±»ï¼šKeyValue</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">map</span><span class="params">(LongWritable key, Text value, Context context)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                String line = value.toString();</span><br><span class="line">                String[] all_column_values = line.split(context.getConfiguration().get(FILE_DELIMITER_STR),-<span class="number">1</span>);</span><br><span class="line">                String rowKeyString = all_column_values[rowKeyIndex];</span><br><span class="line">                <span class="keyword">byte</span>[] rowKey=Bytes.toBytes(rowKeyString);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// rowKey èµ‹å€¼</span></span><br><span class="line">                ImmutableBytesWritable rowKeyWritable=<span class="keyword">new</span> ImmutableBytesWritable(rowKey);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (all_column_name.length!=all_column_values.length)&#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; all_column_name.length; i++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (export_column_index[i] == EXPORT_FLAG</span><br><span class="line">                            &amp;&amp; !all_column_values[i].trim().equals(HBaseConstant.HiveNULL)</span><br><span class="line">                            &amp;&amp; !all_column_values[i].trim().equals(HBaseConstant.HBaseNull)</span><br><span class="line">                            &amp;&amp; !all_column_values[i].trim().equals(HBaseConstant.HEmpty)</span><br><span class="line">                    )&#123;</span><br><span class="line">                        KeyValue kv ;</span><br><span class="line">                        <span class="comment">// å¦‚æœæ˜¯ HFILE_CLEAR_FLAG åˆ™ æ¸…ç©º</span></span><br><span class="line">                        <span class="keyword">if</span> (all_column_values[i].equals(HBaseConstant.HFILE_CLEAR_FLAG))&#123;</span><br><span class="line">                            all_column_values[i]=HBaseConstant.HEmpty;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (timestampIndex == TIMESTAMP_COLUMN_DEFAULT_INDEX)&#123;</span><br><span class="line">                            kv = <span class="keyword">new</span> KeyValue(rowKey, CF, Bytes.toBytes(all_column_name[i]),Bytes.toBytes(all_column_values[i]));</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span>&#123;</span><br><span class="line">                            Long timestamp_value = Long.parseLong(all_column_values[timestampIndex]);</span><br><span class="line">                            kv = <span class="keyword">new</span> KeyValue(rowKey, CF, Bytes.toBytes(all_column_name[i]),timestamp_value,Bytes.toBytes(all_column_values[i]));</span><br><span class="line">                        &#125;</span><br><span class="line">                        context.write(rowKeyWritable,kv);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h5 id="0x22-BulkLoad"><a href="#0x22-BulkLoad" class="headerlink" title="0x22 BulkLoad"></a>0x22 BulkLoad</h5><p>â€‹      ç”ŸæˆHFileä¹‹åï¼Œloadç›¸å¯¹å°±æ¯”è¾ƒç®€å•äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Configuration conf = DefConfiguration.GetConfiguration(hbaseEnv);</span><br><span class="line">conf.setInt(<span class="string">"hbase.mapreduce.bulkload.max.hfiles.perRegion.perFamily"</span>,<span class="number">5000</span>);</span><br><span class="line"></span><br><span class="line">HTable htable =<span class="keyword">new</span> HTable(conf, tableName);</span><br><span class="line">LoadIncrementalHFiles loader = <span class="keyword">new</span> LoadIncrementalHFiles(conf);</span><br><span class="line">loader.doBulkLoad(hFilePath, htable);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;åœ¨æ•°æ®ä»“åº“å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å°†HBaseä½œä¸ºæˆ‘ä»¬æ•°æ®å³æœåŠ¡çš„æŒä¹…åŒ–å­˜å‚¨ä»‹è´¨ï¼Œç”±æ­¤å¤§é‡çš„æ•°æ®æ¨¡å‹ä»æ•°æ®ä»“åº“è®¡ç®—åå†™å…¥è‡³HBaseã€‚é€šå¸¸æˆ‘ä»¬ä½¿ç”¨HBaseæä¾›çš„APIæ–¹æ³•ï¼Œå®ç°äº†æ¥å£è°ƒç”¨ï¼Œä½†å¯¹äºæµ·é‡çš„æ•°æ®ï¼Œæ¥å£çš„è°ƒç”¨å¼•èµ·HBase cpuã€å†…å­˜å ç”¨è¿‡é«˜ï¼Œå½±å“æ­£å¸¸ä¸šåŠ¡ä½¿ç”¨ã€‚äºæ˜¯æˆ‘ä»¬ç€æ‰‹ç ”ç©¶HFile BulkLoadçš„æ–¹å¼è¿›è¡Œç¦»çº¿æ•°æ®åŠ è½½ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="0x2 æŠ€æœ¯å¹³å°" scheme="https://deletee.github.io/categories/0x2-%E6%8A%80%E6%9C%AF%E5%B9%B3%E5%8F%B0/"/>
    
      <category term="0x22 HBase" scheme="https://deletee.github.io/categories/0x2-%E6%8A%80%E6%9C%AF%E5%B9%B3%E5%8F%B0/0x22-HBase/"/>
    
    
      <category term="hbase" scheme="https://deletee.github.io/tags/hbase/"/>
    
  </entry>
  
</feed>
